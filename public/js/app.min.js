"use strict";function ColorPicker(){var e=this;e.hours="hours",e.minutes="minutes",e.seconds="seconds",e.red="red",e.green="green",e.blue="blue",e.colors=ko.observable({red:{class:"btn-danger",interval:e.hours},green:{class:"btn-success",interval:e.minutes},blue:{class:"btn-primary",interval:e.seconds}}),e.hoursColor=ko.observable(e.colors().red.class),e.minutesColor=ko.observable(e.colors().green.class),e.secondsColor=ko.observable(e.colors().blue.class),e.update=function(r,t){e[r+"Color"](e.colors()[t].class);var n;for(var o in e.colors())if(e.colors().hasOwnProperty(o)&&e.colors()[o].interval===r){n=o;break}var a=e.colors()[t];e[a.interval+"Color"](e.colors()[n].class);var i=e.colors()[t].interval;e.colors()[t].interval=r,e.colors()[n].interval=i}}function Renderer(){function e(){if(!a.stopRendering())try{requestAnimationFrame(e),t(),r(),a.renderFunction()&&a.renderFunction()()}catch(e){}}function r(){if(o){var e=l.width/2,r=l.height/2;c.beginPath(),c.drawImage(o,e*-1,r*-1,i,s),c.closePath()}}function t(){c.clearRect(0-l.width/2,0-l.height/2,l.width,l.height)}function n(e,r){var t=parseInt(e.slice(1,3),16),n=parseInt(e.slice(3,5),16),o=parseInt(e.slice(5,7),16),a=parseInt(r,16)/255;return"rgba("+t+", "+n+", "+o+", "+a+")"}var o,a=this,i=1200,s=700,l=$("#theCanvas")[0],c=l.getContext("2d"),u=[1,0,0,1,0,0],d=!1;a.renderFunction=ko.observable(),a.stopRendering=ko.observable(!1),e(),a.loadImage=function(e){void 0===o&&(o=new Image),o.onload=function(){var e=l.width/2,r=l.height/2;d||(u[4]+=u[0]*e+u[2]*r,u[5]+=u[1]*e+u[3]*r,c.translate(e,r),d=!0),c.drawImage(o,e*-1,r*-1,i,s)},o.src=e},a.ellipse=function(e,r,t,o,a){a=n(a,100),c.beginPath(),c.ellipse(e,r,t/2,o/2,0,2*Math.PI,!1),c.fillStyle=a,c.fill()},a.polygon=function(e,r,t){var o=e.slice(0);c.beginPath(),r=n(r,t),c.fillStyle=r;for(var i=o[0],s=[],l=0;l<o.length;l++){var u=o[l];0===l?c.moveTo(u.x,u.y):(u.x===i.x&&u.y===i.y&&l<o.length-1&&(s=o.splice(l+1,o.length-l)),c.lineTo(u.x,u.y))}c.fill(),c.closePath(),s.length>0&&a.polygon(s,r)},a.text=function(e,r,t,n,o){if(c.font="bold 16px Segoe UI",c.fillStyle=n,o){var a=c.measureText(t);e-=a.width/2}c.fillText(t,e,r)},a.width=function(){return i},a.height=function(){return s};var f,p,g;a.addMouseOverEvent=function(e,r,t){f=e,p=r,g=t,l.addEventListener("mousemove",function(e){var r=l.getBoundingClientRect(),t=l.width/2,n=l.height/2,o=e.clientX-r.left-t,a=e.clientY-r.top-n;f(o,a)},!1)};var h;a.addMouseScrollEvent=function(e){h=e,l.addEventListener("mousewheel",function(){var e=event.wheelDelta/120;h(1+e/2)},!1)}}function TimeZoneService(e){function r(e,r){var o=t(l()),a=n(s()),i=t(r)-o,c=n(e)-a;return{x:i,y:c}}function t(e){e=o(e);var r=f/Math.PI*Math.pow(2,c()),t=e+Math.PI;return r*t}function n(e){e=o(e);var r=f/Math.PI*Math.pow(2,c()),t=Math.tan(Math.PI/4+e/2),n=Math.PI-Math.log(t);return r*n}function o(e){return e*(Math.PI/180)}var a,i,s,l,c,u,d=this,f=e/4;d.setup=function(e,r,t){s=e,l=r,c=t},d.loadTimeZones=function(e,t,n){function o(){fetch("/api/color-zones/map-bounds").then(function(e){e.ok&&e.json().then(function(e){for(var t=JSON.parse(e),n=0;n<t.length;n++)for(var o=t[n],i=0;i<a().length;i++)if(a()[i].matchesId(o.name)){var s=r(o.boundingBox.ymin,o.boundingBox.xmin),l=r(o.boundingBox.ymax,o.boundingBox.xmax);a()[i].boundingBox={xyMin:s,xyMax:l};break}})})}function f(e){var t=e.name.replace(/\/|_/g,"-");fetch("/api/color-zones/polygons/"+t).then(function(n){return n.ok?void n.json().then(function(t){for(var n=JSON.parse(t),o={},a=0;a<n.polygons.length;a++){for(var s=n.polygons[a],l=[],c=0;c<s.points.length;c+=2){var u=s.points.slice(c,c+2),d=r(u[0],u[1]);l.push(d)}var f=o[s.name];f?f.coords=f.coords.concat(l):(f=new Polygon(s.name,l,r(s.centroid[1],s.centroid[0])),o[s.name]=f)}var p,g=0;$.each(o,function(e,r){r.coords.length>g&&(g=r.coords.length,p=r.name)}),i()[e.name]||(i()[e.name]=[]),i()[e.name]=o,e.centroidPolygon=o[p]}):void u("Something went wrong trying to load the time zone polygons for "+t+"...")})}return u=e,void 0===s||void 0===l||void 0===c?void u("You need to call TimeZoneService.setCenterCoordinates(centerLat, centerLng, zoom) first!"):(a=t,i=n,fetch("/api/color-zones/hover-regions").then(function(e){return e.ok?void e.json().then(function(e){function t(e){for(var t=[],n=0;n<e.hoverRegion.length;n++)for(var o=e.hoverRegion[n],a=0;a<o.points.length;a+=2){var i=o.points.slice(a,a+2),s=r(i[0],i[1]);t.push(s)}return new TimeZone(e.name,t)}for(var n=JSON.parse(e),i=0;i<n.length;i++){var s=t(n[i]);f(s),a().push(s)}o()}):void u("Something went wrong trying to load the time zone regions...")}),void(d.reloadCoordinates=function(){for(var e=0;e<a().length;e++)for(var t=a()[e].coords,n=0;n<t.length;n++)t[n]=r(t[n].x,t[n].y)}))}}function TooltipService(e){function r(t){if(t!==e.length){try{e[t].id.tooltip("show")}catch(e){}setTimeout(function(){try{e[t].id.tooltip("dispose")}catch(e){}t++,e[t]||localStorage.setItem(n,!0),r(t)},1e3*e[t].timeout)}}var t=this,n="tooltipsShown";t.loadToolips=function(){var t=localStorage.getItem(n);0===e.length||t||r(0)}}function ParserDirectory(e,r,t){var n=this;n.name=e?e:null,n.directories=r?r:[],n.files=t?t:[]}function ParserFile(e,r){var t=this;t.id=e?e:0,t.name=r?r:null}function LatLng(e,r){var t=this;t.lat=e,t.lng=r}function Polygon(e,r,t){var n=this;n.name=e,n.coords=r,n.centroid=t,n.id=ko.pureComputed(function(){return n.name.replace(/\/|_/g,"-")})}function TimeZone(e,r){var t=this;t.name=e,t.coords=r,t.polygons=void 0,t.centroidPolygon=void 0,t.boundingBox=void 0,t.matchesId=function(e){return t.id()===e.replace(/\/|_/g,"-")},t.id=ko.pureComputed(function(){return t.name.replace(/\/|_/g,"-")})}var app=angular.module("mcnedward",["ui.router","ui.bootstrap","ngAnimate","vcRecaptcha"]).config(["$stateProvider","$urlRouterProvider","$httpProvider","$locationProvider",function(e,r,t,n){e.state("app",{url:"/",templateUrl:"core/home.html",controller:"ContactCtrl",title:"Edward McNealy"}).state("ii",{url:"/inheritance-inquiry/",templateUrl:"ii/ii.html",controller:"IICtrl",title:"Inheritance Inquiry"}).state("parser",{url:"/parser/",templateUrl:"parser/parser.html",controller:"ParserCtrl",title:"Parser"}).state("colorZones",{url:"/color-zones/",templateUrl:"colorZones/colorZones.html",controller:"ColorZonesCtrl",title:"Color Zones"}).state("bramble",{url:"/bramble/",templateUrl:"bramble/bramble.html",title:"Bramble"}).state("keepfit",{url:"/keepfit/",templateUrl:"keepfit/keepfit.html",title:"KeepFit"}).state("blackjack",{url:"/blackjack/",templateUrl:"blackjack/blackjack.html",controller:"BlackjackCtrl",title:"Blackjack"}).state("numberPrinter",{url:"/numberprinter/",templateUrl:"numberPrinter/numberPrinter.html",controller:"NumberPrinterCtrl",title:"Number Printer"}),r.otherwise("/"),r.when(/ii/,["$state","$match",function(e,r){e.go("ii")}]),n.html5Mode(!0)}]);angular.module("mcnedward").controller("AppCtrl",["$rootScope","$state","$timeout","$location","$anchorScroll",function(e,r,t,n,o){function a(e){e&&""!==e&&t(function(){$("html, body").animate({scrollTop:$("#"+e).offset().top+2},1)})}e.inRoot=!0,e.appTitle="Edward McNealy",e.$on("$stateChangeSuccess",function(r,t,n,o,i){e.appTitle=t.title&&""!==t.title?t.title:"Edward McNealy",a("app"===o.name?"scrollhere":o.name),"colorZones"===o.name&&e.$broadcast("stopRendering"),e.inRoot="app"===t.name||""===t.name,e.useContainerFluid="colorZones"==t.name||"parser"==t.name,e.useContainer=!e.inRoot&&!e.useContainerFluid,ga("set","page","app"===t.name?"/index.html":t.url+".html"),ga("send","pageview")}),$("#loader").fadeOut(500)}]),angular.module("mcnedward").controller("BlackjackCtrl",["$rootScope","$scope","$window","blackjackService","playerService",function(e,r,t,n,o){function a(e){r.player=o.getPlayer(),r.dealer=o.getDealer(),e&&i()}function i(){o.updateUsers([r.player,r.dealer])}function s(e){e?($("#options").show(),$("#startCards").hide(),r.stopBets=!0):($("#options").hide(),$("#startCards").show(),r.stopBets=!1)}r.player=o.getPlayer(),r.dealer=o.getDealer(),e.$on("busted",function(e,t){var i=t;"player"==i.type&&(r.message="You busted...",o.userWon("dealer")),"dealer"==i.type&&(r.message="Dealer busted! You win!",o.userWon("player")),n.flipCards(),a(!0),s(!1)}),e.$on("dealerWon",function(){r.message="Dealer wins...",o.userWon("dealer"),a(!0),s(!1)}),e.$on("playerWon",function(){r.message="You win!",o.userWon("player"),a(!0),s(!1)}),e.$on("push",function(){r.message="Push.",a(!0),s(!1)}),e.$on("21",function(e,t){var i=t;"player"==i.type&&(r.message="You got 21! You win!",o.userWon("player")),"dealer"==i.type&&(r.message="Dealer got 21...",o.userWon("dealer")),n.flipCards(),a(!0),s(!1)});for(var l=0;l<3;l++){var c=$("<img>");2==l?(c.attr("src","img/blackjack/card/b2fv.png"),c.attr("id","startCard"),c.addClass("card-img")):(c.attr("src","img/blackjack/card/b2pl.png"),c.addClass("card-img")),$("#startCards").append(c)}r.dealCards=function(){r.message="",$(".empty-card").css("display","none"),o.resetUsers(),e.hit21=!1,n.dealCards(),e.hit21||(a(),s(!0))},r.hitMe=function(){n.hitMe(r.player),a()},r.stay=function(){n.stay(),a()},r.addChip=function(e){return r.message="",r.stopBets?void(r.message='You can"t place any more bets now!'):r.player.money<r.player.bet+e?void(r.message='You don"t have the money to place that bet!'):(o.addChip(e),void a())},r.clearBet=function(){return r.message="",r.stopBets?void(r.player.bet>0&&(r.message='You can"t back out now!')):void o.clearBet()}}]),angular.module("mcnedward").service("blackjackService",["$rootScope","playerService",function(e,r){function t(e,r){var t,n;if(1==r||r>10){switch(r){case 1:t="Ace",r=11;break;case 11:t="Jack",r=10;break;case 12:t="Queen",r=10;break;case 13:t="King",r=10}n=e.substring(0,1).toLowerCase()+t.substring(0,1).toLowerCase()}else t=r,n=e.substring(0,1).toLowerCase()+r;var o=e+t;return{suit:e,name:t,value:r,id:o,isFaceDown:!1,src:"img/blackjack/card/"+n+".png"}}function n(){l=[];for(var e=0;e<s.length;e++)for(var r=1;r<14;r++){var n=t(s[e],r);l.push(n)}}function o(e,t){var n=l[0];t&&(n.isFaceDown=t),r.addCard(e,n),l.splice(l.indexOf(n),1)}function a(){n();for(var e,r=[],t=l.length;t;){e=Math.floor(Math.random()*l.length);var o=l[e];e in l&&(r.push(o),delete l[e],t--)}return l=r}var i={},s=["clubs","spades","diamonds","hearts"],l=[];return i.dealCards=function(){a();for(var e=0;e<4;e++)e%2===0?o(r.getPlayer()):3==e?o(r.getDealer(),!0):o(r.getDealer())},i.hitMe=function(e){o(e)},i.stay=function(){for(var t=r.getDealer(),n=0;n<t.cards;n++)t.cards[n].isFaceDown&&(t.cards[n].faceDown=!1);for(;t.handValue<17;)o(t);t.handValue>21?e.$broadcast("dealerBusted"):t.handValue>r.getPlayer().handValue?e.$broadcast("dealerWon"):t.handValue==r.getPlayer().handValue?e.$broadcast("push"):e.$broadcast("playerWon"),e.$broadcast("showCards")},i.flipCards=function(){for(var e=0;e<r.getDealer().cards.length;e++){var t=r.getDealer().cards[e];t.isFaceDown&&(t.isFaceDown=!1,r.getDealer().table.find($("#"+t.id)).attr("src",t.src))}},i}]),angular.module("mcnedward").service("playerService",["$rootScope",function(e){function r(e){l[e.type]=e,localStorage.users=JSON.stringify(l)}function t(e){for(var t=0;t<e.length;t++){var n=e[t];r(n)}}function n(){function e(e){e.cards=[],e.handValue=0}function r(){var e=JSON.parse(localStorage.users);return e.player.table=$(e.player.table.selector),e.dealer.table=$(e.dealer.table.selector),e}if(localStorage.users&&localStorage.users.length>2){var n=r(),a=n.player,i=n.dealer;e(a),e(i),t([a,i])}else l.player={table:$("#pTable"),cards:[],handValue:0,type:"player",money:1e3,bet:0,chips:o(),wins:0,loses:0},l.dealer={table:$("#dTable"),cards:[],handValue:0,type:"dealer",wins:0,loses:0},localStorage.users=JSON.stringify(l)}function o(){return{chip5s:0,chip10s:0,chip25s:0,chip100s:0,chip500s:0}}function a(r){for(var t=0;t<r.cards.length&&!("Ace"==r.cards[t].name&&(11==r.cards[t].value&&(r.cards[t].value=1,i(r)),r.handValue<21));t++);r.handValue>21&&e.$broadcast("busted",r)}function i(e){for(var t=0,n=0;n<e.cards.length;n++)t+=e.cards[n].value;e.handValue=t,r(e)}var s={},l={};return s.getPlayer=function(){return l.player},s.getDealer=function(){return l.dealer},s.resetUsers=function(){n()},s.updateUser=function(e){r(e)},s.updateUsers=function(e){t(e)},s.addCard=function(r,t){r.cards.push(t),r.handValue=r.handValue+t.value,r.handValue>21&&a(r),21==r.handValue&&(e.$broadcast("21",r),e.hit21=!0)},s.addChip=function(e){l.player.chips["chip"+e+"s"]++,l.player.bet=l.player.bet+e,r(l.player)},s.clearBet=function(){l.player.bet=0,l.player.chips=o()},s.userWon=function(e){var r=l.player,n=l.dealer;"player"==e?(r.wins=r.wins+1,n.loses=n.loses+1,r.money+=r.bet):(n.wins=n.wins+1,r.loses=r.loses+1,r.money-=r.bet),r.bet=0,r.chips=o(),t([r,n])},n(),s}]),angular.module("mcnedward").directive("playingCard",function(){return{scope:{card:"="},restrict:"AE",replace:"true",controller:function(e){e.$on("playerBusted",function(){e.card.isFaceDown&&$("#"+e.card.id).attr("src",e.card.src)}),e.$on("showCards",function(){$("#"+e.card.id).attr("src",e.card.src)})},link:function(e,r,t){e.card.isFaceDown?r.attr("src","img/blackjack/card/b2fv.png"):r.attr("src",e.card.src)},template:'<img id="{{card.id}}" class="card-img"/>'}}),angular.module("mcnedward").controller("ColorZonesCtrl",["$rootScope","$scope",function(e,r){$(document).ready(function(){r.renderer=new Renderer;var e=new TimeZoneService(r.renderer.width()),t=new ColorPicker,n=new ColorZonesViewModel(r.renderer,e,t);ko.options.useOnlyNativeEvents=!0,ko.applyBindings(n,$("#main")[0]);var o=new TooltipService([{id:$("#canvasContainer"),timeout:8},{id:$("#hoursControl"),timeout:3},{id:$("#minutesControl"),timeout:3},{id:$("#secondsControl"),timeout:3},{id:$("#opacityControl"),timeout:4},{id:$("#showTimesControl"),timeout:6},{id:$("#showColorsControl"),timeout:6}]);o.loadToolips()}),e.$on("stopRendering",function(){r.renderer.stopRendering(!0)})}]);var ColorZonesViewModel=function(e,r,t){function n(r){y=r,fetch("/api/color-zones/map?centerLat="+f.centerLat()+"&centerLng="+f.centerLng()+"&zoom="+f.zoom()+"&width="+p+"&height="+g).then(function(r){return r.ok?void r.text().then(function(r){e.loadImage(r),void 0!==y&&y()}):void console.error("Something went wrong trying to load the map image...")})}function o(e){return e<10&&(e="0"+e),e.toString()}function a(e,r,n,o){var a=t.colors()[e].interval;switch(a){case t.hours:return r;case t.minutes:return n;case t.seconds:return o;default:console.warn("Could not find an interval for: "+a+"...")}}function i(e,r,t,n){for(var o=0,a=e[e.length-1],i=0;i<e.length;i++){var s=e[i];if(a.y<=t&&s.y>=t||a.y>t&&s.y<t){var l=(s.x-a.x)/(s.y-a.y),c=l*(t-a.y)+a.x;c<r&&o++}a=s}return o%2===1}var s,l,c,u,d,f=this,p=e.width(),g=e.height(),h="#660d60",m="HH:mm:ss";f.colorPicker=ko.observable(t),f.opacity=ko.observable(80),f.showTimes=ko.observable(!1),f.colorAllZones=ko.observable(!0),f.width=ko.observable(p+"px"),f.height=ko.observable(g+"px"),f.zoom=ko.observable(1),f.centerLat=ko.observable(20),f.centerLng=ko.observable(0),f.timeZones=ko.observableArray(),f.timeZoneRegions=ko.observable({});var v=ko.pureComputed(function(){return f.colorAllZones()?"white":"black"});e.renderFunction(function(){if(0!==f.timeZones().length){for(var r=[],n=0;n<f.timeZones().length;n++){var i=f.timeZones()[n],p=moment().tz(i.name),g=o(p.hours()),y=o(p.minutes()),b=o(p.seconds()),w=a(t.red,g,y,b),C=a(t.green,g,y,b),S=a(t.blue,g,y,b),k="#"+w+C+S;if(f.colorAllZones()&&e.polygon(i.coords,k,f.opacity()),void 0!==i.centroidPolygon){var P={textX:i.centroidPolygon.centroid.x,textY:i.centroidPolygon.centroid.y,time:p.format(m),colorHex:k};r.push(P),s&&""!==s&&s===i.name&&(c=P)}}var M=f.timeZoneRegions()[s];if(M&&($.each(M,function(r,t){if(t&&t.coords&&0!==t.coords.length){var n=f.colorAllZones()?h:c.colorHex;e.polygon(t.coords,n,80)}}),f.showTimes()||e.text(u,d-5,c.time,v(),!0),e.text(u,d-25,l,v(),!0),e.text(u,d-45,c.colorHex,v(),!0)),f.showTimes())for(var x=0;x<r.length;x++)e.text(r[x].textX,r[x].textY,r[x].time,v())}});var y;n(),r.setup(f.centerLat,f.centerLng,f.zoom),r.loadTimeZones(function(e){console.error(e)},f.timeZones,f.timeZoneRegions),e.addMouseOverEvent(function(e,r){if(0!==f.timeZones().length)for(var t=0;t<f.timeZones().length;t++){var n=f.timeZones()[t],o=n.boundingBox;if(void 0===o)return;if(r>o.xyMax.y&&r<o.xyMin.y&&e>o.xyMin.x&&e<o.xyMax.x){var a=f.timeZoneRegions()[n.name];for(var c in a)if(a.hasOwnProperty(c)&&i(a[c].coords,e,r))return s=n.name,l=c,u=e,void(d=r)}}},f.centerLat(),f.centerLng()),e.addMouseScrollEvent(function(e){if(e>1?f.zoom(f.zoom()+1):f.zoom(f.zoom()-1),f.zoom()<1)return void f.zoom(1)})};angular.module("mcnedward").controller("ContactCtrl",["$scope",function(e){function r(){e.contactSuccessMessage="",e.contactErrorMessage=""}function t(t){r(),e.contactErrorMessage=t}e.contactInfo={},e.isFormSubmitted=!1,e.contactSuccessMessage="",e.contactErrorMessage="",e.submitContact=function(n,o){if(!e.isFormSubmitted&&(n.$setSubmitted(),!n.$invalid)){e.isFormSubmitted=!0,n.$setPristine(),n.$setUntouched(),r();var a="Sorry, but something went wrong with the reCaptcha. Please refresh the page and try again.";if(null===grecaptcha)return void t(a);var i=o.recaptchaResponse;if(null===i)return void t(a);e.contactSuccessMessage="Sending...";var s="/api/contact?secretResponse="+i;fetch(s,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(o)}).then(function(r){r.ok?r.text().then(function(r){e.contactSuccessMessage=r,e.$apply(),ga("send","event","Contact","Email","From: "+o.email+" - Subject: "+o.subject)}):r.text().then(function(r){t(r),e.isFormSubmitted=!1,e.$apply()})})}},e.checkLength=function(e){var r=e?e.length:0;return r||(r=0),r},e.emailMaxLength=100,e.subjectMaxLength=100,e.messageMaxLength=1e3,e.subjectLength=function(){return e.checkLength(e.contactInfo.subject)},e.messageLength=function(){return e.checkLength(e.contactInfo.message)}}]),angular.module("mcnedward").controller("IICtrl",["$scope","modalService",function(e,r){function t(r){e.showAppError=!1,e.appError=""}function n(r){e.showLibError=!1,e.libError=""}e.iiInfo={},e.isFormSubmitted=!1,e.openDownloadForApp=function(){t(),r.showModal("downloadAppModal")},e.openDownloadForLib=function(){n(),r.showModal("downloadLibModal")},e.downloadIIApp=function(r,n){if(!e.isAppFormSubmitted&&(r.$setSubmitted(),!r.$invalid)){e.isAppFormSubmitted=!0,r.$setPristine(),r.$setUntouched(),t();var o="/api/ii/app?secretResponse="+n.recaptchaResponse;window.location.href=o}},e.downloadIILib=function(r,t){if(!e.isLibFormSubmitted&&(r.$setSubmitted(),!r.$invalid)){e.isLibFormSubmitted=!0,r.$setPristine(),r.$setUntouched(),n();var o="/api/ii/lib?secretResponse="+t.recaptchaResponse;window.location.href=o}}}]),angular.module("mcnedward").controller("NumberPrinterCtrl",["$scope",function(e){function r(r){t();var n=e.number;return""===n?void(e.errorMessage="You need to enter something!"):fetch("/api/number-printer?number="+n).then(function(t){return t.ok?void t.json().then(r):void t.text().then(function(r){e.errorMessage=r,e.$apply()})}).catch(function(r){e.errorMessage=r,e.$apply()})}function t(){e.result="",e.errorMessage=""}e.result="",e.convertToEnglish=function(){r(function(r){e.result=r.englishWord,e.$apply()})},e.convertToRomanNumeral=function(){r(function(r){e.result=r.romanNumeral,e.$apply()})}}]),angular.module("mcnedward").directive("directory",["$rootScope",function(e){return{restrict:"AE",transclude:!0,scope:{name:"=",id:"=",directories:"=",classes:"="},link:function(r,t,n){r.selectClass=function(r,t){e.$broadcast("selectClass",{directoryId:r,classId:t})},r.isRealDirectory=null!==r.name&&""!==r.name,r.showContents=!1},templateUrl:"parser/directory.html"}}]),angular.module("mcnedward").directive("dragAndDrop",["$rootScope","$timeout",function(e,r){return{restrict:"E",link:function(e,t,n){function o(){}var a="Drag files here!";e.dragAreaMessage=a,e.dragoverClass="",e.uploadProgress=0,e.handleError=function(r,t){e.fileSelected=!1,e.hasError=!0,e.load(!1),e.dragoverClass="dragover-error",e.dragAreaMessage="",e.dragAreaError=r,console.log(t,r)};var i=!1;e.load=function(t){if(e.dragAreaError="",t)i=!0,e.uploadProgress=0,o();else{if(i=!1,e.hasError)return;e.dragAreaMessage="Finished!",e.dragoverClass="",e.uploadProgress=100,r(function(){e.dragAreaMessage=a,e.uploadProgress=0},3e3)}},t.bind("dragenter",function(r){r.stopPropagation(),r.preventDefault(),r.originalEvent.dataTransfer.dropEffect="copy",e.dragoverClass="dragover",e.dragAreaMessage="Drop files!",e.dragAreaError="",e.$apply()}),t.bind("dragleave",function(r){r.stopPropagation(),r.preventDefault(),e.dragoverClass="",e.dragAreaMessage="Drag files here!",e.dragAreaError="",e.$apply()}),t.bind("dragover",function(r){r.stopPropagation(),r.preventDefault(),r.originalEvent.dataTransfer.dropEffect="copy",e.dragoverClass="dragover",e.dragAreaMessage="Drop files!",e.dragAreaError="",e.$apply()}),t.bind("dragevent",function(e){e.stopPropagation(),e.preventDefault()}),t.bind("drop",function(r){function t(e,r,n){var o=e.createReader();return new Promise(function(e){var s=[];!function r(n,l){o.readEntries(function(o){o.length?(s.push(Promise.all(o.map(function(e){if(!e.isFile){var r=new ParserDirectory(e.name,[],[]);return n?n.directories.push(r):n=r,t(e,r,l)}e.file(function(e){u.uploadFiles.push(e);var r=new ParserFile(a++,e.name);return n.files.push(r),r},function(e){console.log(e)})}))),r(n,l)):Promise.all(s).then(function(r){e(l)},i)})}(r,n)})}function n(e){for(var r=[],n=0;n<e.length;n++)r.push(e[n].webkitGetAsEntry());return new Promise(function(e){var n=[];n.push(Promise.all(r.map(function(e){if(e.isFile)return new Promise(function(r){e.file(function(e){u.uploadFiles.push(e);var t=new ParserFile(a++,e.name);return u.files.push(t),r(u),t},i)});var r=new ParserDirectory(e.name,[],[]);return u?u.directories.push(r):u=r,t(e,r,u)}))),Promise.all(n).then(function(r){e(u)},i)}).then(function(e){o(e)},i)}function o(r){e.dragoverClass="dropped",e.dragAreaMessage="Ready for Upload!",e.$apply(),e.filesDropped(r)}r.stopPropagation(),r.preventDefault();var a=1,i=function(e){console.log(e)},s=r.originalEvent;if(s){var l=s.dataTransfer,c=l.items,u=new ParserDirectory;if(u.uploadFiles=[],1==c.length){var d=c[0].webkitGetAsEntry();d.isFile?n(c):(u.name=d.name,t(d,u,u).then(function(e){o(e)},i))}else n(c)}})},templateUrl:"parser/fileUpload.html"}}]),angular.module("mcnedward").controller("ParserCtrl",["$rootScope","$scope","$window","parserService","recaptchaService","modalService",function(e,r,t,n,o,a){function i(e,t){var n="",o=t&&t.data?t.data:null,a=o&&o.errors?o.errors:[];if(a.length>0)for(var i=0;i<a.length;i++)n+=a[i];else n=e;r.handleError(n,t),r.parsingComplete=!1}function s(e,t){r.secretResponse=e,r.token=t,n.uploadFiles(r.files,e,t).then(function(o){return o.ok?void o.json().then(function(o){r.uploadDirectory.token=o.token,r.uploadDirectory.fileIds=o.fileIds;try{n.parseFiles(r.uploadDirectory,e,t).then(function(e){e.ok?(r.dragAreaMessage="Analyzing your files...",r.$apply(),e.json().then(function(e){n.saveDirectory(e),r.load(!1),r.fileSelected=!1,r.isParsingComplete=!0,r.uploadDirectory={},r.directory=e;var t=u(e);r.classObject=t,d(t)})):e.text().then(function(e){i(e)})},function(e){i(f,e)})}catch(e){i(f,e)}}):void o.text().then(function(e){i(e)})})}function l(e,r,t){var n;if(r===e.id&&e.classes&&(n=c(e.classes,t)))return n;for(var o=0;o<e.directories.length;o++){var a=e.directories[o];if(n=l(a,r,t))return n}}function c(e,r){for(var t=0;t<e.length;t++){var n=e[t];if(n.id==r)return n}}function u(e){if(e.classes&&e.classes.length>0)return e.classes[0];if(e.directories)for(var r=0;r<e.directories.length;r++)if(p=u(e.directories[r]))return p;return null}function d(e){var r;if($("#classContent").empty(),e.codeTag)r=e.codeTag;else{r=$("<code/>",{id:"code",text:e.classContent});for(var t=r.length,n=0;n<t;n++){r[n].innerHTML='<span class="line-number"></span>'+r[n].innerHTML+'<span class="cl"></span>';for(var o=r[n].innerHTML.split(/\n/).length,a=0;a<o;a++){var i=r[n].getElementsByTagName("span")[0],s=a+1;i.innerHTML+='<span id="'+s+'">'+s+"</span>"}}e.codeTag=r}r.appendTo("#classContent")}/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&a.showModal("deviceModal"),r.uploadInfo={},r.isFormSubmitted=!1,r.isParsingComplete=!1,r.fileUploadMessage="Click to choose a Java file or project to parse!",r.errorMessage="",r.fileSelected=!1;var f="Something went wrong parsing files...Please try again.";if($("#file-upload").change(function(){var e=this.files;if(!e||0===e.length)return void console.log("No files selected...");var t=e[0].name;r.files=e,r.fileName=t,r.fileSelected=!0,r.$apply()}),r.uploadFile=function(e,t){r.isFormSubmitted||(e.$setSubmitted(),e.$invalid||(r.isFormSubmitted=!0,e.$setPristine(),e.$setUntouched(),r.load(!0),r.dragAreaMessage="Uploading your files...",o.verify(t.recaptchaResponse,s,i)))},r.selectClassObject=function(e){for(var t=0;t<r.classObjects.length;t++){var n=r.classObjects[t];n.fileName===e.fileName&&(r.classObject=n),r.fileNames[t].isSelected=!1}e.isSelected=!0,d(r.classObject)},r.filesDropped=function(e){r.fileName=e.name?e.name:e.uploadFiles.length+" Files",r.files=e.uploadFiles,r.fileSelected=!0,r.uploadDirectory=e,r.$apply()},r.moveToLine=function(e){var r=e.lineNumber,t=$("#"+r);t.addClass("line-animation-in"),setTimeout(function(){t.addClass("line-animation-out"),setTimeout(function(){t.removeClass("line-animation-in"),t.removeClass("line-animation-out")},1500)},3e3),$("#classContent").animate({scrollTop:t.offset().top-200},500)},e.$on("selectClass",function(e,t){var n=l(r.directory,t.directoryId,t.classId);n?(r.classObject=n,d(n)):r.errorMessage="Could not find class."}),r.directory=n.getDirectory(),r.directory){r.isParsingComplete=!0;var p=u(r.directory);p?(r.classObject=p,d(p)):r.errorMessage="Could not find any files in directory "+r.directory.name+"."}}]),angular.module("mcnedward").service("parserService",["$http",function(e){var r={};return r.uploadFiles=function(e,r,t){var n=new FormData;angular.forEach(e,function(e,r){n.append("files",e)});var o="/api/parser/files?secretResponse="+r+"&requestToken="+t;return fetch(o,{method:"POST",body:n})},r.parseFiles=function(e,r,t){e.uploadFiles=null;var n="/api/parser/parse?secretResponse="+r+"&requestToken="+t;return fetch(n,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)})},r.getUploadProgress=function(e,r,t){return fetch("/api/parser/progress?secretResponse="+e+"&requestToken="+r)},r.saveClasses=function(e){e?(localStorage.classObjects=JSON.stringify(e),r.classObjects=e):console.log("No classObjects to save...")},r.getClasses=function(){var e=localStorage.classObjects?JSON.parse(localStorage.classObjects):null;return e},r.saveDirectory=function(e){e?(localStorage.directory=JSON.stringify(e),r.directory=e):console.log("No directory to save...")},r.getDirectory=function(){var e=localStorage.directory?JSON.parse(localStorage.directory):null;return e},r}]),angular.module("mcnedward").directive("structure",["$rootScope",function(e){return{restrict:"E",transclude:!0,scope:{title:"@",contents:"="},controller:function(e,r,t){},link:function(e,r,t){},templateUrl:"parser/structure.html"}}]),angular.module("mcnedward").factory("modalService",["$timeout",function(e){function r(e){classie.remove(o,"md-show")}function t(){r()}var n,o,a,i={};return i.showModal=function(e){o=document.querySelector("#"+e),classie.add(o,"md-show"),n=document.querySelector("#overlay-"+e),n.removeEventListener("click",t),n.addEventListener("click",t),a=o.querySelector(".cancel-btn"),a.addEventListener("click",function(e){e.stopPropagation(),t()})},i.closeModal=function(){t()},i.isOpen=function(){return void 0!==o},i}]),angular.module("mcnedward").factory("recaptchaService",function(){var e={};return e.verify=function(e,r,t){return null===e?void t("Sorry, but something went wrong with the reCaptcha. Please refresh the page and try again."):void fetch("/api/recaptcha/verify?secretResponse="+e,{method:"POST"}).then(function(n){var o=n.ok;n.text().then(function(n){o?r(e,n):t(n)})})},e}),angular.module("mcnedward").factory("userService",[function(){var e={};return e.clearCache=function(){localStorage.removeItem("user"),this.savedUser=null},e.isLoggedIn=function(){return null!==this.getAuthToken()},e.isAdmin=function(){return this.savedUser||this.getUser(),!(!this.savedUser.userRoles||this.savedUser.userRoles.indexOf("ADMIN")==-1)},e.save=function(e){e&&""!==e.authToken?(localStorage.user=JSON.stringify(e),this.savedUser=e):console.log("No user to save.")},e.update=function(){this.save(this.getUser())},e.getUser=function(){return this.savedUser||(this.savedUser=localStorage.user?JSON.parse(localStorage.user):[]),this.savedUser},e.getAuthToken=function(){return this.savedUser||this.getUser(),this.savedUser.authToken&&""!==this.savedUser.authToken?this.savedUser.authToken:null},e}]),angular.module("mcnedward").directive("buttonoptions",[function(){return{scope:{confirmAction:"&",cancelAction:"&"},restrict:"AE",replace:"true",controller:function(e){e.confirm=function(){e.confirmAction()},e.cancel=function(){e.cancelAction()}},link:function(e,r,t){e.title=t.confirmTitle,e.cancelTitle=t.cancelTitle?t.cancelTitle:"X",t.confirmClass&&(e.confirmClass=t.confirmClass)},template:'<div class="btn-group"><button data-ng-click="confirm()" class="btn ebtn-green">{{title}}</button><button data-ng-click="cancel()" class="btn ebtn-red cancelBtn">{{cancelTitle}}</button></div>'}}]),app.directive("ngEnter",function(){return function(e,r,t){r.bind("keydown keypress",function(r){13===r.which&&(e.$apply(function(){e.$eval(t.ngEnter,{event:r})}),r.preventDefault())})}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImNvbG9yWm9uZXMvY29sb3JQaWNrZXIuanMiLCJjb2xvclpvbmVzL3JlbmRlcmVyLmpzIiwiY29sb3Jab25lcy90aW1lWm9uZVNlcnZpY2UuanMiLCJjb2xvclpvbmVzL3Rvb2x0aXBTZXJ2aWNlLmpzIiwicGFyc2VyL3BhcnNlckRpcmVjdG9yeS5qcyIsInBhcnNlci9wYXJzZXJGaWxlLmpzIiwiY29sb3Jab25lcy9tb2RlbHMvbGF0TG5nLmpzIiwiY29sb3Jab25lcy9tb2RlbHMvcG9seWdvbi5qcyIsImNvbG9yWm9uZXMvbW9kZWxzL3RpbWVab25lLmpzIiwiYXBwQ29udHJvbGxlci5qcyIsImJsYWNramFjay9ibGFja2phY2tDb250cm9sbGVyLmpzIiwiYmxhY2tqYWNrL2JsYWNramFja1NlcnZpY2UuanMiLCJibGFja2phY2svcGxheWVyU2VydmljZS5qcyIsImJsYWNramFjay9wbGF5aW5nQ2FyZERpcmVjdGl2ZS5qcyIsImNvbG9yWm9uZXMvY29sb3Jab25lc0NvbnRyb2xsZXIuanMiLCJjb2xvclpvbmVzL2NvbG9yWm9uZXNWaWV3TW9kZWwuanMiLCJjb3JlL2NvbnRhY3RDb250cm9sbGVyLmpzIiwiaWkvaWlDb250cm9sbGVyLmpzIiwibnVtYmVyUHJpbnRlci9udW1iZXJQcmludGVyQ29udHJvbGxlci5qcyIsInBhcnNlci9kaXJlY3RvcnlEaXJlY3RpdmUuanMiLCJwYXJzZXIvZmlsZVVwbG9hZERpcmVjdGl2ZS5qcyIsInBhcnNlci9wYXJzZXJDb250cm9sbGVyLmpzIiwicGFyc2VyL3BhcnNlclNlcnZpY2UuanMiLCJwYXJzZXIvc3RydWN0dXJlRGlyZWN0aXZlLmpzIiwic2VydmljZXMvbW9kYWxTZXJ2aWNlLmpzIiwic2VydmljZXMvcmVjYXB0Y2hhU2VydmljZS5qcyIsInNlcnZpY2VzL3VzZXJTZXJ2aWNlLmpzIiwidXRpbHMvYnV0dG9uT3B0aW9uc0RpcmVjdGl2ZS5qcyJdLCJuYW1lcyI6WyJDb2xvclBpY2tlciIsInNlbGYiLCJ0aGlzIiwiaG91cnMiLCJtaW51dGVzIiwic2Vjb25kcyIsInJlZCIsImdyZWVuIiwiYmx1ZSIsImNvbG9ycyIsImtvIiwib2JzZXJ2YWJsZSIsImNsYXNzIiwiaW50ZXJ2YWwiLCJob3Vyc0NvbG9yIiwibWludXRlc0NvbG9yIiwic2Vjb25kc0NvbG9yIiwidXBkYXRlIiwiaW50ZXJ2YWxOYW1lIiwiY29sb3IiLCJvcmlnaW5hbENvbG9yS2V5Iiwia2V5IiwiaGFzT3duUHJvcGVydHkiLCJvdmVycmlkZW4iLCJ0ZW1wIiwiUmVuZGVyZXIiLCJyZW5kZXIiLCJzdG9wUmVuZGVyaW5nIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiY2xlYXIiLCJkcmF3SW1hZ2VCYWNrZ3JvdW5kIiwicmVuZGVyRnVuY3Rpb24iLCJlIiwiaW1hZ2VCYWNrZ3JvdW5kIiwiY2VudGVyWCIsImNhbnZhcyIsIndpZHRoIiwiY2VudGVyWSIsImhlaWdodCIsImNvbnRleHQiLCJiZWdpblBhdGgiLCJkcmF3SW1hZ2UiLCJjbG9zZVBhdGgiLCJjbGVhclJlY3QiLCJjb252ZXJ0SGV4IiwiaGV4IiwiYWxwaGEiLCJyIiwicGFyc2VJbnQiLCJzbGljZSIsImciLCJiIiwiYSIsIiQiLCJnZXRDb250ZXh0IiwibWF0cml4IiwidHJhbnNmb3JtQXBwbGllZCIsImxvYWRJbWFnZSIsInVybCIsInVuZGVmaW5lZCIsIkltYWdlIiwib25sb2FkIiwidHJhbnNsYXRlIiwic3JjIiwiZWxsaXBzZSIsIngiLCJ5IiwiTWF0aCIsIlBJIiwiZmlsbFN0eWxlIiwiZmlsbCIsInBvbHlnb24iLCJwb2ludHMiLCJwb2x5Z29uUG9pbnRzIiwiZmlyc3RQb2ludCIsInNlcGFyYXRlUG9pbnRzIiwiaSIsImxlbmd0aCIsInBvaW50IiwibW92ZVRvIiwic3BsaWNlIiwibGluZVRvIiwidGV4dCIsImNlbnRlclRleHQiLCJmb250IiwibWV0cmljcyIsIm1lYXN1cmVUZXh0IiwiZmlsbFRleHQiLCJfbW91c2VPdmVyRXZlbnQiLCJfY2VudGVyTGF0IiwiX2NlbnRlckxuZyIsImFkZE1vdXNlT3ZlckV2ZW50IiwibW91c2VPdmVyRXZlbnQiLCJjZW50ZXJMYXQiLCJjZW50ZXJMbmciLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJyZWN0IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiY2xpZW50WCIsImxlZnQiLCJjbGllbnRZIiwidG9wIiwiX3Njcm9sbENhbGxiYWNrIiwiYWRkTW91c2VTY3JvbGxFdmVudCIsImNhbGxiYWNrIiwid2hlZWwiLCJ3aGVlbERlbHRhIiwiVGltZVpvbmVTZXJ2aWNlIiwibWFwV2lkdGgiLCJnZXRYWSIsImxhdCIsImxuZyIsIm1lcmNYIiwibWVyY1kiLCJ0b1JhZGlhbnMiLCJtZXJjVW5pdHMiLCJwb3ciLCJfem9vbSIsInRhbiIsImMiLCJsb2ciLCJkZWdyZWVzIiwiX3RpbWVab25lc09ic2VydmFibGUiLCJfdGltZVpvbmVSZWdpb25zT2JzZXJ2YWJsZSIsIl9lcnJvckNhbGxiYWNrIiwic2V0dXAiLCJ6b29tIiwibG9hZFRpbWVab25lcyIsImVycm9yQ2FsbGJhY2siLCJ0aW1lWm9uZXNPYnNlcnZhYmxlIiwidGltZVpvbmVSZWdpb25zT2JzZXJ2YWJsZSIsImxvYWRCb3VuZGluZ0JveGVzIiwiZmV0Y2giLCJ0aGVuIiwicmVzcG9uc2UiLCJvayIsImpzb24iLCJib3VuZGluZ0JveGVzIiwiSlNPTiIsInBhcnNlIiwiYm94IiwiaiIsIm1hdGNoZXNJZCIsIm5hbWUiLCJ4eU1pbiIsImJvdW5kaW5nQm94IiwieW1pbiIsInhtaW4iLCJ4eU1heCIsInltYXgiLCJ4bWF4IiwibG9hZFpvbmVQb2x5Z29ucyIsInRpbWVab25lIiwiem9uZU5hbWUiLCJyZXBsYWNlIiwiZGF0YSIsInBvbHlnb25zIiwicG9seWdvbkRhdGEiLCJjb29yZHMiLCJjb29yZCIsInh5IiwicHVzaCIsImNvbmNhdCIsIlBvbHlnb24iLCJjZW50cm9pZCIsImNlbnRyb2lkTmFtZSIsIm1heFBvaW50cyIsImVhY2giLCJpbmRleCIsInZhbHVlIiwiY2VudHJvaWRQb2x5Z29uIiwiZ2V0VGltZVpvbmUiLCJob3ZlclJlZ2lvbiIsInJlZ2lvbiIsInBvaW50UGFpciIsIlRpbWVab25lIiwiaG92ZXJSZWdpb25zIiwicmVsb2FkQ29vcmRpbmF0ZXMiLCJUb29sdGlwU2VydmljZSIsInRvb2x0aXBzIiwic2hvd1Rvb2x0aXAiLCJpZCIsInRvb2x0aXAiLCJzZXRUaW1lb3V0IiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsInN0b3JhZ2VLZXkiLCJ0aW1lb3V0IiwibG9hZFRvb2xpcHMiLCJ0b29sdGlwc1Nob3duIiwiZ2V0SXRlbSIsIlBhcnNlckRpcmVjdG9yeSIsImRpcmVjdG9yaWVzIiwiZmlsZXMiLCJQYXJzZXJGaWxlIiwiTGF0TG5nIiwicHVyZUNvbXB1dGVkIiwiaWRUb01hdGNoIiwiYXBwIiwiYW5ndWxhciIsIm1vZHVsZSIsImNvbmZpZyIsIiRzdGF0ZVByb3ZpZGVyIiwiJHVybFJvdXRlclByb3ZpZGVyIiwiJGh0dHBQcm92aWRlciIsIiRsb2NhdGlvblByb3ZpZGVyIiwic3RhdGUiLCJ0ZW1wbGF0ZVVybCIsImNvbnRyb2xsZXIiLCJ0aXRsZSIsIm90aGVyd2lzZSIsIndoZW4iLCIkc3RhdGUiLCIkbWF0Y2giLCJnbyIsImh0bWw1TW9kZSIsIiRyb290U2NvcGUiLCIkdGltZW91dCIsIiRsb2NhdGlvbiIsIiRhbmNob3JTY3JvbGwiLCJhZGp1c3RTY3JvbGwiLCJhbmltYXRlIiwic2Nyb2xsVG9wIiwib2Zmc2V0IiwiaW5Sb290IiwiYXBwVGl0bGUiLCIkb24iLCJ0b1N0YXRlIiwidG9QYXJhbXMiLCJmcm9tU3RhdGUiLCJmcm9tUGFyYW1zIiwiJGJyb2FkY2FzdCIsInVzZUNvbnRhaW5lckZsdWlkIiwidXNlQ29udGFpbmVyIiwiZ2EiLCJmYWRlT3V0IiwiJHNjb3BlIiwiJHdpbmRvdyIsImJsYWNramFja1NlcnZpY2UiLCJwbGF5ZXJTZXJ2aWNlIiwidXBkYXRlVXNlcnMiLCJzYXZlIiwicGxheWVyIiwiZ2V0UGxheWVyIiwiZGVhbGVyIiwiZ2V0RGVhbGVyIiwic2F2ZVVzZXJzIiwidG9nZ2xlT3B0aW9ucyIsIm9wdGlvbnNPbiIsInNob3ciLCJoaWRlIiwic3RvcEJldHMiLCJhcmdzIiwidXNlciIsInR5cGUiLCJtZXNzYWdlIiwidXNlcldvbiIsImZsaXBDYXJkcyIsImNhcmQiLCJhdHRyIiwiYWRkQ2xhc3MiLCJhcHBlbmQiLCJkZWFsQ2FyZHMiLCJjc3MiLCJyZXNldFVzZXJzIiwiaGl0MjEiLCJoaXRNZSIsInN0YXkiLCJhZGRDaGlwIiwiYW1vdW50IiwibW9uZXkiLCJiZXQiLCJjbGVhckJldCIsInNlcnZpY2UiLCJjcmVhdGVDYXJkIiwic3VpdCIsInNyY05hbWUiLCJzdWJzdHJpbmciLCJ0b0xvd2VyQ2FzZSIsImlzRmFjZURvd24iLCJjcmVhdGVDYXJkcyIsImNhcmRzIiwic3VpdHMiLCJkZWFsQ2FyZCIsImZhY2VEb3duIiwiYWRkQ2FyZCIsImluZGV4T2YiLCJzaHVmZmxlIiwiY2FyZHNDb3B5IiwiY2FyZHNDb3VudCIsImZsb29yIiwicmFuZG9tIiwiaGFuZFZhbHVlIiwidGFibGUiLCJmaW5kIiwidXBkYXRlVXNlciIsInVzZXJzIiwic3RyaW5naWZ5IiwiaW5pdFVzZXJzIiwiY2xlYXJIYW5kIiwiZ2V0U2F2ZWRVc2VycyIsInNhdmVkVXNlcnMiLCJzZWxlY3RvciIsImNoaXBzIiwiZ2V0Q2hpcHMiLCJ3aW5zIiwibG9zZXMiLCJjaGlwNXMiLCJjaGlwMTBzIiwiY2hpcDI1cyIsImNoaXAxMDBzIiwiY2hpcDUwMHMiLCJhZGp1c3RGb3JBY2VzIiwidXBkYXRlVXNlckhhbmRWYWx1ZSIsInVzZXJUeXBlIiwiZGlyZWN0aXZlIiwic2NvcGUiLCJyZXN0cmljdCIsImxpbmsiLCJlbGVtZW50IiwiYXR0cnMiLCJ0ZW1wbGF0ZSIsImRvY3VtZW50IiwicmVhZHkiLCJyZW5kZXJlciIsInRpbWVab25lU2VydmljZSIsImNvbG9yUGlja2VyIiwibW9kZWwiLCJDb2xvclpvbmVzVmlld01vZGVsIiwib3B0aW9ucyIsInVzZU9ubHlOYXRpdmVFdmVudHMiLCJhcHBseUJpbmRpbmdzIiwidG9vbHRpcFNlcnZpY2UiLCJsb2FkTWFwIiwibWFwQ2FsbGJhY2siLCJfbWFwQ2FsbGJhY2siLCJtYXBVcmwiLCJjb25zb2xlIiwiZXJyb3IiLCJhZGp1c3RUaW1lIiwidG9TdHJpbmciLCJnZXRDb2xvckludGVydmFsIiwid2FybiIsInJheUNhc3RUZXN0IiwicmF5VGVzdCIsImxhc3RQb2ludCIsInNsb3BlIiwidGVzdFBvaW50IiwiX2hvdmVyVGltZVpvbmVLZXkiLCJfaG92ZXJSZWdpb25LZXkiLCJfc2VsZWN0ZWRab25lSW5mbyIsIl9tb3VzZVgiLCJfbW91c2VZIiwiaG92ZXJab25lQ29sb3IiLCJ0aW1lRm9ybWF0Iiwib3BhY2l0eSIsInNob3dUaW1lcyIsImNvbG9yQWxsWm9uZXMiLCJ0aW1lWm9uZXMiLCJvYnNlcnZhYmxlQXJyYXkiLCJ0aW1lWm9uZVJlZ2lvbnMiLCJfdGV4dENvbG9yIiwidGltZVRleHRzIiwiY3VycmVudCIsIm1vbWVudCIsInR6Iiwiem9uZUluZm8iLCJ0ZXh0WCIsInRleHRZIiwidGltZSIsImZvcm1hdCIsImNvbG9ySGV4IiwiaG92ZXJUaW1lWm9uZSIsImhvdmVyQ29sb3IiLCJlcnJvck1lc3NhZ2UiLCJ6b25lIiwicmVnaW9ucyIsImNvbnRhY3RTdWNjZXNzTWVzc2FnZSIsImNvbnRhY3RFcnJvck1lc3NhZ2UiLCJzaG93RXJyb3IiLCJjb250YWN0SW5mbyIsImlzRm9ybVN1Ym1pdHRlZCIsInN1Ym1pdENvbnRhY3QiLCJmb3JtIiwiJHNldFN1Ym1pdHRlZCIsIiRpbnZhbGlkIiwiJHNldFByaXN0aW5lIiwiJHNldFVudG91Y2hlZCIsInJlQ2FwdGNoYUVycm9yIiwiZ3JlY2FwdGNoYSIsInNlY3JldFJlc3BvbnNlIiwicmVjYXB0Y2hhUmVzcG9uc2UiLCJtZXRob2QiLCJoZWFkZXJzIiwiQWNjZXB0IiwiQ29udGVudC1UeXBlIiwiYm9keSIsIiRhcHBseSIsImVtYWlsIiwic3ViamVjdCIsImNoZWNrTGVuZ3RoIiwiZW1haWxNYXhMZW5ndGgiLCJzdWJqZWN0TWF4TGVuZ3RoIiwibWVzc2FnZU1heExlbmd0aCIsInN1YmplY3RMZW5ndGgiLCJtZXNzYWdlTGVuZ3RoIiwibW9kYWxTZXJ2aWNlIiwiY2xlYXJBcHBFcnJvciIsInNob3dBcHBFcnJvciIsImFwcEVycm9yIiwiY2xlYXJMaWJFcnJvciIsInNob3dMaWJFcnJvciIsImxpYkVycm9yIiwiaWlJbmZvIiwib3BlbkRvd25sb2FkRm9yQXBwIiwic2hvd01vZGFsIiwib3BlbkRvd25sb2FkRm9yTGliIiwiZG93bmxvYWRJSUFwcCIsImlpQXBwSW5mbyIsImlzQXBwRm9ybVN1Ym1pdHRlZCIsImRvd25sb2FkVXJsIiwid2luZG93IiwibG9jYXRpb24iLCJocmVmIiwiZG93bmxvYWRJSUxpYiIsImlpTGliSW5mbyIsImlzTGliRm9ybVN1Ym1pdHRlZCIsImNvbnZlcnQiLCJjbGVhclRleHQiLCJudW1iZXIiLCJjYXRjaCIsInJlc3VsdCIsImNvbnZlcnRUb0VuZ2xpc2giLCJlbmdsaXNoV29yZCIsImNvbnZlcnRUb1JvbWFuTnVtZXJhbCIsInJvbWFuTnVtZXJhbCIsInRyYW5zY2x1ZGUiLCJjbGFzc2VzIiwic2VsZWN0Q2xhc3MiLCJkaXJlY3RvcnlJZCIsImNsYXNzSWQiLCJpc1JlYWxEaXJlY3RvcnkiLCJzaG93Q29udGVudHMiLCJjaGVja1Byb2dyZXNzIiwiZGVmYXVsdERyYWdBcmVhTWVzc2FnZSIsImRyYWdBcmVhTWVzc2FnZSIsImRyYWdvdmVyQ2xhc3MiLCJ1cGxvYWRQcm9ncmVzcyIsImhhbmRsZUVycm9yIiwiZmlsZVNlbGVjdGVkIiwiaGFzRXJyb3IiLCJsb2FkIiwiZHJhZ0FyZWFFcnJvciIsImxvYWRpbmciLCJpc0xvYWRpbmciLCJiaW5kIiwic3RvcFByb3BhZ2F0aW9uIiwicHJldmVudERlZmF1bHQiLCJvcmlnaW5hbEV2ZW50IiwiZGF0YVRyYW5zZmVyIiwiZHJvcEVmZmVjdCIsImhhbmRsZURpcmVjdG9yeSIsIml0ZW0iLCJkaXJlY3RvcnkiLCJ0b3BEaXJlY3RvcnkiLCJyZWFkZXIiLCJjcmVhdGVSZWFkZXIiLCJQcm9taXNlIiwicmVzb2x2ZSIsIml0ZXJhdGlvbkF0dGVtcHRzIiwicmVhZERpcmVjdG9yeSIsInJlYWRFbnRyaWVzIiwiZW50cmllcyIsImFsbCIsIm1hcCIsImVudHJ5IiwiaXNGaWxlIiwibmV3RGlyZWN0b3J5IiwiZmlsZSIsInBhcmVudERpcmVjdG9yeSIsInVwbG9hZEZpbGVzIiwibmV3RmlsZSIsImZpbGVJZCIsIm9uRXJyb3IiLCJoYW5kbGVGaWxlcyIsIml0ZW1zIiwid2Via2l0SXRlbXMiLCJ3ZWJraXRHZXRBc0VudHJ5Iiwibm90aWZ5RGlyZWN0b3J5RG9uZSIsImZpbGVzRHJvcHBlZCIsInBhcnNlclNlcnZpY2UiLCJyZWNhcHRjaGFTZXJ2aWNlIiwiZXJyb3JIYW5kbGVyIiwiZXJyb3JzIiwicGFyc2luZ0NvbXBsZXRlIiwidG9rZW4iLCJ1cGxvYWRSZXNwb25zZSIsInVwbG9hZERpcmVjdG9yeSIsImZpbGVJZHMiLCJwYXJzZUZpbGVzIiwiZGlyZWN0b3J5UmVzcG9uc2UiLCJzYXZlRGlyZWN0b3J5IiwiaXNQYXJzaW5nQ29tcGxldGUiLCJjbGFzc09iamVjdCIsImZpbmRGaXJzdEZpbGVJbkRpcmVjdG9yeSIsInN0eWxlTGluZU51bWJlcnMiLCJlcnJvclBhcnNpbmdNZXNzYWdlIiwic2VhcmNoRGlyZWN0b3J5Iiwic2VhcmNoQ2xhc3Nlc0luRGlyZWN0b3J5IiwiY2hpbGREaXJlY3RvcnkiLCJwcmUiLCJlbXB0eSIsImNvZGVUYWciLCJjbGFzc0NvbnRlbnQiLCJwcmVMZW5ndGgiLCJpbm5lckhUTUwiLCJudW0iLCJzcGxpdCIsImxpbmVOdW1iZXJFbGVtZW50IiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJhcHBlbmRUbyIsInRlc3QiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJ1cGxvYWRJbmZvIiwiZmlsZVVwbG9hZE1lc3NhZ2UiLCJjaGFuZ2UiLCJmaWxlTmFtZSIsInVwbG9hZEZpbGUiLCJ2ZXJpZnkiLCJzZWxlY3RDbGFzc09iamVjdCIsImNsYXNzT2JqZWN0cyIsImNPYmplY3QiLCJmaWxlTmFtZXMiLCJpc1NlbGVjdGVkIiwibW92ZVRvTGluZSIsImNvbnRlbnQiLCJsaW5lTnVtYmVyIiwicmVtb3ZlQ2xhc3MiLCJnZXREaXJlY3RvcnkiLCIkaHR0cCIsImZvcm1EYXRhIiwiRm9ybURhdGEiLCJmb3JFYWNoIiwiZ2V0VXBsb2FkUHJvZ3Jlc3MiLCJyZXNwb25zZUZ1bmN0aW9uIiwic2F2ZUNsYXNzZXMiLCJnZXRDbGFzc2VzIiwiY29udGVudHMiLCIkZWxlbWVudCIsImZhY3RvcnkiLCJyZW1vdmVNb2RhbCIsImhhc1BlcnNwZWN0aXZlIiwiY2xhc3NpZSIsInJlbW92ZSIsIm1vZGFsIiwicmVtb3ZlTW9kYWxIYW5kbGVyIiwib3ZlcmxheSIsImNsb3NlIiwibW9kYWxJZCIsInF1ZXJ5U2VsZWN0b3IiLCJhZGQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXYiLCJjbG9zZU1vZGFsIiwiaXNPcGVuIiwic3VjY2Vzc0NhbGxiYWNrIiwidXNlclNlcnZpY2UiLCJjbGVhckNhY2hlIiwicmVtb3ZlSXRlbSIsInNhdmVkVXNlciIsImlzTG9nZ2VkSW4iLCJnZXRBdXRoVG9rZW4iLCJpc0FkbWluIiwiZ2V0VXNlciIsInVzZXJSb2xlcyIsImF1dGhUb2tlbiIsImNvbmZpcm1BY3Rpb24iLCJjYW5jZWxBY3Rpb24iLCJjb25maXJtIiwiY2FuY2VsIiwiY29uZmlybVRpdGxlIiwiY2FuY2VsVGl0bGUiLCJjb25maXJtQ2xhc3MiLCJ3aGljaCIsIiRldmFsIiwibmdFbnRlciJdLCJtYXBwaW5ncyI6IkFBQUEsWUNFQSxTQUFBQSxlQUNBLEdBQUFDLEdBQUFDLElBRUFELEdBQUFFLE1BQUEsUUFDQUYsRUFBQUcsUUFBQSxVQUNBSCxFQUFBSSxRQUFBLFVBQ0FKLEVBQUFLLElBQUEsTUFDQUwsRUFBQU0sTUFBQSxRQUNBTixFQUFBTyxLQUFBLE9BQ0FQLEVBQUFRLE9BQUFDLEdB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LFNBQUEzZSxNQUFBQSxNQUVBQSxFQUFBMFciLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxudmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdtY25lZHdhcmQnLCBbJ3VpLnJvdXRlcicsICd1aS5ib290c3RyYXAnLCAnbmdBbmltYXRlJywgJ3ZjUmVjYXB0Y2hhJ10pLmNvbmZpZyhbJyRzdGF0ZVByb3ZpZGVyJywgJyR1cmxSb3V0ZXJQcm92aWRlcicsICckaHR0cFByb3ZpZGVyJywgJyRsb2NhdGlvblByb3ZpZGVyJywgZnVuY3Rpb24gKCRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIsICRodHRwUHJvdmlkZXIsICRsb2NhdGlvblByb3ZpZGVyKSB7XG5cdCd1c2Ugc3RyaWN0JztcblxuXHQkc3RhdGVQcm92aWRlci5zdGF0ZSgnYXBwJywge1xuXHRcdHVybDogJy8nLFxuXHRcdHRlbXBsYXRlVXJsOiAnY29yZS9ob21lLmh0bWwnLFxuXHRcdGNvbnRyb2xsZXI6ICdDb250YWN0Q3RybCcsXG5cdFx0dGl0bGU6ICdFZHdhcmQgTWNOZWFseSdcblx0fSkuc3RhdGUoJ2lpJywge1xuXHRcdHVybDogJy9pbmhlcml0YW5jZS1pbnF1aXJ5LycsXG5cdFx0dGVtcGxhdGVVcmw6ICdpaS9paS5odG1sJyxcblx0XHRjb250cm9sbGVyOiAnSUlDdHJsJyxcblx0XHR0aXRsZTogJ0luaGVyaXRhbmNlIElucXVpcnknXG5cdH0pLnN0YXRlKCdwYXJzZXInLCB7XG5cdFx0dXJsOiAnL3BhcnNlci8nLFxuXHRcdHRlbXBsYXRlVXJsOiAncGFyc2VyL3BhcnNlci5odG1sJyxcblx0XHRjb250cm9sbGVyOiAnUGFyc2VyQ3RybCcsXG5cdFx0dGl0bGU6ICdQYXJzZXInXG5cdH0pLnN0YXRlKCdjb2xvclpvbmVzJywge1xuXHRcdHVybDogJy9jb2xvci16b25lcy8nLFxuXHRcdHRlbXBsYXRlVXJsOiAnY29sb3Jab25lcy9jb2xvclpvbmVzLmh0bWwnLFxuXHRcdGNvbnRyb2xsZXI6ICdDb2xvclpvbmVzQ3RybCcsXG5cdFx0dGl0bGU6ICdDb2xvciBab25lcydcblx0fSkuc3RhdGUoJ2JyYW1ibGUnLCB7XG5cdFx0dXJsOiAnL2JyYW1ibGUvJyxcblx0XHR0ZW1wbGF0ZVVybDogJ2JyYW1ibGUvYnJhbWJsZS5odG1sJyxcblx0XHR0aXRsZTogJ0JyYW1ibGUnXG5cdH0pLnN0YXRlKCdrZWVwZml0Jywge1xuXHRcdHVybDogJy9rZWVwZml0LycsXG5cdFx0dGVtcGxhdGVVcmw6ICdrZWVwZml0L2tlZXBmaXQuaHRtbCcsXG5cdFx0dGl0bGU6ICdLZWVwRml0J1xuXHR9KS5zdGF0ZSgnYmxhY2tqYWNrJywge1xuXHRcdHVybDogJy9ibGFja2phY2svJyxcblx0XHR0ZW1wbGF0ZVVybDogJ2JsYWNramFjay9ibGFja2phY2suaHRtbCcsXG5cdFx0Y29udHJvbGxlcjogJ0JsYWNramFja0N0cmwnLFxuXHRcdHRpdGxlOiAnQmxhY2tqYWNrJ1xuXHR9KS5zdGF0ZSgnbnVtYmVyUHJpbnRlcicsIHtcblx0XHR1cmw6ICcvbnVtYmVycHJpbnRlci8nLFxuXHRcdHRlbXBsYXRlVXJsOiAnbnVtYmVyUHJpbnRlci9udW1iZXJQcmludGVyLmh0bWwnLFxuXHRcdGNvbnRyb2xsZXI6ICdOdW1iZXJQcmludGVyQ3RybCcsXG5cdFx0dGl0bGU6ICdOdW1iZXIgUHJpbnRlcidcblx0fSk7XG5cblx0JHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZSgnLycpO1xuXHQkdXJsUm91dGVyUHJvdmlkZXIud2hlbigvaWkvLCBbJyRzdGF0ZScsICckbWF0Y2gnLCBmdW5jdGlvbiAoJHN0YXRlLCAkbWF0Y2gpIHtcblx0XHQkc3RhdGUuZ28oJ2lpJyk7XG5cdH1dKTtcblxuXHQkbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUodHJ1ZSk7XG59XSk7IiwiJ3VzZSBzdHJpY3QnO1xuXG5mdW5jdGlvbiBDb2xvclBpY2tlcigpIHtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gIHNlbGYuaG91cnMgPSAnaG91cnMnO1xuICBzZWxmLm1pbnV0ZXMgPSAnbWludXRlcyc7XG4gIHNlbGYuc2Vjb25kcyA9ICdzZWNvbmRzJztcbiAgc2VsZi5yZWQgPSAncmVkJztcbiAgc2VsZi5ncmVlbiA9ICdncmVlbic7XG4gIHNlbGYuYmx1ZSA9ICdibHVlJztcbiAgc2VsZi5jb2xvcnMgPSBrby5vYnNlcnZhYmxlKHtcbiAgICByZWQ6IHtcbiAgICAgIGNsYXNzOiAnYnRuLWRhbmdlcicsXG4gICAgICBpbnRlcnZhbDogc2VsZi5ob3Vyc1xuICAgIH0sXG4gICAgZ3JlZW46IHtcbiAgICAgIGNsYXNzOiAnYnRuLXN1Y2Nlc3MnLFxuICAgICAgaW50ZXJ2YWw6IHNlbGYubWludXRlc1xuICAgIH0sXG4gICAgYmx1ZToge1xuICAgICAgY2xhc3M6ICdidG4tcHJpbWFyeScsXG4gICAgICBpbnRlcnZhbDogc2VsZi5zZWNvbmRzXG4gICAgfVxuICB9KTtcbiAgc2VsZi5ob3Vyc0NvbG9yID0ga28ub2JzZXJ2YWJsZShzZWxmLmNvbG9ycygpLnJlZC5jbGFzcyk7XG4gIHNlbGYubWludXRlc0NvbG9yID0ga28ub2JzZXJ2YWJsZShzZWxmLmNvbG9ycygpLmdyZWVuLmNsYXNzKTtcbiAgc2VsZi5zZWNvbmRzQ29sb3IgPSBrby5vYnNlcnZhYmxlKHNlbGYuY29sb3JzKCkuYmx1ZS5jbGFzcyk7XG5cbiAgc2VsZi51cGRhdGUgPSBmdW5jdGlvbiAoaW50ZXJ2YWxOYW1lLCBjb2xvcikge1xuICAgIC8vIFVwZGF0ZSB0aGUgc2VsZWN0ZWQgaW50ZXJ2YWwgb2JzZXJ2YWJsZSBwcm9wZXJ0eSAoc2VsZi5ob3Vycywgc2VsZi5taW51dGVzLCBzZWxmLnNlY29uZHMpIGFuZCBjb2xvclxuICAgIHNlbGZbaW50ZXJ2YWxOYW1lICsgJ0NvbG9yJ10oc2VsZi5jb2xvcnMoKVtjb2xvcl0uY2xhc3MpO1xuXG4gICAgLy8gR2V0IHRoZSBvcmlnaW5hbCBpbnRlcnZhbCdzIGNvbG9yIGtleVxuICAgIHZhciBvcmlnaW5hbENvbG9yS2V5O1xuICAgIGZvciAodmFyIGtleSBpbiBzZWxmLmNvbG9ycygpKSB7XG4gICAgICBpZiAoIXNlbGYuY29sb3JzKCkuaGFzT3duUHJvcGVydHkoa2V5KSkgY29udGludWU7XG5cbiAgICAgIGlmIChzZWxmLmNvbG9ycygpW2tleV0uaW50ZXJ2YWwgPT09IGludGVydmFsTmFtZSkge1xuICAgICAgICBvcmlnaW5hbENvbG9yS2V5ID0ga2V5O1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgb3ZlcnJpZGVuID0gc2VsZi5jb2xvcnMoKVtjb2xvcl07XG4gICAgc2VsZltvdmVycmlkZW4uaW50ZXJ2YWwgKyAnQ29sb3InXShzZWxmLmNvbG9ycygpW29yaWdpbmFsQ29sb3JLZXldLmNsYXNzKTtcblxuICAgIHZhciB0ZW1wID0gc2VsZi5jb2xvcnMoKVtjb2xvcl0uaW50ZXJ2YWw7XG4gICAgc2VsZi5jb2xvcnMoKVtjb2xvcl0uaW50ZXJ2YWwgPSBpbnRlcnZhbE5hbWU7XG4gICAgc2VsZi5jb2xvcnMoKVtvcmlnaW5hbENvbG9yS2V5XS5pbnRlcnZhbCA9IHRlbXA7XG4gIH07XG59IiwiJ3VzZSBzdHJpY3QnO1xuXG5mdW5jdGlvbiBSZW5kZXJlcigpIHtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gIHZhciB3aWR0aCA9IDEyMDAsXG4gICAgICBoZWlnaHQgPSA3MDA7XG4gIHZhciBjYW52YXMgPSAkKCcjdGhlQ2FudmFzJylbMF07XG4gIHZhciBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG4gIHZhciBpbWFnZUJhY2tncm91bmQ7XG4gIHZhciBtYXRyaXggPSBbMSwgMCwgMCwgMSwgMCwgMF07XG4gIHZhciB0cmFuc2Zvcm1BcHBsaWVkID0gZmFsc2U7XG5cbiAgLy8gVE9ETyBNYWtlIGNvbG9yIGEgcHJvcGVydHkgaGVyZSAob2JzZXJ2YWJsZT8pXG4gIC8vIFRoZW4gSSBjYW4ganVzdCBzZXQgdGhlIGNvbG9yIGJlZm9yZSBjYWxsaW5nIGEgZHJhd2luZyBmdW5jdGlvblxuXG4gIHNlbGYucmVuZGVyRnVuY3Rpb24gPSBrby5vYnNlcnZhYmxlKCk7XG4gIHNlbGYuc3RvcFJlbmRlcmluZyA9IGtvLm9ic2VydmFibGUoZmFsc2UpO1xuXG4gIGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICBpZiAoc2VsZi5zdG9wUmVuZGVyaW5nKCkpIHJldHVybjtcbiAgICB0cnkge1xuICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHJlbmRlcik7XG5cbiAgICAgIC8vIENsZWFyIHRoZSBjYW52YXMgZWFjaCBmcmFtZVxuICAgICAgY2xlYXIoKTtcbiAgICAgIGRyYXdJbWFnZUJhY2tncm91bmQoKTtcblxuICAgICAgaWYgKHNlbGYucmVuZGVyRnVuY3Rpb24oKSkgc2VsZi5yZW5kZXJGdW5jdGlvbigpKCk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgLy8gU3dhbGxvd2luZyBleGVwdGlvbnMgdGlsbCBJIGZpZ3VyZSBhIGJldHRlciB3YXkgdG8gcmVwb3J0IHRoZW1cbiAgICB9XG4gIH1cbiAgcmVuZGVyKCk7XG5cbiAgLy8gTG9hZHMgYSB1cmwgaW50byBhbiBpbWFnZSB0aGVuIGRyYXdzIHRoYXQgaW1hZ2UgdG8gdGhlIGNhbnZhc1xuICBzZWxmLmxvYWRJbWFnZSA9IGZ1bmN0aW9uICh1cmwpIHtcbiAgICBpZiAoaW1hZ2VCYWNrZ3JvdW5kID09PSB1bmRlZmluZWQpIGltYWdlQmFja2dyb3VuZCA9IG5ldyBJbWFnZSgpO1xuICAgIGltYWdlQmFja2dyb3VuZC5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAvLyBOb3JtYWxseSwgMCwwIHdvdWxkIGJlIHRoZSB0b3AgbGVmdCBvZiB0aGUgY2FudmFzLlxuICAgICAgLy8gSSBuZWVkIHRvIHRyYW5zbGF0ZSB0aGUgY2FudmFzIGFuZCB0aGUgbWFwIGltYWdlIHNvIHRoYXQgdGhlIGNlbnRlciBvZiB0aGUgY2FudmFzIGlzIDAsMFxuICAgICAgdmFyIGNlbnRlclggPSBjYW52YXMud2lkdGggLyAyO1xuICAgICAgdmFyIGNlbnRlclkgPSBjYW52YXMuaGVpZ2h0IC8gMjtcbiAgICAgIGlmICghdHJhbnNmb3JtQXBwbGllZCkge1xuICAgICAgICAvLyBTYXZlIHRoZSB0cmFuc2xhdGUgaW4gdGhlIG1hdHJpeFxuICAgICAgICBtYXRyaXhbNF0gKz0gbWF0cml4WzBdICogY2VudGVyWCArIG1hdHJpeFsyXSAqIGNlbnRlclk7XG4gICAgICAgIG1hdHJpeFs1XSArPSBtYXRyaXhbMV0gKiBjZW50ZXJYICsgbWF0cml4WzNdICogY2VudGVyWTtcbiAgICAgICAgY29udGV4dC50cmFuc2xhdGUoY2VudGVyWCwgY2VudGVyWSk7XG4gICAgICAgIHRyYW5zZm9ybUFwcGxpZWQgPSB0cnVlO1xuICAgICAgfVxuICAgICAgY29udGV4dC5kcmF3SW1hZ2UoaW1hZ2VCYWNrZ3JvdW5kLCBjZW50ZXJYICogLTEsIGNlbnRlclkgKiAtMSwgd2lkdGgsIGhlaWdodCk7XG4gICAgfTtcbiAgICBpbWFnZUJhY2tncm91bmQuc3JjID0gdXJsO1xuICB9O1xuXG4gIGZ1bmN0aW9uIGRyYXdJbWFnZUJhY2tncm91bmQoKSB7XG4gICAgaWYgKCFpbWFnZUJhY2tncm91bmQpIHJldHVybjtcbiAgICB2YXIgY2VudGVyWCA9IGNhbnZhcy53aWR0aCAvIDI7XG4gICAgdmFyIGNlbnRlclkgPSBjYW52YXMuaGVpZ2h0IC8gMjtcbiAgICBjb250ZXh0LmJlZ2luUGF0aCgpO1xuICAgIGNvbnRleHQuZHJhd0ltYWdlKGltYWdlQmFja2dyb3VuZCwgY2VudGVyWCAqIC0xLCBjZW50ZXJZICogLTEsIHdpZHRoLCBoZWlnaHQpO1xuICAgIGNvbnRleHQuY2xvc2VQYXRoKCk7XG4gIH1cblxuICBzZWxmLmVsbGlwc2UgPSBmdW5jdGlvbiAoeCwgeSwgd2lkdGgsIGhlaWdodCwgY29sb3IpIHtcbiAgICBjb2xvciA9IGNvbnZlcnRIZXgoY29sb3IsIDEwMCk7XG4gICAgY29udGV4dC5iZWdpblBhdGgoKTtcbiAgICAvLyBFbGxpcHNlOiB2b2lkIGNvbnRleHQuZWxsaXBzZSh4LCB5LCByYWRpdXNYLCByYWRpdXNZLCByb3RhdGlvbiwgc3RhcnRBbmdsZSwgZW5kQW5nbGUsIGFudGljbG9ja3dpc2UpO1xuICAgIGNvbnRleHQuZWxsaXBzZSh4LCB5LCB3aWR0aCAvIDIsIGhlaWdodCAvIDIsIDAsIDIgKiBNYXRoLlBJLCBmYWxzZSk7XG4gICAgY29udGV4dC5maWxsU3R5bGUgPSBjb2xvcjtcbiAgICBjb250ZXh0LmZpbGwoKTtcbiAgfTtcblxuICBzZWxmLnBvbHlnb24gPSBmdW5jdGlvbiAocG9pbnRzLCBjb2xvciwgYWxwaGEpIHtcbiAgICB2YXIgcG9seWdvblBvaW50cyA9IHBvaW50cy5zbGljZSgwKTsgLy8gTmVlZCBhIGNvcHkgb2YgdGhlIHBvaW50cyBoZXJlXG4gICAgY29udGV4dC5iZWdpblBhdGgoKTtcbiAgICBjb2xvciA9IGNvbnZlcnRIZXgoY29sb3IsIGFscGhhKTtcbiAgICBjb250ZXh0LmZpbGxTdHlsZSA9IGNvbG9yO1xuXG4gICAgdmFyIGZpcnN0UG9pbnQgPSBwb2x5Z29uUG9pbnRzWzBdO1xuICAgIHZhciBzZXBhcmF0ZVBvaW50cyA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcG9seWdvblBvaW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHBvaW50ID0gcG9seWdvblBvaW50c1tpXTtcbiAgICAgIGlmIChpID09PSAwKSB7XG4gICAgICAgIGNvbnRleHQubW92ZVRvKHBvaW50LngsIHBvaW50LnkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHBvaW50LnggPT09IGZpcnN0UG9pbnQueCAmJiBwb2ludC55ID09PSBmaXJzdFBvaW50LnkgJiYgaSA8IHBvbHlnb25Qb2ludHMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgIC8vIE5lZWQgdG8gY3JlYXRlIGEgc2VwYXJhdGUgcG9seWdvbiBmb3IgdGhlc2UgcG9pbnRzXG4gICAgICAgICAgc2VwYXJhdGVQb2ludHMgPSBwb2x5Z29uUG9pbnRzLnNwbGljZShpICsgMSwgcG9seWdvblBvaW50cy5sZW5ndGggLSBpKTtcbiAgICAgICAgfVxuICAgICAgICBjb250ZXh0LmxpbmVUbyhwb2ludC54LCBwb2ludC55KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb250ZXh0LmZpbGwoKTtcbiAgICBjb250ZXh0LmNsb3NlUGF0aCgpO1xuXG4gICAgaWYgKHNlcGFyYXRlUG9pbnRzLmxlbmd0aCA+IDApIHNlbGYucG9seWdvbihzZXBhcmF0ZVBvaW50cywgY29sb3IpO1xuICB9O1xuXG4gIHNlbGYudGV4dCA9IGZ1bmN0aW9uICh4LCB5LCB0ZXh0LCBjb2xvciwgY2VudGVyVGV4dCkge1xuICAgIGNvbnRleHQuZm9udCA9ICdib2xkIDE2cHggU2Vnb2UgVUknO1xuICAgIGNvbnRleHQuZmlsbFN0eWxlID0gY29sb3I7XG4gICAgaWYgKGNlbnRlclRleHQpIHtcbiAgICAgIHZhciBtZXRyaWNzID0gY29udGV4dC5tZWFzdXJlVGV4dCh0ZXh0KTtcbiAgICAgIHggLT0gbWV0cmljcy53aWR0aCAvIDI7XG4gICAgfVxuICAgIGNvbnRleHQuZmlsbFRleHQodGV4dCwgeCwgeSk7XG4gIH07XG5cbiAgZnVuY3Rpb24gY2xlYXIoKSB7XG4gICAgY29udGV4dC5jbGVhclJlY3QoMCAtIGNhbnZhcy53aWR0aCAvIDIsIDAgLSBjYW52YXMuaGVpZ2h0IC8gMiwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcbiAgfVxuXG4gIHNlbGYud2lkdGggPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHdpZHRoO1xuICB9O1xuXG4gIHNlbGYuaGVpZ2h0ID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBoZWlnaHQ7XG4gIH07XG5cbiAgdmFyIF9tb3VzZU92ZXJFdmVudCwgX2NlbnRlckxhdCwgX2NlbnRlckxuZztcbiAgc2VsZi5hZGRNb3VzZU92ZXJFdmVudCA9IGZ1bmN0aW9uIChtb3VzZU92ZXJFdmVudCwgY2VudGVyTGF0LCBjZW50ZXJMbmcpIHtcbiAgICBfbW91c2VPdmVyRXZlbnQgPSBtb3VzZU92ZXJFdmVudDtcbiAgICBfY2VudGVyTGF0ID0gY2VudGVyTGF0O1xuICAgIF9jZW50ZXJMbmcgPSBjZW50ZXJMbmc7XG4gICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgdmFyIHJlY3QgPSBjYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cbiAgICAgIC8vIFRoZSBjYW52YXMgdXNlcyB0aGUgY2VudGVyIGFzIGl0cyAoMCwgMCkgcG9pbnRcbiAgICAgIHZhciBjZW50ZXJYID0gY2FudmFzLndpZHRoIC8gMjtcbiAgICAgIHZhciBjZW50ZXJZID0gY2FudmFzLmhlaWdodCAvIDI7XG5cbiAgICAgIHZhciB4ID0gZXZlbnQuY2xpZW50WCAtIHJlY3QubGVmdCAtIGNlbnRlclg7XG4gICAgICB2YXIgeSA9IGV2ZW50LmNsaWVudFkgLSByZWN0LnRvcCAtIGNlbnRlclk7XG4gICAgICBfbW91c2VPdmVyRXZlbnQoeCwgeSk7XG4gICAgfSwgZmFsc2UpO1xuICB9O1xuXG4gIHZhciBfc2Nyb2xsQ2FsbGJhY2s7XG4gIHNlbGYuYWRkTW91c2VTY3JvbGxFdmVudCA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgIF9zY3JvbGxDYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXdoZWVsJywgZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIHdoZWVsID0gZXZlbnQud2hlZWxEZWx0YSAvIDEyMDtcbiAgICAgIF9zY3JvbGxDYWxsYmFjaygxICsgd2hlZWwgLyAyKTtcbiAgICB9LCBmYWxzZSk7XG4gIH07XG5cbiAgZnVuY3Rpb24gY29udmVydEhleChoZXgsIGFscGhhKSB7XG4gICAgdmFyIHIgPSBwYXJzZUludChoZXguc2xpY2UoMSwgMyksIDE2KTtcbiAgICB2YXIgZyA9IHBhcnNlSW50KGhleC5zbGljZSgzLCA1KSwgMTYpO1xuICAgIHZhciBiID0gcGFyc2VJbnQoaGV4LnNsaWNlKDUsIDcpLCAxNik7XG4gICAgdmFyIGEgPSBwYXJzZUludChhbHBoYSwgMTYpIC8gMjU1O1xuICAgIHJldHVybiAncmdiYSgnICsgciArICcsICcgKyBnICsgJywgJyArIGIgKyAnLCAnICsgYSArICcpJztcbiAgfVxufSIsIid1c2Ugc3RyaWN0JztcblxuZnVuY3Rpb24gVGltZVpvbmVTZXJ2aWNlKG1hcFdpZHRoKSB7XG4gIHZhciBzZWxmID0gdGhpcztcblxuICB2YXIgbWVyY1VuaXRzID0gbWFwV2lkdGggLyA0O1xuXG4gIC8vIFRoaXMgaXMgYW4gb2JzZXJ2YWJsZSB0aGF0IHRoZSBjYWxsZXIgcGFzc2VzIGluXG4gIC8vIEl0IHdpbGwgYmUgdXBkYXRlZCBhcyB0aGUgc2VydmljZSBmaW5pc2hlcyBlYWNoIG9mIGl0J3MgcmVxdWVzdHNcbiAgdmFyIF90aW1lWm9uZXNPYnNlcnZhYmxlO1xuICB2YXIgX3RpbWVab25lUmVnaW9uc09ic2VydmFibGU7XG4gIHZhciBfY2VudGVyTGF0O1xuICB2YXIgX2NlbnRlckxuZztcbiAgdmFyIF96b29tO1xuICB2YXIgX2Vycm9yQ2FsbGJhY2s7XG5cbiAgLy8gVGhlc2UgbmVlZCB0byBiZSBvYnNlcnZhYmxlcyBmcm9tIENvbG9yWm9uZXNcbiAgc2VsZi5zZXR1cCA9IGZ1bmN0aW9uIChjZW50ZXJMYXQsIGNlbnRlckxuZywgem9vbSkge1xuICAgIF9jZW50ZXJMYXQgPSBjZW50ZXJMYXQ7XG4gICAgX2NlbnRlckxuZyA9IGNlbnRlckxuZztcbiAgICBfem9vbSA9IHpvb207XG4gIH07XG5cbiAgc2VsZi5sb2FkVGltZVpvbmVzID0gZnVuY3Rpb24gKGVycm9yQ2FsbGJhY2ssIHRpbWVab25lc09ic2VydmFibGUsIHRpbWVab25lUmVnaW9uc09ic2VydmFibGUpIHtcbiAgICBfZXJyb3JDYWxsYmFjayA9IGVycm9yQ2FsbGJhY2s7XG4gICAgaWYgKF9jZW50ZXJMYXQgPT09IHVuZGVmaW5lZCB8fCBfY2VudGVyTG5nID09PSB1bmRlZmluZWQgfHwgX3pvb20gPT09IHVuZGVmaW5lZCkge1xuICAgICAgX2Vycm9yQ2FsbGJhY2soJ1lvdSBuZWVkIHRvIGNhbGwgVGltZVpvbmVTZXJ2aWNlLnNldENlbnRlckNvb3JkaW5hdGVzKGNlbnRlckxhdCwgY2VudGVyTG5nLCB6b29tKSBmaXJzdCEnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgX3RpbWVab25lc09ic2VydmFibGUgPSB0aW1lWm9uZXNPYnNlcnZhYmxlO1xuICAgIF90aW1lWm9uZVJlZ2lvbnNPYnNlcnZhYmxlID0gdGltZVpvbmVSZWdpb25zT2JzZXJ2YWJsZTtcblxuICAgIC8vIExvYWQgdGhlIHRpbWUgem9uZSByZWdpb25zXG4gICAgZmV0Y2goJy9hcGkvY29sb3Item9uZXMvaG92ZXItcmVnaW9ucycpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIF9lcnJvckNhbGxiYWNrKCdTb21ldGhpbmcgd2VudCB3cm9uZyB0cnlpbmcgdG8gbG9hZCB0aGUgdGltZSB6b25lIHJlZ2lvbnMuLi4nKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgcmVzcG9uc2UuanNvbigpLnRoZW4oZnVuY3Rpb24gKGpzb24pIHtcbiAgICAgICAgdmFyIGhvdmVyUmVnaW9ucyA9IEpTT04ucGFyc2UoanNvbik7XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0VGltZVpvbmUoaG92ZXJSZWdpb24pIHtcbiAgICAgICAgICAvLyBFYWNoIGhvdmVyIHJlZ2lvbiBjb250YWlucyBhIGhvdmVyIHJlZ2lvbiBhcnJheSBvZiBwb2ludHNcbiAgICAgICAgICB2YXIgY29vcmRzID0gW107XG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBob3ZlclJlZ2lvbi5ob3ZlclJlZ2lvbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgLy8gRXZlcnkgdHdvIHBvaW50cyBpbiB0aGUgaG92ZXIgcmVnaW9uIGFyZSB0aGUgbGF0IGFuZCBsbmdcbiAgICAgICAgICAgIHZhciByZWdpb24gPSBob3ZlclJlZ2lvbi5ob3ZlclJlZ2lvbltpXTtcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgcmVnaW9uLnBvaW50cy5sZW5ndGg7IGogKz0gMikge1xuICAgICAgICAgICAgICB2YXIgcG9pbnRQYWlyID0gcmVnaW9uLnBvaW50cy5zbGljZShqLCBqICsgMik7XG4gICAgICAgICAgICAgIHZhciB4eSA9IGdldFhZKHBvaW50UGFpclswXSwgcG9pbnRQYWlyWzFdKTtcbiAgICAgICAgICAgICAgY29vcmRzLnB1c2goeHkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gbmV3IFRpbWVab25lKGhvdmVyUmVnaW9uLm5hbWUsIGNvb3Jkcyk7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGhvdmVyUmVnaW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHZhciB0aW1lWm9uZSA9IGdldFRpbWVab25lKGhvdmVyUmVnaW9uc1tpXSk7XG4gICAgICAgICAgbG9hZFpvbmVQb2x5Z29ucyh0aW1lWm9uZSk7XG4gICAgICAgICAgX3RpbWVab25lc09ic2VydmFibGUoKS5wdXNoKHRpbWVab25lKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEFsbCB0aW1lIHpvbmVzIGFyZSBsb2FkZWQsIHNvIHdlIGNhbiBub3cgbG9hZCB0aGUgYm91bmRpbmcgYm94ZXNcbiAgICAgICAgbG9hZEJvdW5kaW5nQm94ZXMoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgc2VsZi5yZWxvYWRDb29yZGluYXRlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgX3RpbWVab25lc09ic2VydmFibGUoKS5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgY29vcmRzID0gX3RpbWVab25lc09ic2VydmFibGUoKVtpXS5jb29yZHM7XG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgY29vcmRzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgY29vcmRzW2pdID0gZ2V0WFkoY29vcmRzW2pdLngsIGNvb3Jkc1tqXS55KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBMb2FkIHRoZSBib3VuZGluZyBib3hlc1xuICAgIGZ1bmN0aW9uIGxvYWRCb3VuZGluZ0JveGVzKCkge1xuICAgICAgZmV0Y2goJy9hcGkvY29sb3Item9uZXMvbWFwLWJvdW5kcycpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAvLyBUT0RPIEhhbmRsZSBlcnJvciBoZXJlXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHJlc3BvbnNlLmpzb24oKS50aGVuKGZ1bmN0aW9uIChqc29uKSB7XG4gICAgICAgICAgdmFyIGJvdW5kaW5nQm94ZXMgPSBKU09OLnBhcnNlKGpzb24pO1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYm91bmRpbmdCb3hlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIGJveCA9IGJvdW5kaW5nQm94ZXNbaV07XG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IF90aW1lWm9uZXNPYnNlcnZhYmxlKCkubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgaWYgKF90aW1lWm9uZXNPYnNlcnZhYmxlKClbal0ubWF0Y2hlc0lkKGJveC5uYW1lKSkge1xuICAgICAgICAgICAgICAgIHZhciB4eU1pbiA9IGdldFhZKGJveC5ib3VuZGluZ0JveC55bWluLCBib3guYm91bmRpbmdCb3gueG1pbik7XG4gICAgICAgICAgICAgICAgdmFyIHh5TWF4ID0gZ2V0WFkoYm94LmJvdW5kaW5nQm94LnltYXgsIGJveC5ib3VuZGluZ0JveC54bWF4KTtcbiAgICAgICAgICAgICAgICBfdGltZVpvbmVzT2JzZXJ2YWJsZSgpW2pdLmJvdW5kaW5nQm94ID0ge1xuICAgICAgICAgICAgICAgICAgeHlNaW46IHh5TWluLFxuICAgICAgICAgICAgICAgICAgeHlNYXg6IHh5TWF4XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBMb2FkIHRoZSBwb2x5Z29ucyBmb3IgYSB0aW1lIHpvbmVcbiAgICBmdW5jdGlvbiBsb2FkWm9uZVBvbHlnb25zKHRpbWVab25lKSB7XG4gICAgICB2YXIgem9uZU5hbWUgPSB0aW1lWm9uZS5uYW1lLnJlcGxhY2UoL1xcL3xfL2csICctJyk7XG4gICAgICBmZXRjaCgnL2FwaS9jb2xvci16b25lcy9wb2x5Z29ucy8nICsgem9uZU5hbWUpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICBfZXJyb3JDYWxsYmFjaygnU29tZXRoaW5nIHdlbnQgd3JvbmcgdHJ5aW5nIHRvIGxvYWQgdGhlIHRpbWUgem9uZSBwb2x5Z29ucyBmb3IgJyArIHpvbmVOYW1lICsgJy4uLicpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICByZXNwb25zZS5qc29uKCkudGhlbihmdW5jdGlvbiAoanNvbikge1xuICAgICAgICAgIHZhciBkYXRhID0gSlNPTi5wYXJzZShqc29uKTtcbiAgICAgICAgICB2YXIgcG9seWdvbnMgPSB7fTtcblxuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGF0YS5wb2x5Z29ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgLy8gTG9vcCB0aHJvdWdoIGFsbCB0aGUgcG9pbnRzIGluIHRoZSBwb2x5Z29uXG4gICAgICAgICAgICAvLyBFdmVyeSAyIHBvaW50cyBhcmUgYSBsYXQgJiBsbmcgcGFpclxuICAgICAgICAgICAgdmFyIHBvbHlnb25EYXRhID0gZGF0YS5wb2x5Z29uc1tpXTtcbiAgICAgICAgICAgIHZhciBjb29yZHMgPSBbXTtcblxuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBwb2x5Z29uRGF0YS5wb2ludHMubGVuZ3RoOyBqICs9IDIpIHtcbiAgICAgICAgICAgICAgdmFyIGNvb3JkID0gcG9seWdvbkRhdGEucG9pbnRzLnNsaWNlKGosIGogKyAyKTtcbiAgICAgICAgICAgICAgdmFyIHh5ID0gZ2V0WFkoY29vcmRbMF0sIGNvb3JkWzFdKTtcbiAgICAgICAgICAgICAgY29vcmRzLnB1c2goeHkpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgcG9seWdvbiBoYXMgYWxyZWFkeSBiZWVuIGNyZWF0ZWRcbiAgICAgICAgICAgIHZhciBwb2x5Z29uID0gcG9seWdvbnNbcG9seWdvbkRhdGEubmFtZV07XG4gICAgICAgICAgICBpZiAocG9seWdvbikge1xuICAgICAgICAgICAgICBwb2x5Z29uLmNvb3JkcyA9IHBvbHlnb24uY29vcmRzLmNvbmNhdChjb29yZHMpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcG9seWdvbiA9IG5ldyBQb2x5Z29uKHBvbHlnb25EYXRhLm5hbWUsIGNvb3JkcywgZ2V0WFkocG9seWdvbkRhdGEuY2VudHJvaWRbMV0sIHBvbHlnb25EYXRhLmNlbnRyb2lkWzBdKSk7XG4gICAgICAgICAgICAgIHBvbHlnb25zW3BvbHlnb25EYXRhLm5hbWVdID0gcG9seWdvbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBDaGVjayB0byBlYWNoIHBvbHlnb24gdG8gZmluZCB0aGUgbGFyZ2VzdCBieSBzZWVpbmcgaWYgaXQgaGFzIHRoZSBtb3N0IGVkZ2VzXG4gICAgICAgICAgLy8gVXNlIHRoZSBsYXJnZXN0IHBvbHlnb24ncyBjZW50cm9pZCBhcyB0aGUgdGltZXpvbmUgY2VudHJvaWRcbiAgICAgICAgICB2YXIgY2VudHJvaWROYW1lLFxuICAgICAgICAgICAgICBtYXhQb2ludHMgPSAwO1xuICAgICAgICAgICQuZWFjaChwb2x5Z29ucywgZnVuY3Rpb24gKGluZGV4LCB2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKHZhbHVlLmNvb3Jkcy5sZW5ndGggPiBtYXhQb2ludHMpIHtcbiAgICAgICAgICAgICAgbWF4UG9pbnRzID0gdmFsdWUuY29vcmRzLmxlbmd0aDtcbiAgICAgICAgICAgICAgY2VudHJvaWROYW1lID0gdmFsdWUubmFtZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGlmICghX3RpbWVab25lUmVnaW9uc09ic2VydmFibGUoKVt0aW1lWm9uZS5uYW1lXSkge1xuICAgICAgICAgICAgX3RpbWVab25lUmVnaW9uc09ic2VydmFibGUoKVt0aW1lWm9uZS5uYW1lXSA9IFtdO1xuICAgICAgICAgIH1cbiAgICAgICAgICBfdGltZVpvbmVSZWdpb25zT2JzZXJ2YWJsZSgpW3RpbWVab25lLm5hbWVdID0gcG9seWdvbnM7XG4gICAgICAgICAgdGltZVpvbmUuY2VudHJvaWRQb2x5Z29uID0gcG9seWdvbnNbY2VudHJvaWROYW1lXTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgZnVuY3Rpb24gZ2V0WFkobGF0LCBsbmcpIHtcbiAgICB2YXIgY2VudGVyWCA9IG1lcmNYKF9jZW50ZXJMbmcoKSk7XG4gICAgdmFyIGNlbnRlclkgPSBtZXJjWShfY2VudGVyTGF0KCkpO1xuICAgIHZhciB4ID0gbWVyY1gobG5nKSAtIGNlbnRlclg7XG4gICAgdmFyIHkgPSBtZXJjWShsYXQpIC0gY2VudGVyWTtcbiAgICByZXR1cm4geyB4OiB4LCB5OiB5IH07XG4gIH1cblxuICBmdW5jdGlvbiBtZXJjWChsbmcpIHtcbiAgICBsbmcgPSB0b1JhZGlhbnMobG5nKTtcbiAgICB2YXIgYSA9IG1lcmNVbml0cyAvIE1hdGguUEkgKiBNYXRoLnBvdygyLCBfem9vbSgpKTtcbiAgICB2YXIgYiA9IGxuZyArIE1hdGguUEk7XG4gICAgcmV0dXJuIGEgKiBiO1xuICB9XG5cbiAgZnVuY3Rpb24gbWVyY1kobGF0KSB7XG4gICAgbGF0ID0gdG9SYWRpYW5zKGxhdCk7XG4gICAgdmFyIGEgPSBtZXJjVW5pdHMgLyBNYXRoLlBJICogTWF0aC5wb3coMiwgX3pvb20oKSk7XG4gICAgdmFyIGIgPSBNYXRoLnRhbihNYXRoLlBJIC8gNCArIGxhdCAvIDIpO1xuICAgIHZhciBjID0gTWF0aC5QSSAtIE1hdGgubG9nKGIpO1xuICAgIHJldHVybiBhICogYztcbiAgfVxuXG4gIGZ1bmN0aW9uIHRvUmFkaWFucyhkZWdyZWVzKSB7XG4gICAgcmV0dXJuIGRlZ3JlZXMgKiAoTWF0aC5QSSAvIDE4MCk7XG4gIH1cbn0iLCIndXNlIHN0cmljdCc7XG5cbmZ1bmN0aW9uIFRvb2x0aXBTZXJ2aWNlKHRvb2x0aXBzKSB7XG4gIHZhciBzZWxmID0gdGhpcztcblxuICB2YXIgc3RvcmFnZUtleSA9ICd0b29sdGlwc1Nob3duJztcblxuICBzZWxmLmxvYWRUb29saXBzID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciB0b29sdGlwc1Nob3duID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oc3RvcmFnZUtleSk7XG4gICAgaWYgKHRvb2x0aXBzLmxlbmd0aCA9PT0gMCB8fCB0b29sdGlwc1Nob3duKSByZXR1cm47XG4gICAgc2hvd1Rvb2x0aXAoMCk7XG4gIH07XG5cbiAgZnVuY3Rpb24gc2hvd1Rvb2x0aXAoaW5kZXgpIHtcbiAgICBpZiAoaW5kZXggPT09IHRvb2x0aXBzLmxlbmd0aCkgcmV0dXJuO1xuICAgIHRyeSB7XG4gICAgICB0b29sdGlwc1tpbmRleF0uaWQudG9vbHRpcCgnc2hvdycpO1xuICAgIH0gY2F0Y2ggKGUpIHt9XG5cbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHRvb2x0aXBzW2luZGV4XS5pZC50b29sdGlwKCdkaXNwb3NlJyk7XG4gICAgICB9IGNhdGNoIChlKSB7fVxuICAgICAgLy8gSW5jcmVtZW50IHRoZSBpbmRleCB0byB0cnkgdG8gZ2V0IHRoZSBuZXh0IHRvb2x0aXBcbiAgICAgIGluZGV4Kys7XG4gICAgICBpZiAoIXRvb2x0aXBzW2luZGV4XSkge1xuICAgICAgICAvLyBEb24ndCBzaG93IHRoZSB0b29sdGlwcyBhZ2FpblxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShzdG9yYWdlS2V5LCB0cnVlKTtcbiAgICAgIH1cbiAgICAgIHNob3dUb29sdGlwKGluZGV4KTtcbiAgICB9LCB0b29sdGlwc1tpbmRleF0udGltZW91dCAqIDEwMDApO1xuICB9XG59IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbmZ1bmN0aW9uIFBhcnNlckRpcmVjdG9yeShuYW1lLCBkaXJlY3RvcmllcywgZmlsZXMpIHtcblx0dmFyIHNlbGYgPSB0aGlzO1xuXHRzZWxmLm5hbWUgPSBuYW1lID8gbmFtZSA6IG51bGw7XG5cdHNlbGYuZGlyZWN0b3JpZXMgPSBkaXJlY3RvcmllcyA/IGRpcmVjdG9yaWVzIDogW107XG5cdHNlbGYuZmlsZXMgPSBmaWxlcyA/IGZpbGVzIDogW107XG59IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbmZ1bmN0aW9uIFBhcnNlckZpbGUoaWQsIG5hbWUpIHtcblx0dmFyIHNlbGYgPSB0aGlzO1xuXHRzZWxmLmlkID0gaWQgPyBpZCA6IDA7XG5cdHNlbGYubmFtZSA9IG5hbWUgPyBuYW1lIDogbnVsbDtcbn0iLCJcInVzZSBzdHJpY3RcIjtcblxuZnVuY3Rpb24gTGF0TG5nKGxhdCwgbG5nKSB7XG4gIHZhciBzZWxmID0gdGhpcztcbiAgc2VsZi5sYXQgPSBsYXQ7XG4gIHNlbGYubG5nID0gbG5nO1xufSIsIid1c2Ugc3RyaWN0JztcblxuZnVuY3Rpb24gUG9seWdvbihuYW1lLCBjb29yZHMsIGNlbnRyb2lkKSB7XG4gIHZhciBzZWxmID0gdGhpcztcblxuICBzZWxmLm5hbWUgPSBuYW1lO1xuICBzZWxmLmNvb3JkcyA9IGNvb3JkcztcbiAgc2VsZi5jZW50cm9pZCA9IGNlbnRyb2lkO1xuXG4gIHNlbGYuaWQgPSBrby5wdXJlQ29tcHV0ZWQoZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBzZWxmLm5hbWUucmVwbGFjZSgvXFwvfF8vZywgJy0nKTtcbiAgfSk7XG59IiwiJ3VzZSBzdHJpY3QnO1xuXG5mdW5jdGlvbiBUaW1lWm9uZShuYW1lLCBjb29yZHMpIHtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gIHNlbGYubmFtZSA9IG5hbWU7XG4gIHNlbGYuY29vcmRzID0gY29vcmRzO1xuICBzZWxmLnBvbHlnb25zID0gdW5kZWZpbmVkO1xuICBzZWxmLmNlbnRyb2lkUG9seWdvbiA9IHVuZGVmaW5lZDtcbiAgc2VsZi5ib3VuZGluZ0JveCA9IHVuZGVmaW5lZDtcblxuICBzZWxmLm1hdGNoZXNJZCA9IGZ1bmN0aW9uIChpZFRvTWF0Y2gpIHtcbiAgICByZXR1cm4gc2VsZi5pZCgpID09PSBpZFRvTWF0Y2gucmVwbGFjZSgvXFwvfF8vZywgJy0nKTtcbiAgfTtcblxuICBzZWxmLmlkID0ga28ucHVyZUNvbXB1dGVkKGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gc2VsZi5uYW1lLnJlcGxhY2UoL1xcL3xfL2csICctJyk7XG4gIH0pO1xufSIsIid1c2Ugc3RyaWN0JztcblxuYW5ndWxhci5tb2R1bGUoJ21jbmVkd2FyZCcpLmNvbnRyb2xsZXIoJ0FwcEN0cmwnLCBbJyRyb290U2NvcGUnLCAnJHN0YXRlJywgJyR0aW1lb3V0JywgJyRsb2NhdGlvbicsICckYW5jaG9yU2Nyb2xsJywgZnVuY3Rpb24gQXBwQ3RybCgkcm9vdFNjb3BlLCAkc3RhdGUsICR0aW1lb3V0LCAkbG9jYXRpb24sICRhbmNob3JTY3JvbGwpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gICRyb290U2NvcGUuaW5Sb290ID0gdHJ1ZTtcbiAgJHJvb3RTY29wZS5hcHBUaXRsZSA9IFwiRWR3YXJkIE1jTmVhbHlcIjtcblxuICAkcm9vdFNjb3BlLiRvbignJHN0YXRlQ2hhbmdlU3VjY2VzcycsIGZ1bmN0aW9uIChldmVudCwgdG9TdGF0ZSwgdG9QYXJhbXMsIGZyb21TdGF0ZSwgZnJvbVBhcmFtcykge1xuICAgICRyb290U2NvcGUuYXBwVGl0bGUgPSB0b1N0YXRlLnRpdGxlICYmIHRvU3RhdGUudGl0bGUgIT09ICcnID8gdG9TdGF0ZS50aXRsZSA6ICdFZHdhcmQgTWNOZWFseSc7XG4gICAgaWYgKGZyb21TdGF0ZS5uYW1lID09PSAnYXBwJykge1xuICAgICAgLy8gU2Nyb2xsIHVwIHRvIHRoZSB0b3Agd2hlbiBnb2luZyBhd2F5IGZyb20gdGhlIG1haW4gYXBwXG4gICAgICBhZGp1c3RTY3JvbGwoJ3Njcm9sbGhlcmUnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYWRqdXN0U2Nyb2xsKGZyb21TdGF0ZS5uYW1lKTtcbiAgICB9XG4gICAgaWYgKGZyb21TdGF0ZS5uYW1lID09PSAnY29sb3Jab25lcycpIHtcbiAgICAgIC8vIFRoZSBjb2xvciB6b25lcyBuZWVkIHRvIHN0b3AgcmVuZGVyaW5nIHNpbmNlIHdlJ3JlIG5vIGxvbmdlciBvbiB0aGF0IHBhZ2VcbiAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgnc3RvcFJlbmRlcmluZycpO1xuICAgIH1cblxuICAgICRyb290U2NvcGUuaW5Sb290ID0gdG9TdGF0ZS5uYW1lID09PSAnYXBwJyB8fCB0b1N0YXRlLm5hbWUgPT09ICcnO1xuICAgICRyb290U2NvcGUudXNlQ29udGFpbmVyRmx1aWQgPSB0b1N0YXRlLm5hbWUgPT0gJ2NvbG9yWm9uZXMnIHx8IHRvU3RhdGUubmFtZSA9PSAncGFyc2VyJztcbiAgICAkcm9vdFNjb3BlLnVzZUNvbnRhaW5lciA9ICEkcm9vdFNjb3BlLmluUm9vdCAmJiAhJHJvb3RTY29wZS51c2VDb250YWluZXJGbHVpZDtcblxuICAgIC8vIFVwZGF0ZSBHb29nbGUgQW5hbHl0aWNzXG4gICAgZ2EoJ3NldCcsICdwYWdlJywgdG9TdGF0ZS5uYW1lID09PSAnYXBwJyA/ICcvaW5kZXguaHRtbCcgOiB0b1N0YXRlLnVybCArICcuaHRtbCcpO1xuICAgIGdhKCdzZW5kJywgJ3BhZ2V2aWV3Jyk7XG4gIH0pO1xuXG4gICQoJyNsb2FkZXInKS5mYWRlT3V0KDUwMCk7XG5cbiAgZnVuY3Rpb24gYWRqdXN0U2Nyb2xsKGlkKSB7XG4gICAgaWYgKCFpZCB8fCBpZCA9PT0gJycpIHJldHVybjtcbiAgICAkdGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAkKCdodG1sLCBib2R5JykuYW5pbWF0ZSh7XG4gICAgICAgIHNjcm9sbFRvcDogJCgnIycgKyBpZCkub2Zmc2V0KCkudG9wICsgMlxuICAgICAgfSwgMSk7XG4gICAgfSk7XG4gIH1cbn1dKTsiLCIndXNlIHN0cmljdCc7XG5cbi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEVkd2FyZCBvbiAxMS84LzIwMTQuXHJcbiAqL1xuYW5ndWxhci5tb2R1bGUoJ21jbmVkd2FyZCcpLmNvbnRyb2xsZXIoJ0JsYWNramFja0N0cmwnLCBbJyRyb290U2NvcGUnLCAnJHNjb3BlJywgJyR3aW5kb3cnLCAnYmxhY2tqYWNrU2VydmljZScsICdwbGF5ZXJTZXJ2aWNlJywgZnVuY3Rpb24gQmxhY2tqYWNrQ3RybCgkcm9vdFNjb3BlLCAkc2NvcGUsICR3aW5kb3csIGJsYWNramFja1NlcnZpY2UsIHBsYXllclNlcnZpY2UpIHtcblx0J3VzZSBzdHJpY3QnO1xuXG5cdCRzY29wZS5wbGF5ZXIgPSBwbGF5ZXJTZXJ2aWNlLmdldFBsYXllcigpO1xuXHQkc2NvcGUuZGVhbGVyID0gcGxheWVyU2VydmljZS5nZXREZWFsZXIoKTtcblxuXHQkcm9vdFNjb3BlLiRvbignYnVzdGVkJywgZnVuY3Rpb24gKGV2ZW50LCBhcmdzKSB7XG5cdFx0dmFyIHVzZXIgPSBhcmdzO1xuXHRcdGlmICh1c2VyLnR5cGUgPT0gJ3BsYXllcicpIHtcblx0XHRcdCRzY29wZS5tZXNzYWdlID0gJ1lvdSBidXN0ZWQuLi4nO1xuXHRcdFx0cGxheWVyU2VydmljZS51c2VyV29uKCdkZWFsZXInKTtcblx0XHR9XG5cdFx0aWYgKHVzZXIudHlwZSA9PSAnZGVhbGVyJykge1xuXHRcdFx0JHNjb3BlLm1lc3NhZ2UgPSAnRGVhbGVyIGJ1c3RlZCEgWW91IHdpbiEnO1xuXHRcdFx0cGxheWVyU2VydmljZS51c2VyV29uKCdwbGF5ZXInKTtcblx0XHR9XG5cdFx0YmxhY2tqYWNrU2VydmljZS5mbGlwQ2FyZHMoKTtcblx0XHR1cGRhdGVVc2Vycyh0cnVlKTtcblx0XHR0b2dnbGVPcHRpb25zKGZhbHNlKTtcblx0fSk7XG5cdCRyb290U2NvcGUuJG9uKCdkZWFsZXJXb24nLCBmdW5jdGlvbiAoKSB7XG5cdFx0JHNjb3BlLm1lc3NhZ2UgPSAnRGVhbGVyIHdpbnMuLi4nO1xuXHRcdHBsYXllclNlcnZpY2UudXNlcldvbignZGVhbGVyJyk7XG5cdFx0dXBkYXRlVXNlcnModHJ1ZSk7XG5cdFx0dG9nZ2xlT3B0aW9ucyhmYWxzZSk7XG5cdH0pO1xuXHQkcm9vdFNjb3BlLiRvbigncGxheWVyV29uJywgZnVuY3Rpb24gKCkge1xuXHRcdCRzY29wZS5tZXNzYWdlID0gJ1lvdSB3aW4hJztcblx0XHRwbGF5ZXJTZXJ2aWNlLnVzZXJXb24oJ3BsYXllcicpO1xuXHRcdHVwZGF0ZVVzZXJzKHRydWUpO1xuXHRcdHRvZ2dsZU9wdGlvbnMoZmFsc2UpO1xuXHR9KTtcblx0JHJvb3RTY29wZS4kb24oJ3B1c2gnLCBmdW5jdGlvbiAoKSB7XG5cdFx0JHNjb3BlLm1lc3NhZ2UgPSAnUHVzaC4nO1xuXHRcdHVwZGF0ZVVzZXJzKHRydWUpO1xuXHRcdHRvZ2dsZU9wdGlvbnMoZmFsc2UpO1xuXHR9KTtcblx0JHJvb3RTY29wZS4kb24oJzIxJywgZnVuY3Rpb24gKGV2ZW50LCBhcmdzKSB7XG5cdFx0dmFyIHVzZXIgPSBhcmdzO1xuXHRcdGlmICh1c2VyLnR5cGUgPT0gJ3BsYXllcicpIHtcblx0XHRcdCRzY29wZS5tZXNzYWdlID0gJ1lvdSBnb3QgMjEhIFlvdSB3aW4hJztcblx0XHRcdHBsYXllclNlcnZpY2UudXNlcldvbigncGxheWVyJyk7XG5cdFx0fVxuXHRcdGlmICh1c2VyLnR5cGUgPT0gJ2RlYWxlcicpIHtcblx0XHRcdCRzY29wZS5tZXNzYWdlID0gJ0RlYWxlciBnb3QgMjEuLi4nO1xuXHRcdFx0cGxheWVyU2VydmljZS51c2VyV29uKCdkZWFsZXInKTtcblx0XHR9XG5cdFx0YmxhY2tqYWNrU2VydmljZS5mbGlwQ2FyZHMoKTtcblx0XHR1cGRhdGVVc2Vycyh0cnVlKTtcblx0XHR0b2dnbGVPcHRpb25zKGZhbHNlKTtcblx0fSk7XG5cblx0Zm9yICh2YXIgeCA9IDA7IHggPCAzOyB4KyspIHtcblx0XHR2YXIgY2FyZCA9ICQoJzxpbWc+Jyk7XG5cdFx0aWYgKHggPT0gMikge1xuXHRcdFx0Y2FyZC5hdHRyKCdzcmMnLCAnaW1nL2JsYWNramFjay9jYXJkL2IyZnYucG5nJyk7XG5cdFx0XHRjYXJkLmF0dHIoJ2lkJywgJ3N0YXJ0Q2FyZCcpO1xuXHRcdFx0Y2FyZC5hZGRDbGFzcygnY2FyZC1pbWcnKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Y2FyZC5hdHRyKCdzcmMnLCAnaW1nL2JsYWNramFjay9jYXJkL2IycGwucG5nJyk7XG5cdFx0XHRjYXJkLmFkZENsYXNzKCdjYXJkLWltZycpO1xuXHRcdH1cblx0XHQkKCcjc3RhcnRDYXJkcycpLmFwcGVuZChjYXJkKTtcblx0fVxuXG5cdCRzY29wZS5kZWFsQ2FyZHMgPSBmdW5jdGlvbiAoKSB7XG5cdFx0JHNjb3BlLm1lc3NhZ2UgPSAnJztcblx0XHQvLyBSZW1vdmUgaGlkZGVuIHBsYWNlaG9sZGVyIGNhcmRzXG5cdFx0JCgnLmVtcHR5LWNhcmQnKS5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpO1xuXHRcdHBsYXllclNlcnZpY2UucmVzZXRVc2VycygpO1xuXHRcdC8vIFJlc2V0IGhpdDIxIGV2ZXJ5IHRpbWUgbmV3IGRlY2sgaXMgZGVhbHRcblx0XHQkcm9vdFNjb3BlLmhpdDIxID0gZmFsc2U7XG5cdFx0YmxhY2tqYWNrU2VydmljZS5kZWFsQ2FyZHMoKTtcblx0XHRpZiAoISRyb290U2NvcGUuaGl0MjEpIHtcblx0XHRcdHVwZGF0ZVVzZXJzKCk7XG5cdFx0XHR0b2dnbGVPcHRpb25zKHRydWUpO1xuXHRcdH1cblx0fTtcblxuXHQvLyBTY29wZSBmdW5jdGlvbnNcblx0JHNjb3BlLmhpdE1lID0gZnVuY3Rpb24gKCkge1xuXHRcdGJsYWNramFja1NlcnZpY2UuaGl0TWUoJHNjb3BlLnBsYXllcik7XG5cdFx0dXBkYXRlVXNlcnMoKTtcblx0fTtcblx0JHNjb3BlLnN0YXkgPSBmdW5jdGlvbiAoKSB7XG5cdFx0YmxhY2tqYWNrU2VydmljZS5zdGF5KCk7XG5cdFx0dXBkYXRlVXNlcnMoKTtcblx0fTtcblx0JHNjb3BlLmFkZENoaXAgPSBmdW5jdGlvbiAoYW1vdW50KSB7XG5cdFx0JHNjb3BlLm1lc3NhZ2UgPSAnJztcblx0XHRpZiAoJHNjb3BlLnN0b3BCZXRzKSB7XG5cdFx0XHQkc2NvcGUubWVzc2FnZSA9ICdZb3UgY2FuXCJ0IHBsYWNlIGFueSBtb3JlIGJldHMgbm93ISc7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdGlmICgkc2NvcGUucGxheWVyLm1vbmV5IDwgJHNjb3BlLnBsYXllci5iZXQgKyBhbW91bnQpIHtcblx0XHRcdCRzY29wZS5tZXNzYWdlID0gJ1lvdSBkb25cInQgaGF2ZSB0aGUgbW9uZXkgdG8gcGxhY2UgdGhhdCBiZXQhJztcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0cGxheWVyU2VydmljZS5hZGRDaGlwKGFtb3VudCk7XG5cdFx0dXBkYXRlVXNlcnMoKTtcblx0fTtcblx0JHNjb3BlLmNsZWFyQmV0ID0gZnVuY3Rpb24gKCkge1xuXHRcdCRzY29wZS5tZXNzYWdlID0gJyc7XG5cdFx0aWYgKCRzY29wZS5zdG9wQmV0cykge1xuXHRcdFx0aWYgKCRzY29wZS5wbGF5ZXIuYmV0ID4gMCkgJHNjb3BlLm1lc3NhZ2UgPSAnWW91IGNhblwidCBiYWNrIG91dCBub3chJztcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0cGxheWVyU2VydmljZS5jbGVhckJldCgpO1xuXHR9O1xuXG5cdGZ1bmN0aW9uIHVwZGF0ZVVzZXJzKHNhdmUpIHtcblx0XHQkc2NvcGUucGxheWVyID0gcGxheWVyU2VydmljZS5nZXRQbGF5ZXIoKTtcblx0XHQkc2NvcGUuZGVhbGVyID0gcGxheWVyU2VydmljZS5nZXREZWFsZXIoKTtcblx0XHRpZiAoc2F2ZSkge1xuXHRcdFx0c2F2ZVVzZXJzKCk7XG5cdFx0fVxuXHR9XG5cdGZ1bmN0aW9uIHNhdmVVc2VycygpIHtcblx0XHRwbGF5ZXJTZXJ2aWNlLnVwZGF0ZVVzZXJzKFskc2NvcGUucGxheWVyLCAkc2NvcGUuZGVhbGVyXSk7XG5cdH1cblxuXHRmdW5jdGlvbiB0b2dnbGVPcHRpb25zKG9wdGlvbnNPbikge1xuXHRcdGlmIChvcHRpb25zT24pIHtcblx0XHRcdCQoJyNvcHRpb25zJykuc2hvdygpO1xuXHRcdFx0JCgnI3N0YXJ0Q2FyZHMnKS5oaWRlKCk7XG5cdFx0XHQvLyBEaXNhYmxlIGJldHNcblx0XHRcdCRzY29wZS5zdG9wQmV0cyA9IHRydWU7XG5cdFx0fSBlbHNlIHtcblx0XHRcdCQoJyNvcHRpb25zJykuaGlkZSgpO1xuXHRcdFx0JCgnI3N0YXJ0Q2FyZHMnKS5zaG93KCk7XG5cdFx0XHQvLyBFbmFibGUgYmV0c1xuXHRcdFx0JHNjb3BlLnN0b3BCZXRzID0gZmFsc2U7XG5cdFx0fVxuXHR9XG59XSk7IiwiJ3VzZSBzdHJpY3QnO1xuXG4vKipcclxuICogQ3JlYXRlZCBieSBFZHdhcmQgb24gMTEvMjQvMjAxNC5cclxuICovXG5hbmd1bGFyLm1vZHVsZSgnbWNuZWR3YXJkJykuc2VydmljZSgnYmxhY2tqYWNrU2VydmljZScsIFsnJHJvb3RTY29wZScsICdwbGF5ZXJTZXJ2aWNlJywgZnVuY3Rpb24gKCRyb290U2NvcGUsIHBsYXllclNlcnZpY2UpIHtcblx0J3VzZSBzdHJpY3QnO1xuXG5cdHZhciBibGFja2phY2tTZXJ2aWNlID0ge307XG5cdHZhciBzdWl0cyA9IFsnY2x1YnMnLCAnc3BhZGVzJywgJ2RpYW1vbmRzJywgJ2hlYXJ0cyddO1xuXHR2YXIgY2FyZHMgPSBbXTtcblxuXHRmdW5jdGlvbiBjcmVhdGVDYXJkKHN1aXQsIHZhbHVlKSB7XG5cdFx0dmFyIG5hbWUsIHNyY05hbWU7XG5cdFx0aWYgKHZhbHVlID09IDEgfHwgdmFsdWUgPiAxMCkge1xuXHRcdFx0c3dpdGNoICh2YWx1ZSkge1xuXHRcdFx0XHRjYXNlIDE6XG5cdFx0XHRcdFx0bmFtZSA9ICdBY2UnO1xuXHRcdFx0XHRcdHZhbHVlID0gMTE7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgMTE6XG5cdFx0XHRcdFx0bmFtZSA9ICdKYWNrJztcblx0XHRcdFx0XHR2YWx1ZSA9IDEwO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlIDEyOlxuXHRcdFx0XHRcdG5hbWUgPSAnUXVlZW4nO1xuXHRcdFx0XHRcdHZhbHVlID0gMTA7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgMTM6XG5cdFx0XHRcdFx0bmFtZSA9ICdLaW5nJztcblx0XHRcdFx0XHR2YWx1ZSA9IDEwO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdFx0c3JjTmFtZSA9IHN1aXQuc3Vic3RyaW5nKDAsIDEpLnRvTG93ZXJDYXNlKCkgKyBuYW1lLnN1YnN0cmluZygwLCAxKS50b0xvd2VyQ2FzZSgpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRuYW1lID0gdmFsdWU7XG5cdFx0XHRzcmNOYW1lID0gc3VpdC5zdWJzdHJpbmcoMCwgMSkudG9Mb3dlckNhc2UoKSArIHZhbHVlO1xuXHRcdH1cblx0XHR2YXIgaWQgPSBzdWl0ICsgbmFtZTtcblx0XHRyZXR1cm4ge1xuXHRcdFx0c3VpdDogc3VpdCxcblx0XHRcdG5hbWU6IG5hbWUsXG5cdFx0XHR2YWx1ZTogdmFsdWUsXG5cdFx0XHRpZDogaWQsXG5cdFx0XHRpc0ZhY2VEb3duOiBmYWxzZSxcblx0XHRcdHNyYzogJ2ltZy9ibGFja2phY2svY2FyZC8nICsgc3JjTmFtZSArICcucG5nJ1xuXHRcdH07XG5cdH1cblxuXHRmdW5jdGlvbiBjcmVhdGVDYXJkcygpIHtcblx0XHRjYXJkcyA9IFtdO1xuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgc3VpdHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdGZvciAodmFyIHZhbHVlID0gMTsgdmFsdWUgPCAxNDsgdmFsdWUrKykge1xuXHRcdFx0XHR2YXIgY2FyZCA9IGNyZWF0ZUNhcmQoc3VpdHNbaV0sIHZhbHVlKTtcblx0XHRcdFx0Y2FyZHMucHVzaChjYXJkKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRibGFja2phY2tTZXJ2aWNlLmRlYWxDYXJkcyA9IGZ1bmN0aW9uICgpIHtcblx0XHRzaHVmZmxlKCk7XG5cdFx0Ly9maXhEZWNrKCk7XG5cdFx0Zm9yICh2YXIgeCA9IDA7IHggPCA0OyB4KyspIHtcblx0XHRcdGlmICh4ICUgMiA9PT0gMCkge1xuXHRcdFx0XHRkZWFsQ2FyZChwbGF5ZXJTZXJ2aWNlLmdldFBsYXllcigpKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGlmICh4ID09IDMpIGRlYWxDYXJkKHBsYXllclNlcnZpY2UuZ2V0RGVhbGVyKCksIHRydWUpO2Vsc2UgZGVhbENhcmQocGxheWVyU2VydmljZS5nZXREZWFsZXIoKSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xuXG5cdGZ1bmN0aW9uIGRlYWxDYXJkKHVzZXIsIGZhY2VEb3duKSB7XG5cdFx0dmFyIGNhcmQgPSBjYXJkc1swXTtcblx0XHRpZiAoZmFjZURvd24pIGNhcmQuaXNGYWNlRG93biA9IGZhY2VEb3duO1xuXHRcdHBsYXllclNlcnZpY2UuYWRkQ2FyZCh1c2VyLCBjYXJkKTtcblxuXHRcdGNhcmRzLnNwbGljZShjYXJkcy5pbmRleE9mKGNhcmQpLCAxKTtcblx0fVxuXG5cdGJsYWNramFja1NlcnZpY2UuaGl0TWUgPSBmdW5jdGlvbiAodXNlcikge1xuXHRcdGRlYWxDYXJkKHVzZXIpO1xuXHR9O1xuXG5cdGJsYWNramFja1NlcnZpY2Uuc3RheSA9IGZ1bmN0aW9uICgpIHtcblx0XHR2YXIgZGVhbGVyID0gcGxheWVyU2VydmljZS5nZXREZWFsZXIoKTtcblx0XHRmb3IgKHZhciB4ID0gMDsgeCA8IGRlYWxlci5jYXJkczsgeCsrKSB7XG5cdFx0XHRpZiAoZGVhbGVyLmNhcmRzW3hdLmlzRmFjZURvd24pIHtcblx0XHRcdFx0ZGVhbGVyLmNhcmRzW3hdLmZhY2VEb3duID0gZmFsc2U7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHdoaWxlIChkZWFsZXIuaGFuZFZhbHVlIDwgMTcpIHtcblx0XHRcdGRlYWxDYXJkKGRlYWxlcik7XG5cdFx0fVxuXHRcdGlmIChkZWFsZXIuaGFuZFZhbHVlID4gMjEpIHtcblx0XHRcdCRyb290U2NvcGUuJGJyb2FkY2FzdCgnZGVhbGVyQnVzdGVkJyk7XG5cdFx0fSBlbHNlIGlmIChkZWFsZXIuaGFuZFZhbHVlID4gcGxheWVyU2VydmljZS5nZXRQbGF5ZXIoKS5oYW5kVmFsdWUpIHtcblx0XHRcdCRyb290U2NvcGUuJGJyb2FkY2FzdCgnZGVhbGVyV29uJyk7XG5cdFx0fSBlbHNlIGlmIChkZWFsZXIuaGFuZFZhbHVlID09IHBsYXllclNlcnZpY2UuZ2V0UGxheWVyKCkuaGFuZFZhbHVlKSB7XG5cdFx0XHQkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ3B1c2gnKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0JHJvb3RTY29wZS4kYnJvYWRjYXN0KCdwbGF5ZXJXb24nKTtcblx0XHR9XG5cdFx0JHJvb3RTY29wZS4kYnJvYWRjYXN0KCdzaG93Q2FyZHMnKTtcblx0fTtcblxuXHQvLyBGaXNjaGVyLVlhdGVzIHNodWZmbGVcblx0ZnVuY3Rpb24gc2h1ZmZsZSgpIHtcblx0XHRjcmVhdGVDYXJkcygpO1xuXG5cdFx0dmFyIGNhcmRzQ29weSA9IFtdLFxuXHRcdCAgICBjYXJkc0NvdW50ID0gY2FyZHMubGVuZ3RoLFxuXHRcdCAgICBpO1xuXG5cdFx0Ly8gV2hpbGUgdGhlcmUgYXJlIHN0aWxsIGNhcmRzIGluIG9yaWdpbmFsIGRlY2suLi5cblx0XHR3aGlsZSAoY2FyZHNDb3VudCkge1xuXHRcdFx0Ly8gUGljayBhIHJhbmRvbSBjYXJkXG5cdFx0XHRpID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogY2FyZHMubGVuZ3RoKTtcblx0XHRcdHZhciBjYXJkID0gY2FyZHNbaV07XG5cdFx0XHQvLyBJZiBub3QgYWxyZWFkeSBzaHVmZmxlZCwgbW92ZSBpdCB0byB0aGUgbmV3IGFycmF5LlxuXHRcdFx0aWYgKGkgaW4gY2FyZHMpIHtcblx0XHRcdFx0Y2FyZHNDb3B5LnB1c2goY2FyZCk7XG5cdFx0XHRcdGRlbGV0ZSBjYXJkc1tpXTtcblx0XHRcdFx0Y2FyZHNDb3VudC0tO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRjYXJkcyA9IGNhcmRzQ29weTtcblx0XHRyZXR1cm4gY2FyZHM7XG5cdH1cblxuXHRmdW5jdGlvbiBmaXhEZWNrKCkge1xuXHRcdGNhcmRzLnB1c2goY3JlYXRlQ2FyZCgnY2x1YnMnLCAxKSk7XG5cdFx0Y2FyZHMucHVzaChjcmVhdGVDYXJkKCdjbHVicycsIDEpKTtcblx0XHRjYXJkcy5wdXNoKGNyZWF0ZUNhcmQoJ2NsdWJzJywgMTApKTtcblx0XHRjYXJkcy5wdXNoKGNyZWF0ZUNhcmQoJ2NsdWJzJywgOSkpO1xuXHRcdGNhcmRzLnB1c2goY3JlYXRlQ2FyZCgnY2x1YnMnLCAxKSk7XG5cdFx0Y2FyZHMucHVzaChjcmVhdGVDYXJkKCdjbHVicycsIDcpKTtcblx0XHRjYXJkcy5wdXNoKGNyZWF0ZUNhcmQoJ2NsdWJzJywgMTApKTtcblx0XHRjYXJkcy5wdXNoKGNyZWF0ZUNhcmQoJ2NsdWJzJywgOSkpO1xuXHR9XG5cblx0Ly8gU3BpbiB0aHJvdWdoIGRlYWxlcidzIGNhcmRzIGFuZCBmbGlwIGFueSBmYWNlIGRvd25zXG5cdGJsYWNramFja1NlcnZpY2UuZmxpcENhcmRzID0gZnVuY3Rpb24gKCkge1xuXHRcdGZvciAodmFyIGMgPSAwOyBjIDwgcGxheWVyU2VydmljZS5nZXREZWFsZXIoKS5jYXJkcy5sZW5ndGg7IGMrKykge1xuXHRcdFx0dmFyIGNhcmQgPSBwbGF5ZXJTZXJ2aWNlLmdldERlYWxlcigpLmNhcmRzW2NdO1xuXHRcdFx0aWYgKGNhcmQuaXNGYWNlRG93bikge1xuXHRcdFx0XHRjYXJkLmlzRmFjZURvd24gPSBmYWxzZTtcblx0XHRcdFx0cGxheWVyU2VydmljZS5nZXREZWFsZXIoKS50YWJsZS5maW5kKCQoJyMnICsgY2FyZC5pZCkpLmF0dHIoJ3NyYycsIGNhcmQuc3JjKTtcblx0XHRcdH1cblx0XHR9XG5cdH07XG5cblx0cmV0dXJuIGJsYWNramFja1NlcnZpY2U7XG59XSk7IiwiJ3VzZSBzdHJpY3QnO1xuXG4vKipcclxuICogQ3JlYXRlZCBieSBFZHdhcmQgb24gMTEvMjQvMjAxNC5cclxuICovXG5hbmd1bGFyLm1vZHVsZSgnbWNuZWR3YXJkJykuc2VydmljZSgncGxheWVyU2VydmljZScsIFsnJHJvb3RTY29wZScsIGZ1bmN0aW9uICgkcm9vdFNjb3BlKSB7XG5cdCd1c2Ugc3RyaWN0JztcblxuXHR2YXIgcGxheWVyU2VydmljZSA9IHt9LFxuXHQgICAgdXNlcnMgPSB7fTtcblxuXHRmdW5jdGlvbiB1cGRhdGVVc2VyKHVzZXIpIHtcblx0XHR1c2Vyc1t1c2VyLnR5cGVdID0gdXNlcjtcblx0XHRsb2NhbFN0b3JhZ2UudXNlcnMgPSBKU09OLnN0cmluZ2lmeSh1c2Vycyk7XG5cdH1cblx0ZnVuY3Rpb24gdXBkYXRlVXNlcnModXNlcnMpIHtcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHVzZXJzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgdXNlciA9IHVzZXJzW2ldO1xuXHRcdFx0dXBkYXRlVXNlcih1c2VyKTtcblx0XHR9XG5cdH1cblxuXHRwbGF5ZXJTZXJ2aWNlLmdldFBsYXllciA9IGZ1bmN0aW9uICgpIHtcblx0XHRyZXR1cm4gdXNlcnMucGxheWVyO1xuXHR9O1xuXHRwbGF5ZXJTZXJ2aWNlLmdldERlYWxlciA9IGZ1bmN0aW9uICgpIHtcblx0XHRyZXR1cm4gdXNlcnMuZGVhbGVyO1xuXHR9O1xuXHRwbGF5ZXJTZXJ2aWNlLnJlc2V0VXNlcnMgPSBmdW5jdGlvbiAoKSB7XG5cdFx0aW5pdFVzZXJzKCk7XG5cdH07XG5cdC8vIEZpbmQgdGhlIHVzZXIgYmFzZWQgb24gdGhlIHBhc3NlZCBpbiB1c2VyJ3MgdHlwZSwgdGhlbiB1cGRhdGVcblx0cGxheWVyU2VydmljZS51cGRhdGVVc2VyID0gZnVuY3Rpb24gKHVzZXIpIHtcblx0XHR1cGRhdGVVc2VyKHVzZXIpO1xuXHR9O1xuXHQvLyBVcGRhdGUgYWxsIHBsYXllclNlcnZpY2Vcblx0cGxheWVyU2VydmljZS51cGRhdGVVc2VycyA9IGZ1bmN0aW9uICh1c2Vycykge1xuXHRcdHVwZGF0ZVVzZXJzKHVzZXJzKTtcblx0fTtcblx0cGxheWVyU2VydmljZS5hZGRDYXJkID0gZnVuY3Rpb24gKHVzZXIsIGNhcmQpIHtcblx0XHR1c2VyLmNhcmRzLnB1c2goY2FyZCk7XG5cdFx0dXNlci5oYW5kVmFsdWUgPSB1c2VyLmhhbmRWYWx1ZSArIGNhcmQudmFsdWU7XG5cdFx0aWYgKHVzZXIuaGFuZFZhbHVlID4gMjEpIHtcblx0XHRcdGFkanVzdEZvckFjZXModXNlcik7XG5cdFx0fVxuXHRcdGlmICh1c2VyLmhhbmRWYWx1ZSA9PSAyMSkge1xuXHRcdFx0JHJvb3RTY29wZS4kYnJvYWRjYXN0KCcyMScsIHVzZXIpO1xuXHRcdFx0JHJvb3RTY29wZS5oaXQyMSA9IHRydWU7XG5cdFx0fVxuXHR9O1xuXHRwbGF5ZXJTZXJ2aWNlLmFkZENoaXAgPSBmdW5jdGlvbiAoYW1vdW50KSB7XG5cdFx0dXNlcnMucGxheWVyLmNoaXBzWydjaGlwJyArIGFtb3VudCArICdzJ10rKztcblx0XHR1c2Vycy5wbGF5ZXIuYmV0ID0gdXNlcnMucGxheWVyLmJldCArIGFtb3VudDtcblx0XHR1cGRhdGVVc2VyKHVzZXJzLnBsYXllcik7XG5cdH07XG5cdHBsYXllclNlcnZpY2UuY2xlYXJCZXQgPSBmdW5jdGlvbiAoKSB7XG5cdFx0dXNlcnMucGxheWVyLmJldCA9IDA7XG5cdFx0dXNlcnMucGxheWVyLmNoaXBzID0gZ2V0Q2hpcHMoKTtcblx0fTtcblx0cGxheWVyU2VydmljZS51c2VyV29uID0gZnVuY3Rpb24gKHVzZXJUeXBlKSB7XG5cdFx0dmFyIHBsYXllciA9IHVzZXJzLnBsYXllcjtcblx0XHR2YXIgZGVhbGVyID0gdXNlcnMuZGVhbGVyO1xuXHRcdGlmICh1c2VyVHlwZSA9PSAncGxheWVyJykge1xuXHRcdFx0cGxheWVyLndpbnMgPSBwbGF5ZXIud2lucyArIDE7XG5cdFx0XHRkZWFsZXIubG9zZXMgPSBkZWFsZXIubG9zZXMgKyAxO1xuXHRcdFx0cGxheWVyLm1vbmV5ICs9IHBsYXllci5iZXQ7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGRlYWxlci53aW5zID0gZGVhbGVyLndpbnMgKyAxO1xuXHRcdFx0cGxheWVyLmxvc2VzID0gcGxheWVyLmxvc2VzICsgMTtcblx0XHRcdHBsYXllci5tb25leSAtPSBwbGF5ZXIuYmV0O1xuXHRcdH1cblx0XHRwbGF5ZXIuYmV0ID0gMDtcblx0XHRwbGF5ZXIuY2hpcHMgPSBnZXRDaGlwcygpO1xuXHRcdHVwZGF0ZVVzZXJzKFtwbGF5ZXIsIGRlYWxlcl0pO1xuXHR9O1xuXG5cdC8vIENhbGxlZCB3aGVuIHNlcnZpY2UgaXMgY3JlYXRlZCwgYW5kIHdoZW4gYSBuZXcgZGVjayBpcyBkZWFsdFxuXHRmdW5jdGlvbiBpbml0VXNlcnMoKSB7XG5cdFx0ZnVuY3Rpb24gY2xlYXJIYW5kKHVzZXIpIHtcblx0XHRcdHVzZXIuY2FyZHMgPSBbXTtcblx0XHRcdHVzZXIuaGFuZFZhbHVlID0gMDtcblx0XHR9XG5cdFx0Ly8gR2V0IHVzZXJzIGZyb20gbG9jYWxTdG9yYWdlLiBUaGlzIGNvbnZlcnRzIHRoZWlyIHRhYmxlcyBiYWNrIHRvIGEgalF1ZXJ5IGVsZW1lbnQgYXMgd2VsbFxuXHRcdGZ1bmN0aW9uIGdldFNhdmVkVXNlcnMoKSB7XG5cdFx0XHR2YXIgc2F2ZWRVc2VycyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLnVzZXJzKTtcblx0XHRcdHNhdmVkVXNlcnMucGxheWVyLnRhYmxlID0gJChzYXZlZFVzZXJzLnBsYXllci50YWJsZS5zZWxlY3Rvcik7XG5cdFx0XHRzYXZlZFVzZXJzLmRlYWxlci50YWJsZSA9ICQoc2F2ZWRVc2Vycy5kZWFsZXIudGFibGUuc2VsZWN0b3IpO1xuXHRcdFx0cmV0dXJuIHNhdmVkVXNlcnM7XG5cdFx0fVxuXHRcdC8vIElmIHVzZXJzIGFscmVhZHkgZXhpc3QsIHVzZSB0aGVtXG5cdFx0aWYgKGxvY2FsU3RvcmFnZS51c2VycyAmJiBsb2NhbFN0b3JhZ2UudXNlcnMubGVuZ3RoID4gMikge1xuXHRcdFx0dmFyIHNhdmVkVXNlcnMgPSBnZXRTYXZlZFVzZXJzKCk7XG5cdFx0XHR2YXIgcGxheWVyID0gc2F2ZWRVc2Vycy5wbGF5ZXI7XG5cdFx0XHR2YXIgZGVhbGVyID0gc2F2ZWRVc2Vycy5kZWFsZXI7XG5cdFx0XHRjbGVhckhhbmQocGxheWVyKTtcblx0XHRcdGNsZWFySGFuZChkZWFsZXIpO1xuXHRcdFx0dXBkYXRlVXNlcnMoW3BsYXllciwgZGVhbGVyXSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHVzZXJzLnBsYXllciA9IHtcblx0XHRcdFx0dGFibGU6ICQoJyNwVGFibGUnKSxcblx0XHRcdFx0Y2FyZHM6IFtdLFxuXHRcdFx0XHRoYW5kVmFsdWU6IDAsXG5cdFx0XHRcdHR5cGU6ICdwbGF5ZXInLFxuXHRcdFx0XHRtb25leTogMTAwMCxcblx0XHRcdFx0YmV0OiAwLFxuXHRcdFx0XHRjaGlwczogZ2V0Q2hpcHMoKSxcblx0XHRcdFx0d2luczogMCxcblx0XHRcdFx0bG9zZXM6IDBcblx0XHRcdH07XG5cdFx0XHR1c2Vycy5kZWFsZXIgPSB7XG5cdFx0XHRcdHRhYmxlOiAkKCcjZFRhYmxlJyksXG5cdFx0XHRcdGNhcmRzOiBbXSxcblx0XHRcdFx0aGFuZFZhbHVlOiAwLFxuXHRcdFx0XHR0eXBlOiAnZGVhbGVyJyxcblx0XHRcdFx0d2luczogMCxcblx0XHRcdFx0bG9zZXM6IDBcblx0XHRcdH07XG5cdFx0XHRsb2NhbFN0b3JhZ2UudXNlcnMgPSBKU09OLnN0cmluZ2lmeSh1c2Vycyk7XG5cdFx0fVxuXHR9XG5cdGluaXRVc2VycygpO1xuXG5cdGZ1bmN0aW9uIGdldENoaXBzKCkge1xuXHRcdHJldHVybiB7XG5cdFx0XHRjaGlwNXM6IDAsXG5cdFx0XHRjaGlwMTBzOiAwLFxuXHRcdFx0Y2hpcDI1czogMCxcblx0XHRcdGNoaXAxMDBzOiAwLFxuXHRcdFx0Y2hpcDUwMHM6IDBcblx0XHR9O1xuXHR9XG5cblx0Ly8gQ2hlY2sgdGhlIHVzZXIncyBoYW5kIGZvciBBY2VzLiBJZiB0aGVyZSBpcyBhbiBhY2Ugd2l0aCB0aGUgdmFsdWUgb2YgMTEsIGNoYW5nZSB0aGUgdmFsdWUgdG8gMVxuXHQvLyBJZiB0aGUgaGFuZCB2YWx1ZSBpcyBvdmVyIDIxIGFmdGVyIGFkanVzdGluZywgdGhlIHBsYXllciBidXN0c1xuXHRmdW5jdGlvbiBhZGp1c3RGb3JBY2VzKHVzZXIpIHtcblx0XHRmb3IgKHZhciB4ID0gMDsgeCA8IHVzZXIuY2FyZHMubGVuZ3RoOyB4KyspIHtcblx0XHRcdGlmICh1c2VyLmNhcmRzW3hdLm5hbWUgPT0gJ0FjZScpIHtcblx0XHRcdFx0Ly8gSWYgYWNlIGNhcmQgbm90IGFscmVhZHkgYWRqdXN0ZWQsIGZpeCB0aGF0XG5cdFx0XHRcdGlmICh1c2VyLmNhcmRzW3hdLnZhbHVlID09IDExKSB7XG5cdFx0XHRcdFx0dXNlci5jYXJkc1t4XS52YWx1ZSA9IDE7XG5cdFx0XHRcdFx0dXBkYXRlVXNlckhhbmRWYWx1ZSh1c2VyKTtcblx0XHRcdFx0fVxuXHRcdFx0XHQvLyBTdG9wIHNwaW5uaW5nIGlmIGhhbmQgdmFsdWUgbGVzcyB0aGFuIDIxXG5cdFx0XHRcdGlmICh1c2VyLmhhbmRWYWx1ZSA8IDIxKSBicmVhaztcblx0XHRcdH1cblx0XHR9XG5cdFx0aWYgKHVzZXIuaGFuZFZhbHVlID4gMjEpIHtcblx0XHRcdCRyb290U2NvcGUuJGJyb2FkY2FzdCgnYnVzdGVkJywgdXNlcik7XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gdXBkYXRlVXNlckhhbmRWYWx1ZSh1c2VyKSB7XG5cdFx0dmFyIHZhbHVlID0gMDtcblx0XHRmb3IgKHZhciB4ID0gMDsgeCA8IHVzZXIuY2FyZHMubGVuZ3RoOyB4KyspIHtcblx0XHRcdHZhbHVlID0gdmFsdWUgKyB1c2VyLmNhcmRzW3hdLnZhbHVlO1xuXHRcdH1cblx0XHR1c2VyLmhhbmRWYWx1ZSA9IHZhbHVlO1xuXHRcdHVwZGF0ZVVzZXIodXNlcik7XG5cdH1cblxuXHRyZXR1cm4gcGxheWVyU2VydmljZTtcbn1dKTsiLCIndXNlIHN0cmljdCc7XG5cbi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEVkd2FyZCBvbiAyLzE5LzE1LlxyXG4gKi9cbmFuZ3VsYXIubW9kdWxlKCdtY25lZHdhcmQnKS5kaXJlY3RpdmUoJ3BsYXlpbmdDYXJkJywgZnVuY3Rpb24gKCkge1xuXHQndXNlIHN0cmljdCc7XG5cblx0cmV0dXJuIHtcblx0XHRzY29wZToge1xuXHRcdFx0Y2FyZDogJz0nXG5cdFx0fSxcblx0XHRyZXN0cmljdDogJ0FFJyxcblx0XHRyZXBsYWNlOiAndHJ1ZScsXG5cdFx0Y29udHJvbGxlcjogZnVuY3Rpb24gY29udHJvbGxlcigkc2NvcGUpIHtcblx0XHRcdCRzY29wZS4kb24oJ3BsYXllckJ1c3RlZCcsIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0aWYgKCRzY29wZS5jYXJkLmlzRmFjZURvd24pIHtcblx0XHRcdFx0XHQkKCcjJyArICRzY29wZS5jYXJkLmlkKS5hdHRyKCdzcmMnLCAkc2NvcGUuY2FyZC5zcmMpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHRcdCRzY29wZS4kb24oJ3Nob3dDYXJkcycsIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0JCgnIycgKyAkc2NvcGUuY2FyZC5pZCkuYXR0cignc3JjJywgJHNjb3BlLmNhcmQuc3JjKTtcblx0XHRcdH0pO1xuXHRcdH0sXG5cdFx0bGluazogZnVuY3Rpb24gbGluayhzY29wZSwgZWxlbWVudCwgYXR0cnMpIHtcblx0XHRcdGlmIChzY29wZS5jYXJkLmlzRmFjZURvd24pIGVsZW1lbnQuYXR0cignc3JjJywgJ2ltZy9ibGFja2phY2svY2FyZC9iMmZ2LnBuZycpO2Vsc2UgZWxlbWVudC5hdHRyKCdzcmMnLCBzY29wZS5jYXJkLnNyYyk7XG5cdFx0fSxcblx0XHR0ZW1wbGF0ZTogJzxpbWcgaWQ9XCJ7e2NhcmQuaWR9fVwiIGNsYXNzPVwiY2FyZC1pbWdcIi8+J1xuXHR9O1xufSk7IiwiJ3VzZSBzdHJpY3QnO1xuXG5hbmd1bGFyLm1vZHVsZSgnbWNuZWR3YXJkJykuY29udHJvbGxlcignQ29sb3Jab25lc0N0cmwnLCBbJyRyb290U2NvcGUnLCAnJHNjb3BlJywgZnVuY3Rpb24gQ29sb3Jab25lc0N0cmwoJHJvb3RTY29wZSwgJHNjb3BlKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKSB7XG4gICAgJHNjb3BlLnJlbmRlcmVyID0gbmV3IFJlbmRlcmVyKCk7XG4gICAgdmFyIHRpbWVab25lU2VydmljZSA9IG5ldyBUaW1lWm9uZVNlcnZpY2UoJHNjb3BlLnJlbmRlcmVyLndpZHRoKCkpO1xuICAgIHZhciBjb2xvclBpY2tlciA9IG5ldyBDb2xvclBpY2tlcigpO1xuICAgIHZhciBtb2RlbCA9IG5ldyBDb2xvclpvbmVzVmlld01vZGVsKCRzY29wZS5yZW5kZXJlciwgdGltZVpvbmVTZXJ2aWNlLCBjb2xvclBpY2tlcik7XG4gICAgLy8gRmlndXJlIG91dCB3aHkgSSBuZWVkIHRoaXMgb3ZlcnJpZGUgaGVyZS4uLlxuICAgIGtvLm9wdGlvbnMudXNlT25seU5hdGl2ZUV2ZW50cyA9IHRydWU7XG4gICAga28uYXBwbHlCaW5kaW5ncyhtb2RlbCwgJCgnI21haW4nKVswXSk7XG5cbiAgICB2YXIgdG9vbHRpcFNlcnZpY2UgPSBuZXcgVG9vbHRpcFNlcnZpY2UoW3sgaWQ6ICQoJyNjYW52YXNDb250YWluZXInKSwgdGltZW91dDogOCB9LCB7IGlkOiAkKCcjaG91cnNDb250cm9sJyksIHRpbWVvdXQ6IDMgfSwgeyBpZDogJCgnI21pbnV0ZXNDb250cm9sJyksIHRpbWVvdXQ6IDMgfSwgeyBpZDogJCgnI3NlY29uZHNDb250cm9sJyksIHRpbWVvdXQ6IDMgfSwgeyBpZDogJCgnI29wYWNpdHlDb250cm9sJyksIHRpbWVvdXQ6IDQgfSwgeyBpZDogJCgnI3Nob3dUaW1lc0NvbnRyb2wnKSwgdGltZW91dDogNiB9LCB7IGlkOiAkKCcjc2hvd0NvbG9yc0NvbnRyb2wnKSwgdGltZW91dDogNiB9XSk7XG4gICAgdG9vbHRpcFNlcnZpY2UubG9hZFRvb2xpcHMoKTtcbiAgfSk7XG5cbiAgJHJvb3RTY29wZS4kb24oJ3N0b3BSZW5kZXJpbmcnLCBmdW5jdGlvbiAoKSB7XG4gICAgJHNjb3BlLnJlbmRlcmVyLnN0b3BSZW5kZXJpbmcodHJ1ZSk7XG4gIH0pO1xufV0pOyIsIid1c2Ugc3RyaWN0JztcblxudmFyIENvbG9yWm9uZXNWaWV3TW9kZWwgPSBmdW5jdGlvbiBDb2xvclpvbmVzVmlld01vZGVsKHJlbmRlcmVyLCB0aW1lWm9uZVNlcnZpY2UsIGNvbG9yUGlja2VyKSB7XG4gIHZhciBzZWxmID0gdGhpcztcblxuICB2YXIgd2lkdGggPSByZW5kZXJlci53aWR0aCgpLFxuICAgICAgaGVpZ2h0ID0gcmVuZGVyZXIuaGVpZ2h0KCk7XG4gIHZhciBob3ZlclpvbmVDb2xvciA9ICcjNjYwZDYwJztcbiAgdmFyIHRpbWVGb3JtYXQgPSAnSEg6bW06c3MnO1xuICB2YXIgX2hvdmVyVGltZVpvbmVLZXksIF9ob3ZlclJlZ2lvbktleTtcbiAgdmFyIF9zZWxlY3RlZFpvbmVJbmZvO1xuICB2YXIgX21vdXNlWCwgX21vdXNlWTtcbiAgLy8gVUkgb3B0aW9uc1xuICBzZWxmLmNvbG9yUGlja2VyID0ga28ub2JzZXJ2YWJsZShjb2xvclBpY2tlcik7XG4gIHNlbGYub3BhY2l0eSA9IGtvLm9ic2VydmFibGUoODApO1xuICBzZWxmLnNob3dUaW1lcyA9IGtvLm9ic2VydmFibGUoZmFsc2UpO1xuICBzZWxmLmNvbG9yQWxsWm9uZXMgPSBrby5vYnNlcnZhYmxlKHRydWUpO1xuICAvLyBNYXAgb3B0aW9uc1xuICBzZWxmLndpZHRoID0ga28ub2JzZXJ2YWJsZSh3aWR0aCArICdweCcpO1xuICBzZWxmLmhlaWdodCA9IGtvLm9ic2VydmFibGUoaGVpZ2h0ICsgJ3B4Jyk7XG4gIHNlbGYuem9vbSA9IGtvLm9ic2VydmFibGUoMSk7XG4gIHNlbGYuY2VudGVyTGF0ID0ga28ub2JzZXJ2YWJsZSgyMCk7XG4gIHNlbGYuY2VudGVyTG5nID0ga28ub2JzZXJ2YWJsZSgwKTtcbiAgLy8gQ2FjaGVkIHpvbmVzIGFuZCByZWdpb25zXG4gIHNlbGYudGltZVpvbmVzID0ga28ub2JzZXJ2YWJsZUFycmF5KCk7XG4gIHNlbGYudGltZVpvbmVSZWdpb25zID0ga28ub2JzZXJ2YWJsZSh7fSk7XG5cbiAgdmFyIF90ZXh0Q29sb3IgPSBrby5wdXJlQ29tcHV0ZWQoZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBzZWxmLmNvbG9yQWxsWm9uZXMoKSA/ICd3aGl0ZScgOiAnYmxhY2snO1xuICB9KTtcblxuICAvLyBEcmF3IExvb3BcbiAgcmVuZGVyZXIucmVuZGVyRnVuY3Rpb24oZnVuY3Rpb24gKCkge1xuICAgIGlmIChzZWxmLnRpbWVab25lcygpLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuXG4gICAgdmFyIHRpbWVUZXh0cyA9IFtdO1xuICAgIC8vIFRyaWdnZXIgdGhlIGludGVydmFscyB0byBkcmF3IGFsbCB0aGUgem9uZXNcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlbGYudGltZVpvbmVzKCkubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciB0aW1lWm9uZSA9IHNlbGYudGltZVpvbmVzKClbaV07XG5cbiAgICAgIHZhciBjdXJyZW50ID0gbW9tZW50KCkudHoodGltZVpvbmUubmFtZSk7XG4gICAgICB2YXIgaG91cnMgPSBhZGp1c3RUaW1lKGN1cnJlbnQuaG91cnMoKSk7XG4gICAgICB2YXIgbWludXRlcyA9IGFkanVzdFRpbWUoY3VycmVudC5taW51dGVzKCkpO1xuICAgICAgdmFyIHNlY29uZHMgPSBhZGp1c3RUaW1lKGN1cnJlbnQuc2Vjb25kcygpKTtcblxuICAgICAgdmFyIHJlZCA9IGdldENvbG9ySW50ZXJ2YWwoY29sb3JQaWNrZXIucmVkLCBob3VycywgbWludXRlcywgc2Vjb25kcyk7XG4gICAgICB2YXIgZ3JlZW4gPSBnZXRDb2xvckludGVydmFsKGNvbG9yUGlja2VyLmdyZWVuLCBob3VycywgbWludXRlcywgc2Vjb25kcyk7XG4gICAgICB2YXIgYmx1ZSA9IGdldENvbG9ySW50ZXJ2YWwoY29sb3JQaWNrZXIuYmx1ZSwgaG91cnMsIG1pbnV0ZXMsIHNlY29uZHMpO1xuXG4gICAgICB2YXIgY29sb3IgPSBcIiNcIiArIHJlZCArIGdyZWVuICsgYmx1ZTtcbiAgICAgIGlmIChzZWxmLmNvbG9yQWxsWm9uZXMoKSkge1xuICAgICAgICByZW5kZXJlci5wb2x5Z29uKHRpbWVab25lLmNvb3JkcywgY29sb3IsIHNlbGYub3BhY2l0eSgpKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRpbWVab25lLmNlbnRyb2lkUG9seWdvbiA9PT0gdW5kZWZpbmVkKSBjb250aW51ZTtcbiAgICAgIHZhciB6b25lSW5mbyA9IHtcbiAgICAgICAgdGV4dFg6IHRpbWVab25lLmNlbnRyb2lkUG9seWdvbi5jZW50cm9pZC54LFxuICAgICAgICB0ZXh0WTogdGltZVpvbmUuY2VudHJvaWRQb2x5Z29uLmNlbnRyb2lkLnksXG4gICAgICAgIHRpbWU6IGN1cnJlbnQuZm9ybWF0KHRpbWVGb3JtYXQpLFxuICAgICAgICBjb2xvckhleDogY29sb3JcbiAgICAgIH07XG4gICAgICB0aW1lVGV4dHMucHVzaCh6b25lSW5mbyk7XG4gICAgICBpZiAoX2hvdmVyVGltZVpvbmVLZXkgJiYgX2hvdmVyVGltZVpvbmVLZXkgIT09ICcnICYmIF9ob3ZlclRpbWVab25lS2V5ID09PSB0aW1lWm9uZS5uYW1lKSB7XG4gICAgICAgIF9zZWxlY3RlZFpvbmVJbmZvID0gem9uZUluZm87XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIGhvdmVyVGltZVpvbmUgPSBzZWxmLnRpbWVab25lUmVnaW9ucygpW19ob3ZlclRpbWVab25lS2V5XTtcbiAgICBpZiAoaG92ZXJUaW1lWm9uZSkge1xuICAgICAgJC5lYWNoKGhvdmVyVGltZVpvbmUsIGZ1bmN0aW9uIChpbmRleCwgdmFsdWUpIHtcbiAgICAgICAgaWYgKCF2YWx1ZSB8fCAhdmFsdWUuY29vcmRzIHx8IHZhbHVlLmNvb3Jkcy5sZW5ndGggPT09IDApIHJldHVybjtcbiAgICAgICAgLy8gVXNlIHRoZSBjb2xvci16b25lIGhleCB3aGVuIG9ubHkgY29sb3JpbmcgdGhlIGhvdmVyIHJlZ2lvblxuICAgICAgICB2YXIgaG92ZXJDb2xvciA9IHNlbGYuY29sb3JBbGxab25lcygpID8gaG92ZXJab25lQ29sb3IgOiBfc2VsZWN0ZWRab25lSW5mby5jb2xvckhleDtcbiAgICAgICAgcmVuZGVyZXIucG9seWdvbih2YWx1ZS5jb29yZHMsIGhvdmVyQ29sb3IsIDgwKTtcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIXNlbGYuc2hvd1RpbWVzKCkpIHtcbiAgICAgICAgcmVuZGVyZXIudGV4dChfbW91c2VYLCBfbW91c2VZIC0gNSwgX3NlbGVjdGVkWm9uZUluZm8udGltZSwgX3RleHRDb2xvcigpLCB0cnVlKTtcbiAgICAgIH1cbiAgICAgIHJlbmRlcmVyLnRleHQoX21vdXNlWCwgX21vdXNlWSAtIDI1LCBfaG92ZXJSZWdpb25LZXksIF90ZXh0Q29sb3IoKSwgdHJ1ZSk7XG4gICAgICByZW5kZXJlci50ZXh0KF9tb3VzZVgsIF9tb3VzZVkgLSA0NSwgX3NlbGVjdGVkWm9uZUluZm8uY29sb3JIZXgsIF90ZXh0Q29sb3IoKSwgdHJ1ZSk7XG4gICAgfVxuXG4gICAgLy8gTmVlZCB0byBkbyB0aGlzIGluIGEgc2VwYXJhdGUgbG9vcCBoZXJlIHRvIGhhdmUgdGhlIHRpbWVzIGRyYXduIG9uIHRvcFxuICAgIGlmICghc2VsZi5zaG93VGltZXMoKSkgcmV0dXJuO1xuICAgIGZvciAodmFyIGogPSAwOyBqIDwgdGltZVRleHRzLmxlbmd0aDsgaisrKSB7XG4gICAgICByZW5kZXJlci50ZXh0KHRpbWVUZXh0c1tqXS50ZXh0WCwgdGltZVRleHRzW2pdLnRleHRZLCB0aW1lVGV4dHNbal0udGltZSwgX3RleHRDb2xvcigpKTtcbiAgICB9XG4gIH0pO1xuXG4gIHZhciBfbWFwQ2FsbGJhY2s7XG4gIC8vIExvYWQgdGhlIG1hcCBpbWFnZVxuICBmdW5jdGlvbiBsb2FkTWFwKG1hcENhbGxiYWNrKSB7XG4gICAgX21hcENhbGxiYWNrID0gbWFwQ2FsbGJhY2s7XG4gICAgZmV0Y2goJy9hcGkvY29sb3Item9uZXMvbWFwP2NlbnRlckxhdD0nICsgc2VsZi5jZW50ZXJMYXQoKSArICcmY2VudGVyTG5nPScgKyBzZWxmLmNlbnRlckxuZygpICsgJyZ6b29tPScgKyBzZWxmLnpvb20oKSArICcmd2lkdGg9JyArIHdpZHRoICsgJyZoZWlnaHQ9JyArIGhlaWdodCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignU29tZXRoaW5nIHdlbnQgd3JvbmcgdHJ5aW5nIHRvIGxvYWQgdGhlIG1hcCBpbWFnZS4uLicpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICByZXNwb25zZS50ZXh0KCkudGhlbihmdW5jdGlvbiAobWFwVXJsKSB7XG4gICAgICAgIHJlbmRlcmVyLmxvYWRJbWFnZShtYXBVcmwpO1xuICAgICAgICBpZiAoX21hcENhbGxiYWNrICE9PSB1bmRlZmluZWQpIF9tYXBDYWxsYmFjaygpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbiAgbG9hZE1hcCgpO1xuXG4gIC8vIExvYWQgdGhlIHRpbWUgem9uZXNcbiAgdGltZVpvbmVTZXJ2aWNlLnNldHVwKHNlbGYuY2VudGVyTGF0LCBzZWxmLmNlbnRlckxuZywgc2VsZi56b29tKTsgLy8gUGFzcyBpbiB0aGUgb2JzZXJ2YWJsZXNcbiAgdGltZVpvbmVTZXJ2aWNlLmxvYWRUaW1lWm9uZXMoZnVuY3Rpb24gKGVycm9yTWVzc2FnZSkge1xuICAgIGNvbnNvbGUuZXJyb3IoZXJyb3JNZXNzYWdlKTtcbiAgfSwgc2VsZi50aW1lWm9uZXMsIHNlbGYudGltZVpvbmVSZWdpb25zKTtcblxuICBmdW5jdGlvbiBhZGp1c3RUaW1lKGludGVydmFsKSB7XG4gICAgaWYgKGludGVydmFsIDwgMTApIHtcbiAgICAgIGludGVydmFsID0gXCIwXCIgKyBpbnRlcnZhbDtcbiAgICB9XG4gICAgcmV0dXJuIGludGVydmFsLnRvU3RyaW5nKCk7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRDb2xvckludGVydmFsKGNvbG9yLCBob3VycywgbWludXRlcywgc2Vjb25kcykge1xuICAgIHZhciBpbnRlcnZhbCA9IGNvbG9yUGlja2VyLmNvbG9ycygpW2NvbG9yXS5pbnRlcnZhbDtcbiAgICBzd2l0Y2ggKGludGVydmFsKSB7XG4gICAgICBjYXNlIGNvbG9yUGlja2VyLmhvdXJzOlxuICAgICAgICByZXR1cm4gaG91cnM7XG4gICAgICBjYXNlIGNvbG9yUGlja2VyLm1pbnV0ZXM6XG4gICAgICAgIHJldHVybiBtaW51dGVzO1xuICAgICAgY2FzZSBjb2xvclBpY2tlci5zZWNvbmRzOlxuICAgICAgICByZXR1cm4gc2Vjb25kcztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGNvbnNvbGUud2FybignQ291bGQgbm90IGZpbmQgYW4gaW50ZXJ2YWwgZm9yOiAnICsgaW50ZXJ2YWwgKyAnLi4uJyk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gcmF5Q2FzdFRlc3QocG9pbnRzLCB4LCB5LCB6b25lTmFtZSkge1xuICAgIHZhciByYXlUZXN0ID0gMDtcbiAgICB2YXIgbGFzdFBvaW50ID0gcG9pbnRzW3BvaW50cy5sZW5ndGggLSAxXTtcblxuICAgIGZvciAodmFyIGogPSAwOyBqIDwgcG9pbnRzLmxlbmd0aDsgaisrKSB7XG4gICAgICB2YXIgcG9pbnQgPSBwb2ludHNbal07XG5cbiAgICAgIGlmIChsYXN0UG9pbnQueSA8PSB5ICYmIHBvaW50LnkgPj0geSB8fCBsYXN0UG9pbnQueSA+IHkgJiYgcG9pbnQueSA8IHkpIHtcbiAgICAgICAgdmFyIHNsb3BlID0gKHBvaW50LnggLSBsYXN0UG9pbnQueCkgLyAocG9pbnQueSAtIGxhc3RQb2ludC55KTtcbiAgICAgICAgdmFyIHRlc3RQb2ludCA9IHNsb3BlICogKHkgLSBsYXN0UG9pbnQueSkgKyBsYXN0UG9pbnQueDtcbiAgICAgICAgaWYgKHRlc3RQb2ludCA8IHgpIHtcbiAgICAgICAgICByYXlUZXN0Kys7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGxhc3RQb2ludCA9IHBvaW50O1xuICAgIH1cbiAgICAvLyBJZiB0aGUgY291bnQgaXMgb2RkLCB3ZSBhcmUgaW4gdGhlIHBvbHlnb25cbiAgICByZXR1cm4gcmF5VGVzdCAlIDIgPT09IDE7XG4gIH1cblxuICByZW5kZXJlci5hZGRNb3VzZU92ZXJFdmVudChmdW5jdGlvbiAoeCwgeSkge1xuICAgIGlmIChzZWxmLnRpbWVab25lcygpLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuXG4gICAgdmFyIGZvdW5kID0gZmFsc2U7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWxmLnRpbWVab25lcygpLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgem9uZSA9IHNlbGYudGltZVpvbmVzKClbaV07XG4gICAgICB2YXIgYm91bmRpbmdCb3ggPSB6b25lLmJvdW5kaW5nQm94O1xuICAgICAgaWYgKGJvdW5kaW5nQm94ID09PSB1bmRlZmluZWQpIHJldHVybjtcblxuICAgICAgLy8gU291cmNlOiBodHRwczovL2dpdGh1Yi5jb20vZG9zeC90aW1lem9uZS1waWNrZXJcbiAgICAgIGlmICh5ID4gYm91bmRpbmdCb3gueHlNYXgueSAmJiB5IDwgYm91bmRpbmdCb3gueHlNaW4ueSAmJiB4ID4gYm91bmRpbmdCb3gueHlNaW4ueCAmJiB4IDwgYm91bmRpbmdCb3gueHlNYXgueCkge1xuICAgICAgICAvLyBNb3VzZSBpcyBpbiB0aGUgem9uZSBib3VuZHMsIHNvIG5vdyBoYXZlIHRvIGNoZWNrIGlmIGl0IGlzIGluIG9uZSBvZiB0aGlzIHpvbmUncyByZWdpb25zXG4gICAgICAgIHZhciByZWdpb25zID0gc2VsZi50aW1lWm9uZVJlZ2lvbnMoKVt6b25lLm5hbWVdO1xuICAgICAgICBmb3IgKHZhciBrZXkgaW4gcmVnaW9ucykge1xuICAgICAgICAgIGlmICghcmVnaW9ucy5oYXNPd25Qcm9wZXJ0eShrZXkpKSBjb250aW51ZTtcbiAgICAgICAgICBpZiAocmF5Q2FzdFRlc3QocmVnaW9uc1trZXldLmNvb3JkcywgeCwgeSkpIHtcbiAgICAgICAgICAgIF9ob3ZlclRpbWVab25lS2V5ID0gem9uZS5uYW1lO1xuICAgICAgICAgICAgX2hvdmVyUmVnaW9uS2V5ID0ga2V5O1xuICAgICAgICAgICAgX21vdXNlWCA9IHg7XG4gICAgICAgICAgICBfbW91c2VZID0geTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sIHNlbGYuY2VudGVyTGF0KCksIHNlbGYuY2VudGVyTG5nKCkpO1xuXG4gIHJlbmRlcmVyLmFkZE1vdXNlU2Nyb2xsRXZlbnQoZnVuY3Rpb24gKHpvb20pIHtcbiAgICBpZiAoem9vbSA+IDEpIHtcbiAgICAgIHNlbGYuem9vbShzZWxmLnpvb20oKSArIDEpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZWxmLnpvb20oc2VsZi56b29tKCkgLSAxKTtcbiAgICB9XG5cbiAgICBpZiAoc2VsZi56b29tKCkgPCAxKSB7XG4gICAgICAvLyBDYW4ndCB6b29tIGFueSBsb3dlclxuICAgICAgc2VsZi56b29tKDEpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfSk7XG59OyIsIid1c2Ugc3RyaWN0JztcblxuLyoqXHJcbiAqIENyZWF0ZWQgYnkgRWR3YXJkIG9uIDEwLzExLzIwMTYuXHJcbiAqL1xuYW5ndWxhci5tb2R1bGUoJ21jbmVkd2FyZCcpLmNvbnRyb2xsZXIoJ0NvbnRhY3RDdHJsJywgWyckc2NvcGUnLCBmdW5jdGlvbiBDb250YWN0Q3RybCgkc2NvcGUpIHtcblx0XHQndXNlIHN0cmljdCc7XG5cblx0XHQkc2NvcGUuY29udGFjdEluZm8gPSB7fTtcblx0XHQkc2NvcGUuaXNGb3JtU3VibWl0dGVkID0gZmFsc2U7XG5cdFx0JHNjb3BlLmNvbnRhY3RTdWNjZXNzTWVzc2FnZSA9ICcnO1xuXHRcdCRzY29wZS5jb250YWN0RXJyb3JNZXNzYWdlID0gJyc7XG5cblx0XHRmdW5jdGlvbiBjbGVhcigpIHtcblx0XHRcdFx0JHNjb3BlLmNvbnRhY3RTdWNjZXNzTWVzc2FnZSA9ICcnO1xuXHRcdFx0XHQkc2NvcGUuY29udGFjdEVycm9yTWVzc2FnZSA9ICcnO1xuXHRcdH1cblx0XHRmdW5jdGlvbiBzaG93RXJyb3IobWVzc2FnZSkge1xuXHRcdFx0XHRjbGVhcigpO1xuXHRcdFx0XHQkc2NvcGUuY29udGFjdEVycm9yTWVzc2FnZSA9IG1lc3NhZ2U7XG5cdFx0fVxuXG5cdFx0JHNjb3BlLnN1Ym1pdENvbnRhY3QgPSBmdW5jdGlvbiAoZm9ybSwgY29udGFjdEluZm8pIHtcblx0XHRcdFx0aWYgKCRzY29wZS5pc0Zvcm1TdWJtaXR0ZWQpIHJldHVybjtcblx0XHRcdFx0Zm9ybS4kc2V0U3VibWl0dGVkKCk7XG5cdFx0XHRcdGlmIChmb3JtLiRpbnZhbGlkKSByZXR1cm47XG5cdFx0XHRcdCRzY29wZS5pc0Zvcm1TdWJtaXR0ZWQgPSB0cnVlO1xuXHRcdFx0XHRmb3JtLiRzZXRQcmlzdGluZSgpO1xuXHRcdFx0XHRmb3JtLiRzZXRVbnRvdWNoZWQoKTtcblx0XHRcdFx0Y2xlYXIoKTtcblxuXHRcdFx0XHR2YXIgcmVDYXB0Y2hhRXJyb3IgPSAnU29ycnksIGJ1dCBzb21ldGhpbmcgd2VudCB3cm9uZyB3aXRoIHRoZSByZUNhcHRjaGEuIFBsZWFzZSByZWZyZXNoIHRoZSBwYWdlIGFuZCB0cnkgYWdhaW4uJztcblx0XHRcdFx0aWYgKGdyZWNhcHRjaGEgPT09IG51bGwpIHtcblx0XHRcdFx0XHRcdHNob3dFcnJvcihyZUNhcHRjaGFFcnJvcik7XG5cdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblx0XHRcdFx0dmFyIHNlY3JldFJlc3BvbnNlID0gY29udGFjdEluZm8ucmVjYXB0Y2hhUmVzcG9uc2U7XG5cdFx0XHRcdGlmIChzZWNyZXRSZXNwb25zZSA9PT0gbnVsbCkge1xuXHRcdFx0XHRcdFx0c2hvd0Vycm9yKHJlQ2FwdGNoYUVycm9yKTtcblx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdCRzY29wZS5jb250YWN0U3VjY2Vzc01lc3NhZ2UgPSAnU2VuZGluZy4uLic7XG5cdFx0XHRcdHZhciB1cmwgPSAnL2FwaS9jb250YWN0P3NlY3JldFJlc3BvbnNlPScgKyBzZWNyZXRSZXNwb25zZTtcblx0XHRcdFx0ZmV0Y2godXJsLCB7XG5cdFx0XHRcdFx0XHRtZXRob2Q6ICdQT1NUJyxcblx0XHRcdFx0XHRcdGhlYWRlcnM6IHtcblx0XHRcdFx0XHRcdFx0XHQnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuXHRcdFx0XHRcdFx0XHRcdCdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRib2R5OiBKU09OLnN0cmluZ2lmeShjb250YWN0SW5mbylcblx0XHRcdFx0fSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcblx0XHRcdFx0XHRcdGlmICghcmVzcG9uc2Uub2spIHtcblx0XHRcdFx0XHRcdFx0XHRyZXNwb25zZS50ZXh0KCkudGhlbihmdW5jdGlvbiAodGV4dCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRzaG93RXJyb3IodGV4dCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdCRzY29wZS5pc0Zvcm1TdWJtaXR0ZWQgPSBmYWxzZTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0JHNjb3BlLiRhcHBseSgpO1xuXHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRyZXNwb25zZS50ZXh0KCkudGhlbihmdW5jdGlvbiAodGV4dCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHQkc2NvcGUuY29udGFjdFN1Y2Nlc3NNZXNzYWdlID0gdGV4dDtcblx0XHRcdFx0XHRcdFx0XHRcdFx0JHNjb3BlLiRhcHBseSgpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBUcmlnZ2VyIEdvb2dsZSBBbmFseXRpYyBldmVudFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRnYSgnc2VuZCcsICdldmVudCcsICdDb250YWN0JywgJ0VtYWlsJywgJ0Zyb206ICcgKyBjb250YWN0SW5mby5lbWFpbCArICcgLSBTdWJqZWN0OiAnICsgY29udGFjdEluZm8uc3ViamVjdCk7XG5cdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdH07XG5cblx0XHQkc2NvcGUuY2hlY2tMZW5ndGggPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0XHRcdFx0dmFyIGxlbmd0aCA9IHZhbHVlID8gdmFsdWUubGVuZ3RoIDogMDtcblx0XHRcdFx0aWYgKCFsZW5ndGgpIGxlbmd0aCA9IDA7XG5cdFx0XHRcdHJldHVybiBsZW5ndGg7XG5cdFx0fTtcblx0XHQkc2NvcGUuZW1haWxNYXhMZW5ndGggPSAxMDA7XG5cdFx0JHNjb3BlLnN1YmplY3RNYXhMZW5ndGggPSAxMDA7XG5cdFx0JHNjb3BlLm1lc3NhZ2VNYXhMZW5ndGggPSAxMDAwO1xuXHRcdCRzY29wZS5zdWJqZWN0TGVuZ3RoID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRyZXR1cm4gJHNjb3BlLmNoZWNrTGVuZ3RoKCRzY29wZS5jb250YWN0SW5mby5zdWJqZWN0KTtcblx0XHR9O1xuXHRcdCRzY29wZS5tZXNzYWdlTGVuZ3RoID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRyZXR1cm4gJHNjb3BlLmNoZWNrTGVuZ3RoKCRzY29wZS5jb250YWN0SW5mby5tZXNzYWdlKTtcblx0XHR9O1xufV0pOyIsIid1c2Ugc3RyaWN0JztcblxuLyoqXHJcbiAqIENyZWF0ZWQgYnkgRWR3YXJkIG9uIDEwLzcvMjAxNC5cclxuICovXG5hbmd1bGFyLm1vZHVsZSgnbWNuZWR3YXJkJykuY29udHJvbGxlcignSUlDdHJsJywgWyckc2NvcGUnLCAnbW9kYWxTZXJ2aWNlJywgZnVuY3Rpb24gSUlDdHJsKCRzY29wZSwgbW9kYWxTZXJ2aWNlKSB7XG5cdCd1c2Ugc3RyaWN0JztcblxuXHQkc2NvcGUuaWlJbmZvID0ge307XG5cdCRzY29wZS5pc0Zvcm1TdWJtaXR0ZWQgPSBmYWxzZTtcblxuXHRmdW5jdGlvbiBzaG93QXBwRXJyb3IoZXJyb3JNZXNzYWdlKSB7XG5cdFx0JHNjb3BlLnNob3dBcHBFcnJvciA9IHRydWU7XG5cdFx0JHNjb3BlLmFwcEVycm9yID0gZXJyb3I7XG5cdH1cblx0ZnVuY3Rpb24gc2hvd0xpYkVycm9yKGVycm9yTWVzc2FnZSkge1xuXHRcdCRzY29wZS5zaG93TGliRXJyb3IgPSB0cnVlO1xuXHRcdCRzY29wZS5saWJFcnJvciA9IGVycm9yO1xuXHR9XG5cdGZ1bmN0aW9uIGNsZWFyQXBwRXJyb3IoZXJyb3JNZXNzYWdlKSB7XG5cdFx0JHNjb3BlLnNob3dBcHBFcnJvciA9IGZhbHNlO1xuXHRcdCRzY29wZS5hcHBFcnJvciA9ICcnO1xuXHR9XG5cdGZ1bmN0aW9uIGNsZWFyTGliRXJyb3IoZXJyb3JNZXNzYWdlKSB7XG5cdFx0JHNjb3BlLnNob3dMaWJFcnJvciA9IGZhbHNlO1xuXHRcdCRzY29wZS5saWJFcnJvciA9ICcnO1xuXHR9XG5cblx0JHNjb3BlLm9wZW5Eb3dubG9hZEZvckFwcCA9IGZ1bmN0aW9uICgpIHtcblx0XHRjbGVhckFwcEVycm9yKCk7XG5cdFx0bW9kYWxTZXJ2aWNlLnNob3dNb2RhbCgnZG93bmxvYWRBcHBNb2RhbCcpO1xuXHR9O1xuXHQkc2NvcGUub3BlbkRvd25sb2FkRm9yTGliID0gZnVuY3Rpb24gKCkge1xuXHRcdGNsZWFyTGliRXJyb3IoKTtcblx0XHRtb2RhbFNlcnZpY2Uuc2hvd01vZGFsKCdkb3dubG9hZExpYk1vZGFsJyk7XG5cdH07XG5cblx0JHNjb3BlLmRvd25sb2FkSUlBcHAgPSBmdW5jdGlvbiAoZm9ybSwgaWlBcHBJbmZvKSB7XG5cdFx0aWYgKCRzY29wZS5pc0FwcEZvcm1TdWJtaXR0ZWQpIHJldHVybjtcblx0XHRmb3JtLiRzZXRTdWJtaXR0ZWQoKTtcblx0XHRpZiAoZm9ybS4kaW52YWxpZCkgcmV0dXJuO1xuXHRcdCRzY29wZS5pc0FwcEZvcm1TdWJtaXR0ZWQgPSB0cnVlO1xuXHRcdGZvcm0uJHNldFByaXN0aW5lKCk7XG5cdFx0Zm9ybS4kc2V0VW50b3VjaGVkKCk7XG5cdFx0Y2xlYXJBcHBFcnJvcigpO1xuXG5cdFx0dmFyIGRvd25sb2FkVXJsID0gJy9hcGkvaWkvYXBwP3NlY3JldFJlc3BvbnNlPScgKyBpaUFwcEluZm8ucmVjYXB0Y2hhUmVzcG9uc2U7XG5cdFx0d2luZG93LmxvY2F0aW9uLmhyZWYgPSBkb3dubG9hZFVybDtcblx0fTtcblx0JHNjb3BlLmRvd25sb2FkSUlMaWIgPSBmdW5jdGlvbiAoZm9ybSwgaWlMaWJJbmZvKSB7XG5cdFx0aWYgKCRzY29wZS5pc0xpYkZvcm1TdWJtaXR0ZWQpIHJldHVybjtcblx0XHRmb3JtLiRzZXRTdWJtaXR0ZWQoKTtcblx0XHRpZiAoZm9ybS4kaW52YWxpZCkgcmV0dXJuO1xuXHRcdCRzY29wZS5pc0xpYkZvcm1TdWJtaXR0ZWQgPSB0cnVlO1xuXHRcdGZvcm0uJHNldFByaXN0aW5lKCk7XG5cdFx0Zm9ybS4kc2V0VW50b3VjaGVkKCk7XG5cdFx0Y2xlYXJMaWJFcnJvcigpO1xuXG5cdFx0dmFyIGRvd25sb2FkVXJsID0gJy9hcGkvaWkvbGliP3NlY3JldFJlc3BvbnNlPScgKyBpaUxpYkluZm8ucmVjYXB0Y2hhUmVzcG9uc2U7XG5cdFx0d2luZG93LmxvY2F0aW9uLmhyZWYgPSBkb3dubG9hZFVybDtcblx0fTtcbn1dKTsiLCIndXNlIHN0cmljdCc7XG5cbi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEVkd2FyZCBvbiAxMS84LzIwMTQuXHJcbiAqL1xuYW5ndWxhci5tb2R1bGUoJ21jbmVkd2FyZCcpLmNvbnRyb2xsZXIoJ051bWJlclByaW50ZXJDdHJsJywgWyckc2NvcGUnLCBmdW5jdGlvbiBOdW1iZXJQcmludGVyQ3RybCgkc2NvcGUpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gICRzY29wZS5yZXN1bHQgPSAnJztcblxuICAkc2NvcGUuY29udmVydFRvRW5nbGlzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICBjb252ZXJ0KGZ1bmN0aW9uIChqc29uKSB7XG4gICAgICAkc2NvcGUucmVzdWx0ID0ganNvbi5lbmdsaXNoV29yZDtcbiAgICAgICRzY29wZS4kYXBwbHkoKTtcbiAgICB9KTtcbiAgfTtcblxuICAkc2NvcGUuY29udmVydFRvUm9tYW5OdW1lcmFsID0gZnVuY3Rpb24gKCkge1xuICAgIGNvbnZlcnQoZnVuY3Rpb24gKGpzb24pIHtcbiAgICAgICRzY29wZS5yZXN1bHQgPSBqc29uLnJvbWFuTnVtZXJhbDtcbiAgICAgICRzY29wZS4kYXBwbHkoKTtcbiAgICB9KTtcbiAgfTtcblxuICBmdW5jdGlvbiBjb252ZXJ0KGNhbGxiYWNrKSB7XG4gICAgY2xlYXJUZXh0KCk7XG4gICAgdmFyIG51bWJlciA9ICRzY29wZS5udW1iZXI7XG4gICAgaWYgKG51bWJlciA9PT0gJycpIHtcbiAgICAgICRzY29wZS5lcnJvck1lc3NhZ2UgPSAnWW91IG5lZWQgdG8gZW50ZXIgc29tZXRoaW5nISc7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHJldHVybiBmZXRjaCgnL2FwaS9udW1iZXItcHJpbnRlcj9udW1iZXI9JyArIG51bWJlcikudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgIGlmIChyZXNwb25zZS5vaykge1xuICAgICAgICByZXNwb25zZS5qc29uKCkudGhlbihjYWxsYmFjayk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHJlc3BvbnNlLnRleHQoKS50aGVuKGZ1bmN0aW9uICh0ZXh0KSB7XG4gICAgICAgICRzY29wZS5lcnJvck1lc3NhZ2UgPSB0ZXh0O1xuICAgICAgICAkc2NvcGUuJGFwcGx5KCk7XG4gICAgICB9KTtcbiAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICRzY29wZS5lcnJvck1lc3NhZ2UgPSBlcnJvcjtcbiAgICAgICRzY29wZS4kYXBwbHkoKTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNsZWFyVGV4dCgpIHtcbiAgICAkc2NvcGUucmVzdWx0ID0gJyc7XG4gICAgJHNjb3BlLmVycm9yTWVzc2FnZSA9ICcnO1xuICB9XG59XSk7IiwiJ3VzZSBzdHJpY3QnO1xuXG4vKipcclxuICogQ3JlYXRlZCBieSBFZHdhcmQgb24gMi8yOC8yMDE2LlxyXG4gKi9cbmFuZ3VsYXIubW9kdWxlKCdtY25lZHdhcmQnKS5kaXJlY3RpdmUoJ2RpcmVjdG9yeScsIFsnJHJvb3RTY29wZScsIGZ1bmN0aW9uICgkcm9vdFNjb3BlKSB7XG5cdCd1c2Ugc3RyaWN0JztcblxuXHRyZXR1cm4ge1xuXHRcdHJlc3RyaWN0OiAnQUUnLFxuXHRcdHRyYW5zY2x1ZGU6IHRydWUsXG5cdFx0c2NvcGU6IHtcblx0XHRcdG5hbWU6ICc9Jyxcblx0XHRcdGlkOiAnPScsXG5cdFx0XHRkaXJlY3RvcmllczogJz0nLFxuXHRcdFx0Y2xhc3NlczogJz0nXG5cdFx0fSxcblx0XHRsaW5rOiBmdW5jdGlvbiBsaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xuXHRcdFx0c2NvcGUuc2VsZWN0Q2xhc3MgPSBmdW5jdGlvbiAoZGlyZWN0b3J5SWQsIGNsYXNzSWQpIHtcblx0XHRcdFx0JHJvb3RTY29wZS4kYnJvYWRjYXN0KCdzZWxlY3RDbGFzcycsIHtcblx0XHRcdFx0XHRkaXJlY3RvcnlJZDogZGlyZWN0b3J5SWQsXG5cdFx0XHRcdFx0Y2xhc3NJZDogY2xhc3NJZFxuXHRcdFx0XHR9KTtcblx0XHRcdH07XG5cblx0XHRcdC8vIElmIHRoZXJlIGlzIG5vIG5hbWUsIHRoaXMgaXMgYSB0ZW1wb3JhcnkgZGlyZWN0b3J5IHVzZWQgb25seSBmb3IgdGhlIHVwbG9hZFxuXHRcdFx0c2NvcGUuaXNSZWFsRGlyZWN0b3J5ID0gc2NvcGUubmFtZSAhPT0gbnVsbCAmJiBzY29wZS5uYW1lICE9PSBcIlwiO1xuXHRcdFx0c2NvcGUuc2hvd0NvbnRlbnRzID0gZmFsc2U7XG5cdFx0fSxcblx0XHR0ZW1wbGF0ZVVybDogJ3BhcnNlci9kaXJlY3RvcnkuaHRtbCdcblx0fTtcbn1dKTsiLCIndXNlIHN0cmljdCc7XG5cbi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEVkd2FyZCBvbiAyLzI4LzIwMTYuXHJcbiAqL1xuYW5ndWxhci5tb2R1bGUoJ21jbmVkd2FyZCcpLmRpcmVjdGl2ZSgnZHJhZ0FuZERyb3AnLCBbJyRyb290U2NvcGUnLCAnJHRpbWVvdXQnLCBmdW5jdGlvbiAoJHJvb3RTY29wZSwgJHRpbWVvdXQpIHtcblx0J3VzZSBzdHJpY3QnO1xuXG5cdHJldHVybiB7XG5cdFx0cmVzdHJpY3Q6ICdFJyxcblx0XHRsaW5rOiBmdW5jdGlvbiBsaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xuXHRcdFx0dmFyIGRlZmF1bHREcmFnQXJlYU1lc3NhZ2UgPSAnRHJhZyBmaWxlcyBoZXJlISc7XG5cdFx0XHRzY29wZS5kcmFnQXJlYU1lc3NhZ2UgPSBkZWZhdWx0RHJhZ0FyZWFNZXNzYWdlO1xuXHRcdFx0c2NvcGUuZHJhZ292ZXJDbGFzcyA9ICcnO1xuXHRcdFx0c2NvcGUudXBsb2FkUHJvZ3Jlc3MgPSAwO1xuXG5cdFx0XHRzY29wZS5oYW5kbGVFcnJvciA9IGZ1bmN0aW9uIChtZXNzYWdlLCBlcnJvcikge1xuXHRcdFx0XHRzY29wZS5maWxlU2VsZWN0ZWQgPSBmYWxzZTtcblx0XHRcdFx0c2NvcGUuaGFzRXJyb3IgPSB0cnVlO1xuXHRcdFx0XHRzY29wZS5sb2FkKGZhbHNlKTtcblx0XHRcdFx0c2NvcGUuZHJhZ292ZXJDbGFzcyA9ICdkcmFnb3Zlci1lcnJvcic7XG5cdFx0XHRcdHNjb3BlLmRyYWdBcmVhTWVzc2FnZSA9ICcnO1xuXHRcdFx0XHRzY29wZS5kcmFnQXJlYUVycm9yID0gbWVzc2FnZTtcblx0XHRcdFx0Y29uc29sZS5sb2coZXJyb3IsIG1lc3NhZ2UpO1xuXHRcdFx0fTtcblxuXHRcdFx0dmFyIGZpcnN0VGltZSA9IHRydWU7XG5cdFx0XHR2YXIgbG9hZGluZyA9IGZhbHNlO1xuXHRcdFx0c2NvcGUubG9hZCA9IGZ1bmN0aW9uIChpc0xvYWRpbmcpIHtcblx0XHRcdFx0c2NvcGUuZHJhZ0FyZWFFcnJvciA9ICcnO1xuXHRcdFx0XHRpZiAoaXNMb2FkaW5nKSB7XG5cdFx0XHRcdFx0bG9hZGluZyA9IHRydWU7XG5cdFx0XHRcdFx0c2NvcGUudXBsb2FkUHJvZ3Jlc3MgPSAwO1xuXHRcdFx0XHRcdGNoZWNrUHJvZ3Jlc3MoKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRsb2FkaW5nID0gZmFsc2U7XG5cdFx0XHRcdFx0aWYgKHNjb3BlLmhhc0Vycm9yKSByZXR1cm47XG5cdFx0XHRcdFx0c2NvcGUuZHJhZ0FyZWFNZXNzYWdlID0gJ0ZpbmlzaGVkISc7XG5cdFx0XHRcdFx0c2NvcGUuZHJhZ292ZXJDbGFzcyA9ICcnO1xuXHRcdFx0XHRcdHNjb3BlLnVwbG9hZFByb2dyZXNzID0gMTAwO1xuXHRcdFx0XHRcdCR0aW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdHNjb3BlLmRyYWdBcmVhTWVzc2FnZSA9IGRlZmF1bHREcmFnQXJlYU1lc3NhZ2U7XG5cdFx0XHRcdFx0XHRzY29wZS51cGxvYWRQcm9ncmVzcyA9IDA7XG5cdFx0XHRcdFx0fSwgMzAwMCk7XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0XHRmdW5jdGlvbiBjaGVja1Byb2dyZXNzKCkge1xuXHRcdFx0XHQvLyAkdGltZW91dChmdW5jdGlvbigpIHtcblx0XHRcdFx0Ly8gXHRwYXJzZXJTZXJ2aWNlLmdldFVwbG9hZFByb2dyZXNzKHNjb3BlLnNlY3JldFJlc3BvbnNlLCBzY29wZS50b2tlbikudGhlbigocmVzcG9uc2UpID0+IHtcblx0XHRcdFx0Ly8gICAgIGlmICghcmVzcG9uc2Uub2spIHJldHVybjtcblxuXHRcdFx0XHQvLyAgICAgcmVzcG9uc2UudGV4dCgpLnRoZW4oKHRleHQpID0+IHtcblx0XHRcdFx0Ly8gICAgICAgc2NvcGUudXBsb2FkUHJvZ3Jlc3MgPSB0ZXh0O1xuXHRcdFx0XHQvLyAgICAgICBpZiAobG9hZGluZykge1xuXHRcdFx0XHQvLyAgICAgICAgIGNoZWNrUHJvZ3Jlc3MoKTtcblx0XHRcdFx0Ly8gICAgICAgfVxuXHRcdFx0XHQvLyAgICAgfSk7XG5cdFx0XHRcdC8vIFx0fSk7XG5cdFx0XHRcdC8vIH0sIDMwMCk7XG5cdFx0XHR9XG5cblx0XHRcdGVsZW1lbnQuYmluZCgnZHJhZ2VudGVyJywgZnVuY3Rpb24gKGUpIHtcblx0XHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRlLm9yaWdpbmFsRXZlbnQuZGF0YVRyYW5zZmVyLmRyb3BFZmZlY3QgPSAnY29weSc7XG5cdFx0XHRcdHNjb3BlLmRyYWdvdmVyQ2xhc3MgPSAnZHJhZ292ZXInO1xuXHRcdFx0XHRzY29wZS5kcmFnQXJlYU1lc3NhZ2UgPSAnRHJvcCBmaWxlcyEnO1xuXHRcdFx0XHRzY29wZS5kcmFnQXJlYUVycm9yID0gJyc7XG5cdFx0XHRcdHNjb3BlLiRhcHBseSgpO1xuXHRcdFx0fSk7XG5cdFx0XHRlbGVtZW50LmJpbmQoJ2RyYWdsZWF2ZScsIGZ1bmN0aW9uIChlKSB7XG5cdFx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0c2NvcGUuZHJhZ292ZXJDbGFzcyA9ICcnO1xuXHRcdFx0XHRzY29wZS5kcmFnQXJlYU1lc3NhZ2UgPSAnRHJhZyBmaWxlcyBoZXJlISc7XG5cdFx0XHRcdHNjb3BlLmRyYWdBcmVhRXJyb3IgPSAnJztcblx0XHRcdFx0c2NvcGUuJGFwcGx5KCk7XG5cdFx0XHR9KTtcblx0XHRcdGVsZW1lbnQuYmluZCgnZHJhZ292ZXInLCBmdW5jdGlvbiAoZSkge1xuXHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdGUub3JpZ2luYWxFdmVudC5kYXRhVHJhbnNmZXIuZHJvcEVmZmVjdCA9ICdjb3B5Jztcblx0XHRcdFx0c2NvcGUuZHJhZ292ZXJDbGFzcyA9ICdkcmFnb3Zlcic7XG5cdFx0XHRcdHNjb3BlLmRyYWdBcmVhTWVzc2FnZSA9ICdEcm9wIGZpbGVzISc7XG5cdFx0XHRcdHNjb3BlLmRyYWdBcmVhRXJyb3IgPSAnJztcblx0XHRcdFx0c2NvcGUuJGFwcGx5KCk7XG5cdFx0XHR9KTtcblx0XHRcdGVsZW1lbnQuYmluZCgnZHJhZ2V2ZW50JywgZnVuY3Rpb24gKGUpIHtcblx0XHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0fSk7XG5cdFx0XHRlbGVtZW50LmJpbmQoJ2Ryb3AnLCBmdW5jdGlvbiAoZSkge1xuXHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cblx0XHRcdFx0dmFyIGZpbGVJZCA9IDE7IC8vIFVuaXF1ZSBpZCBmb3IgaWRlbnRpZnlpbmcgdGhlIGZpbGUgaW4gdGhlIHNlcnZlciBjYWNoZVxuXHRcdFx0XHR2YXIgb25FcnJvciA9IGZ1bmN0aW9uIG9uRXJyb3IoZXJyb3IpIHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhlcnJvcik7XG5cdFx0XHRcdH07XG5cblx0XHRcdFx0ZnVuY3Rpb24gaGFuZGxlRGlyZWN0b3J5KGl0ZW0sIGRpcmVjdG9yeSwgdG9wRGlyZWN0b3J5KSB7XG5cdFx0XHRcdFx0dmFyIHJlYWRlciA9IGl0ZW0uY3JlYXRlUmVhZGVyKCk7XG5cdFx0XHRcdFx0cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG5cdFx0XHRcdFx0XHR2YXIgaXRlcmF0aW9uQXR0ZW1wdHMgPSBbXTtcblx0XHRcdFx0XHRcdChmdW5jdGlvbiByZWFkRGlyZWN0b3J5KGRpcmVjdG9yeSwgdG9wRGlyZWN0b3J5KSB7XG5cdFx0XHRcdFx0XHRcdHJlYWRlci5yZWFkRW50cmllcyhmdW5jdGlvbiAoZW50cmllcykge1xuXHRcdFx0XHRcdFx0XHRcdGlmICghZW50cmllcy5sZW5ndGgpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFByb21pc2UuYWxsKGl0ZXJhdGlvbkF0dGVtcHRzKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gRXZlcnl0aGluZyBzaG91bGQgYmUgZG9uZSBub3chXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHJlc29sdmUodG9wRGlyZWN0b3J5KTtcblx0XHRcdFx0XHRcdFx0XHRcdH0sIG9uRXJyb3IpO1xuXHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRpdGVyYXRpb25BdHRlbXB0cy5wdXNoKFByb21pc2UuYWxsKGVudHJpZXMubWFwKGZ1bmN0aW9uIChlbnRyeSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoZW50cnkuaXNGaWxlKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZW50cnkuZmlsZShmdW5jdGlvbiAoZmlsZSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0cGFyZW50RGlyZWN0b3J5LnVwbG9hZEZpbGVzLnB1c2goZmlsZSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBBZGQgdGhlIGZpbGVJZCB0byB0aGUgZmlsZSBuYW1lLCB0byBiZSBzdHJpcHBlZCBzZXJ2ZXItc2lkZVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dmFyIG5ld0ZpbGUgPSBuZXcgUGFyc2VyRmlsZShmaWxlSWQrKywgZmlsZS5uYW1lKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGRpcmVjdG9yeS5maWxlcy5wdXNoKG5ld0ZpbGUpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuIG5ld0ZpbGU7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0fSwgZnVuY3Rpb24gKGUpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKGUpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHZhciBuZXdEaXJlY3RvcnkgPSBuZXcgUGFyc2VyRGlyZWN0b3J5KGVudHJ5Lm5hbWUsIFtdLCBbXSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gSWYgdGhpcyBpcyBpbnNpZGUgYSBkaXJlY3RvcnksIHB1dCBpdCBpbiB0aGVyZSFcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoZGlyZWN0b3J5KSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRkaXJlY3RvcnkuZGlyZWN0b3JpZXMucHVzaChuZXdEaXJlY3RvcnkpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRkaXJlY3RvcnkgPSBuZXdEaXJlY3Rvcnk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHJldHVybiBoYW5kbGVEaXJlY3RvcnkoZW50cnksIG5ld0RpcmVjdG9yeSwgdG9wRGlyZWN0b3J5KTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0fSkpKTtcblx0XHRcdFx0XHRcdFx0XHRcdC8vIENvbnRpbnVlIHJlYWRpbmcgZm9yIG1vcmUgZW50cmllc1xuXHRcdFx0XHRcdFx0XHRcdFx0cmVhZERpcmVjdG9yeShkaXJlY3RvcnksIHRvcERpcmVjdG9yeSk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdH0pKGRpcmVjdG9yeSwgdG9wRGlyZWN0b3J5KTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHZhciBldmVudCA9IGUub3JpZ2luYWxFdmVudDtcblx0XHRcdFx0aWYgKGV2ZW50KSB7XG5cdFx0XHRcdFx0dmFyIGRhdGFUcmFuc2ZlciA9IGV2ZW50LmRhdGFUcmFuc2Zlcjtcblx0XHRcdFx0XHR2YXIgaXRlbXMgPSBkYXRhVHJhbnNmZXIuaXRlbXM7XG5cdFx0XHRcdFx0dmFyIHBhcmVudERpcmVjdG9yeSA9IG5ldyBQYXJzZXJEaXJlY3RvcnkoKTtcblx0XHRcdFx0XHRwYXJlbnREaXJlY3RvcnkudXBsb2FkRmlsZXMgPSBbXTsgLy8gQWxsIG9mIHRoZSBmaWxlcyB0byB1cGxvYWRcblx0XHRcdFx0XHRpZiAoaXRlbXMubGVuZ3RoID09IDEpIHtcblx0XHRcdFx0XHRcdHZhciBpdGVtID0gaXRlbXNbMF0ud2Via2l0R2V0QXNFbnRyeSgpO1xuXHRcdFx0XHRcdFx0aWYgKGl0ZW0uaXNGaWxlKSB7XG5cdFx0XHRcdFx0XHRcdGhhbmRsZUZpbGVzKGl0ZW1zKTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdHBhcmVudERpcmVjdG9yeS5uYW1lID0gaXRlbS5uYW1lO1xuXHRcdFx0XHRcdFx0XHRoYW5kbGVEaXJlY3RvcnkoaXRlbSwgcGFyZW50RGlyZWN0b3J5LCBwYXJlbnREaXJlY3RvcnkpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xuXHRcdFx0XHRcdFx0XHRcdG5vdGlmeURpcmVjdG9yeURvbmUocmVzdWx0KTtcblx0XHRcdFx0XHRcdFx0fSwgb25FcnJvcik7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGhhbmRsZUZpbGVzKGl0ZW1zKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRmdW5jdGlvbiBoYW5kbGVGaWxlcyhpdGVtcykge1xuXHRcdFx0XHRcdHZhciB3ZWJraXRJdGVtcyA9IFtdO1xuXHRcdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgaXRlbXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0XHRcdHdlYmtpdEl0ZW1zLnB1c2goaXRlbXNbaV0ud2Via2l0R2V0QXNFbnRyeSgpKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Ly8gTmVlZCB0byB3cmFwIHRoaXMgaW4gYW4gZW1wdHkgZGlyZWN0b3J5XG5cdFx0XHRcdFx0cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG5cdFx0XHRcdFx0XHR2YXIgaXRlcmF0aW9uQXR0ZW1wdHMgPSBbXTtcblx0XHRcdFx0XHRcdGl0ZXJhdGlvbkF0dGVtcHRzLnB1c2goUHJvbWlzZS5hbGwod2Via2l0SXRlbXMubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG5cdFx0XHRcdFx0XHRcdGlmIChpdGVtLmlzRmlsZSkge1xuXHRcdFx0XHRcdFx0XHRcdHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0aXRlbS5maWxlKGZ1bmN0aW9uIChmaWxlKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHBhcmVudERpcmVjdG9yeS51cGxvYWRGaWxlcy5wdXNoKGZpbGUpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBBZGQgdGhlIGZpbGVJZCB0byB0aGUgZmlsZSBuYW1lLCB0byBiZSBzdHJpcHBlZCBzZXJ2ZXItc2lkZVxuXHRcdFx0XHRcdFx0XHRcdFx0XHR2YXIgbmV3RmlsZSA9IG5ldyBQYXJzZXJGaWxlKGZpbGVJZCsrLCBmaWxlLm5hbWUpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRwYXJlbnREaXJlY3RvcnkuZmlsZXMucHVzaChuZXdGaWxlKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0cmVzb2x2ZShwYXJlbnREaXJlY3RvcnkpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gbmV3RmlsZTtcblx0XHRcdFx0XHRcdFx0XHRcdH0sIG9uRXJyb3IpO1xuXHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdHZhciBuZXdEaXJlY3RvcnkgPSBuZXcgUGFyc2VyRGlyZWN0b3J5KGl0ZW0ubmFtZSwgW10sIFtdKTtcblx0XHRcdFx0XHRcdFx0XHQvLyBJZiB0aGlzIGlzIGluc2lkZSBhIGRpcmVjdG9yeSwgcHV0IGl0IGluIHRoZXJlIVxuXHRcdFx0XHRcdFx0XHRcdGlmIChwYXJlbnREaXJlY3RvcnkpIHtcblx0XHRcdFx0XHRcdFx0XHRcdHBhcmVudERpcmVjdG9yeS5kaXJlY3Rvcmllcy5wdXNoKG5ld0RpcmVjdG9yeSk7XG5cdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRcdHBhcmVudERpcmVjdG9yeSA9IG5ld0RpcmVjdG9yeTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuIGhhbmRsZURpcmVjdG9yeShpdGVtLCBuZXdEaXJlY3RvcnksIHBhcmVudERpcmVjdG9yeSk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0pKSk7XG5cdFx0XHRcdFx0XHRQcm9taXNlLmFsbChpdGVyYXRpb25BdHRlbXB0cykudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG5cdFx0XHRcdFx0XHRcdC8vIEV2ZXJ5dGhpbmcgc2hvdWxkIGJlIGRvbmUgbm93IVxuXHRcdFx0XHRcdFx0XHRyZXNvbHZlKHBhcmVudERpcmVjdG9yeSk7XG5cdFx0XHRcdFx0XHR9LCBvbkVycm9yKTtcblx0XHRcdFx0XHR9KS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcblx0XHRcdFx0XHRcdG5vdGlmeURpcmVjdG9yeURvbmUocmVzdWx0KTtcblx0XHRcdFx0XHR9LCBvbkVycm9yKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGZ1bmN0aW9uIG5vdGlmeURpcmVjdG9yeURvbmUoZmlsZSkge1xuXHRcdFx0XHRcdHNjb3BlLmRyYWdvdmVyQ2xhc3MgPSAnZHJvcHBlZCc7XG5cdFx0XHRcdFx0c2NvcGUuZHJhZ0FyZWFNZXNzYWdlID0gJ1JlYWR5IGZvciBVcGxvYWQhJztcblx0XHRcdFx0XHRzY29wZS4kYXBwbHkoKTtcblx0XHRcdFx0XHRzY29wZS5maWxlc0Ryb3BwZWQoZmlsZSk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH0sXG5cdFx0dGVtcGxhdGVVcmw6ICdwYXJzZXIvZmlsZVVwbG9hZC5odG1sJ1xuXHR9O1xufV0pOyIsIid1c2Ugc3RyaWN0JztcblxuLyoqXHJcbiAqIENyZWF0ZWQgYnkgRWR3YXJkIG9uIDIvMjYvMjAxNi5cclxuICovXG5cbmFuZ3VsYXIubW9kdWxlKCdtY25lZHdhcmQnKS5jb250cm9sbGVyKCdQYXJzZXJDdHJsJywgWyckcm9vdFNjb3BlJywgJyRzY29wZScsICckd2luZG93JywgJ3BhcnNlclNlcnZpY2UnLCAncmVjYXB0Y2hhU2VydmljZScsICdtb2RhbFNlcnZpY2UnLCBmdW5jdGlvbiBQYXJzZXJDdHJsKCRyb290U2NvcGUsICRzY29wZSwgJHdpbmRvdywgcGFyc2VyU2VydmljZSwgcmVjYXB0Y2hhU2VydmljZSwgbW9kYWxTZXJ2aWNlKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICBpZiAoL0FuZHJvaWR8d2ViT1N8aVBob25lfGlQYWR8aVBvZHxCbGFja0JlcnJ5fElFTW9iaWxlfE9wZXJhIE1pbmkvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpKSB7XG4gICAgbW9kYWxTZXJ2aWNlLnNob3dNb2RhbCgnZGV2aWNlTW9kYWwnKTtcbiAgfVxuXG4gICRzY29wZS51cGxvYWRJbmZvID0ge307XG4gICRzY29wZS5pc0Zvcm1TdWJtaXR0ZWQgPSBmYWxzZTtcbiAgJHNjb3BlLmlzUGFyc2luZ0NvbXBsZXRlID0gZmFsc2U7XG4gICRzY29wZS5maWxlVXBsb2FkTWVzc2FnZSA9IFwiQ2xpY2sgdG8gY2hvb3NlIGEgSmF2YSBmaWxlIG9yIHByb2plY3QgdG8gcGFyc2UhXCI7XG4gICRzY29wZS5lcnJvck1lc3NhZ2UgPSBcIlwiO1xuICAkc2NvcGUuZmlsZVNlbGVjdGVkID0gZmFsc2U7XG4gIHZhciBlcnJvclBhcnNpbmdNZXNzYWdlID0gXCJTb21ldGhpbmcgd2VudCB3cm9uZyBwYXJzaW5nIGZpbGVzLi4uUGxlYXNlIHRyeSBhZ2Fpbi5cIjtcbiAgdmFyIGVycm9yVXBsb2FkaW5nTWVzc2FnZSA9IFwiU29tZXRoaW5nIHdlbnQgd3JvbmcgdXBsb2FkaW5nIGZpbGVzLi4uUGxlYXNlIHRyeSBhZ2Fpbi5cIjtcblxuICAkKCcjZmlsZS11cGxvYWQnKS5jaGFuZ2UoZnVuY3Rpb24gKCkge1xuICAgIHZhciBmaWxlcyA9IHRoaXMuZmlsZXM7XG4gICAgaWYgKCFmaWxlcyB8fCBmaWxlcy5sZW5ndGggPT09IDApIHtcbiAgICAgIGNvbnNvbGUubG9nKCdObyBmaWxlcyBzZWxlY3RlZC4uLicpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgZmlsZU5hbWUgPSBmaWxlc1swXS5uYW1lO1xuICAgICRzY29wZS5maWxlcyA9IGZpbGVzO1xuXG4gICAgJHNjb3BlLmZpbGVOYW1lID0gZmlsZU5hbWU7XG4gICAgJHNjb3BlLmZpbGVTZWxlY3RlZCA9IHRydWU7XG4gICAgJHNjb3BlLiRhcHBseSgpO1xuICB9KTtcblxuICBmdW5jdGlvbiBlcnJvckhhbmRsZXIobWVzc2FnZSwgZXJyb3IpIHtcbiAgICB2YXIgZXJyb3JNZXNzYWdlID0gJyc7XG4gICAgdmFyIGRhdGEgPSBlcnJvciAmJiBlcnJvci5kYXRhID8gZXJyb3IuZGF0YSA6IG51bGwsXG4gICAgICAgIGVycm9ycyA9IGRhdGEgJiYgZGF0YS5lcnJvcnMgPyBkYXRhLmVycm9ycyA6IFtdO1xuICAgIGlmIChlcnJvcnMubGVuZ3RoID4gMCkge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlcnJvcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZXJyb3JNZXNzYWdlICs9IGVycm9yc1tpXTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZXJyb3JNZXNzYWdlID0gbWVzc2FnZTtcbiAgICB9XG4gICAgJHNjb3BlLmhhbmRsZUVycm9yKGVycm9yTWVzc2FnZSwgZXJyb3IpO1xuICAgICRzY29wZS5wYXJzaW5nQ29tcGxldGUgPSBmYWxzZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHVwbG9hZEZpbGVzKHNlY3JldFJlc3BvbnNlLCB0b2tlbikge1xuICAgICRzY29wZS5zZWNyZXRSZXNwb25zZSA9IHNlY3JldFJlc3BvbnNlO1xuICAgICRzY29wZS50b2tlbiA9IHRva2VuO1xuXG4gICAgcGFyc2VyU2VydmljZS51cGxvYWRGaWxlcygkc2NvcGUuZmlsZXMsIHNlY3JldFJlc3BvbnNlLCB0b2tlbikudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgcmVzcG9uc2UudGV4dCgpLnRoZW4oZnVuY3Rpb24gKHRleHQpIHtcbiAgICAgICAgICBlcnJvckhhbmRsZXIodGV4dCk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICByZXNwb25zZS5qc29uKCkudGhlbihmdW5jdGlvbiAodXBsb2FkUmVzcG9uc2UpIHtcbiAgICAgICAgJHNjb3BlLnVwbG9hZERpcmVjdG9yeS50b2tlbiA9IHVwbG9hZFJlc3BvbnNlLnRva2VuO1xuICAgICAgICAkc2NvcGUudXBsb2FkRGlyZWN0b3J5LmZpbGVJZHMgPSB1cGxvYWRSZXNwb25zZS5maWxlSWRzO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIC8vIFNlbmQgYmFjayB0aGUgdXBsb2FkUmVzcG9uc2UgYWxvbmcgd2l0aCB0aGUgZGlyZWN0b3J5IHN0cnVjdHVyZVxuICAgICAgICAgIC8vIFRoaXMgaXMgd2hlbiB0aGUgYWN0dWFsIHBhcnNpbmcgb2YgdGhlIGZpbGVzIHdpbGwgaGFwcGVuXG4gICAgICAgICAgcGFyc2VyU2VydmljZS5wYXJzZUZpbGVzKCRzY29wZS51cGxvYWREaXJlY3RvcnksIHNlY3JldFJlc3BvbnNlLCB0b2tlbikudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgICAgcmVzcG9uc2UudGV4dCgpLnRoZW4oZnVuY3Rpb24gKHRleHQpIHtcbiAgICAgICAgICAgICAgICBlcnJvckhhbmRsZXIodGV4dCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICRzY29wZS5kcmFnQXJlYU1lc3NhZ2UgPSAnQW5hbHl6aW5nIHlvdXIgZmlsZXMuLi4nO1xuICAgICAgICAgICAgICAkc2NvcGUuJGFwcGx5KCk7XG4gICAgICAgICAgICAgIHJlc3BvbnNlLmpzb24oKS50aGVuKGZ1bmN0aW9uIChkaXJlY3RvcnlSZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIHBhcnNlclNlcnZpY2Uuc2F2ZURpcmVjdG9yeShkaXJlY3RvcnlSZXNwb25zZSk7XG5cbiAgICAgICAgICAgICAgICAkc2NvcGUubG9hZChmYWxzZSk7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmZpbGVTZWxlY3RlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICRzY29wZS5pc1BhcnNpbmdDb21wbGV0ZSA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICAkc2NvcGUudXBsb2FkRGlyZWN0b3J5ID0ge307XG4gICAgICAgICAgICAgICAgJHNjb3BlLmRpcmVjdG9yeSA9IGRpcmVjdG9yeVJlc3BvbnNlO1xuICAgICAgICAgICAgICAgIHZhciBjbGFzc09iamVjdCA9IGZpbmRGaXJzdEZpbGVJbkRpcmVjdG9yeShkaXJlY3RvcnlSZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmNsYXNzT2JqZWN0ID0gY2xhc3NPYmplY3Q7XG4gICAgICAgICAgICAgICAgc3R5bGVMaW5lTnVtYmVycyhjbGFzc09iamVjdCk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgZXJyb3JIYW5kbGVyKGVycm9yUGFyc2luZ01lc3NhZ2UsIGVycm9yKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBlcnJvckhhbmRsZXIoZXJyb3JQYXJzaW5nTWVzc2FnZSwgZXJyb3IpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gICRzY29wZS51cGxvYWRGaWxlID0gZnVuY3Rpb24gKGZvcm0sIHVwbG9hZEluZm8pIHtcbiAgICBpZiAoJHNjb3BlLmlzRm9ybVN1Ym1pdHRlZCkgcmV0dXJuO1xuICAgIGZvcm0uJHNldFN1Ym1pdHRlZCgpO1xuICAgIGlmIChmb3JtLiRpbnZhbGlkKSByZXR1cm47XG4gICAgJHNjb3BlLmlzRm9ybVN1Ym1pdHRlZCA9IHRydWU7XG4gICAgZm9ybS4kc2V0UHJpc3RpbmUoKTtcbiAgICBmb3JtLiRzZXRVbnRvdWNoZWQoKTtcbiAgICAkc2NvcGUubG9hZCh0cnVlKTtcbiAgICAkc2NvcGUuZHJhZ0FyZWFNZXNzYWdlID0gJ1VwbG9hZGluZyB5b3VyIGZpbGVzLi4uJztcbiAgICByZWNhcHRjaGFTZXJ2aWNlLnZlcmlmeSh1cGxvYWRJbmZvLnJlY2FwdGNoYVJlc3BvbnNlLCB1cGxvYWRGaWxlcywgZXJyb3JIYW5kbGVyKTtcbiAgfTtcblxuICAkc2NvcGUuc2VsZWN0Q2xhc3NPYmplY3QgPSBmdW5jdGlvbiAoZmlsZSkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgJHNjb3BlLmNsYXNzT2JqZWN0cy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGNPYmplY3QgPSAkc2NvcGUuY2xhc3NPYmplY3RzW2ldO1xuICAgICAgaWYgKGNPYmplY3QuZmlsZU5hbWUgPT09IGZpbGUuZmlsZU5hbWUpIHtcbiAgICAgICAgJHNjb3BlLmNsYXNzT2JqZWN0ID0gY09iamVjdDtcbiAgICAgIH1cbiAgICAgIC8vIFRoaXMgc2hvdWxkIGJlIHNhZmUgc2luY2Ugd2Ugc2hvdWxkIGFsd2F5cyBoYXZlIHRoZSBzYW1lIG51bWJlciBvZiBmaWxlTmFtZXMgYW5kIGNsYXNzT2JqZWN0c1xuICAgICAgJHNjb3BlLmZpbGVOYW1lc1tpXS5pc1NlbGVjdGVkID0gZmFsc2U7XG4gICAgfVxuICAgIGZpbGUuaXNTZWxlY3RlZCA9IHRydWU7XG4gICAgc3R5bGVMaW5lTnVtYmVycygkc2NvcGUuY2xhc3NPYmplY3QpO1xuICB9O1xuXG4gICRzY29wZS5maWxlc0Ryb3BwZWQgPSBmdW5jdGlvbiAoZGlyZWN0b3J5KSB7XG4gICAgJHNjb3BlLmZpbGVOYW1lID0gZGlyZWN0b3J5Lm5hbWUgPyBkaXJlY3RvcnkubmFtZSA6IGRpcmVjdG9yeS51cGxvYWRGaWxlcy5sZW5ndGggKyAnIEZpbGVzJztcbiAgICAkc2NvcGUuZmlsZXMgPSBkaXJlY3RvcnkudXBsb2FkRmlsZXM7XG4gICAgJHNjb3BlLmZpbGVTZWxlY3RlZCA9IHRydWU7XG4gICAgJHNjb3BlLnVwbG9hZERpcmVjdG9yeSA9IGRpcmVjdG9yeTtcbiAgICAkc2NvcGUuJGFwcGx5KCk7IC8vIE5lZWQgdG8gYXBwbHkgYmVjYXVzZSB0aGlzIGlzIGNvbWluZyBmcm9tIHRoZSBmaWxlVXBsb2FkRGlyZWN0aXZlXG4gIH07XG5cbiAgJHNjb3BlLm1vdmVUb0xpbmUgPSBmdW5jdGlvbiAoY29udGVudCkge1xuICAgIHZhciBsaW5lTnVtYmVyID0gY29udGVudC5saW5lTnVtYmVyO1xuICAgIHZhciBlbGVtZW50ID0gJCgnIycgKyBsaW5lTnVtYmVyKTtcbiAgICBlbGVtZW50LmFkZENsYXNzKCdsaW5lLWFuaW1hdGlvbi1pbicpO1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgZWxlbWVudC5hZGRDbGFzcygnbGluZS1hbmltYXRpb24tb3V0Jyk7XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZWxlbWVudC5yZW1vdmVDbGFzcygnbGluZS1hbmltYXRpb24taW4nKTtcbiAgICAgICAgZWxlbWVudC5yZW1vdmVDbGFzcygnbGluZS1hbmltYXRpb24tb3V0Jyk7XG4gICAgICB9LCAxNTAwKTtcbiAgICB9LCAzMDAwKTtcbiAgICAkKCcjY2xhc3NDb250ZW50JykuYW5pbWF0ZSh7XG4gICAgICBzY3JvbGxUb3A6IGVsZW1lbnQub2Zmc2V0KCkudG9wIC0gMjAwXG4gICAgfSwgNTAwKTtcbiAgfTtcbiAgJHJvb3RTY29wZS4kb24oJ3NlbGVjdENsYXNzJywgZnVuY3Rpb24gKGUsIGFyZ3MpIHtcbiAgICB2YXIgY2xhc3NPYmplY3QgPSBzZWFyY2hEaXJlY3RvcnkoJHNjb3BlLmRpcmVjdG9yeSwgYXJncy5kaXJlY3RvcnlJZCwgYXJncy5jbGFzc0lkKTtcbiAgICBpZiAoY2xhc3NPYmplY3QpIHtcbiAgICAgICRzY29wZS5jbGFzc09iamVjdCA9IGNsYXNzT2JqZWN0O1xuICAgICAgc3R5bGVMaW5lTnVtYmVycyhjbGFzc09iamVjdCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICRzY29wZS5lcnJvck1lc3NhZ2UgPSAnQ291bGQgbm90IGZpbmQgY2xhc3MuJztcbiAgICB9XG4gIH0pO1xuICBmdW5jdGlvbiBzZWFyY2hEaXJlY3RvcnkoZGlyZWN0b3J5LCBkaXJlY3RvcnlJZCwgY2xhc3NJZCkge1xuICAgIHZhciBjbGFzc09iamVjdDtcbiAgICBpZiAoZGlyZWN0b3J5SWQgPT09IGRpcmVjdG9yeS5pZCkge1xuICAgICAgaWYgKGRpcmVjdG9yeS5jbGFzc2VzKSB7XG4gICAgICAgIGNsYXNzT2JqZWN0ID0gc2VhcmNoQ2xhc3Nlc0luRGlyZWN0b3J5KGRpcmVjdG9yeS5jbGFzc2VzLCBjbGFzc0lkKTtcbiAgICAgICAgaWYgKGNsYXNzT2JqZWN0KSByZXR1cm4gY2xhc3NPYmplY3Q7XG4gICAgICB9XG4gICAgfVxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGlyZWN0b3J5LmRpcmVjdG9yaWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgY2hpbGREaXJlY3RvcnkgPSBkaXJlY3RvcnkuZGlyZWN0b3JpZXNbaV07XG4gICAgICBjbGFzc09iamVjdCA9IHNlYXJjaERpcmVjdG9yeShjaGlsZERpcmVjdG9yeSwgZGlyZWN0b3J5SWQsIGNsYXNzSWQpO1xuICAgICAgaWYgKGNsYXNzT2JqZWN0KSByZXR1cm4gY2xhc3NPYmplY3Q7XG4gICAgfVxuICB9XG4gIGZ1bmN0aW9uIHNlYXJjaENsYXNzZXNJbkRpcmVjdG9yeShjbGFzc2VzLCBjbGFzc0lkKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjbGFzc2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgYyA9IGNsYXNzZXNbaV07XG4gICAgICBpZiAoYy5pZCA9PSBjbGFzc0lkKSB7XG4gICAgICAgIHJldHVybiBjO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBmdW5jdGlvbiBmaW5kRmlyc3RGaWxlSW5EaXJlY3RvcnkoZGlyZWN0b3J5KSB7XG4gICAgaWYgKGRpcmVjdG9yeS5jbGFzc2VzICYmIGRpcmVjdG9yeS5jbGFzc2VzLmxlbmd0aCA+IDApIHtcbiAgICAgIHJldHVybiBkaXJlY3RvcnkuY2xhc3Nlc1swXTtcbiAgICB9XG4gICAgaWYgKGRpcmVjdG9yeS5kaXJlY3Rvcmllcykge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkaXJlY3RvcnkuZGlyZWN0b3JpZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY2xhc3NPYmplY3QgPSBmaW5kRmlyc3RGaWxlSW5EaXJlY3RvcnkoZGlyZWN0b3J5LmRpcmVjdG9yaWVzW2ldKTtcbiAgICAgICAgaWYgKGNsYXNzT2JqZWN0KSByZXR1cm4gY2xhc3NPYmplY3Q7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLy8gRk9SIERFQlVHR0lORyBQVVJQT1NFUyFcbiAgJHNjb3BlLmRpcmVjdG9yeSA9IHBhcnNlclNlcnZpY2UuZ2V0RGlyZWN0b3J5KCk7XG4gIGlmICgkc2NvcGUuZGlyZWN0b3J5KSB7XG4gICAgJHNjb3BlLmlzUGFyc2luZ0NvbXBsZXRlID0gdHJ1ZTtcbiAgICB2YXIgY2xhc3NPYmplY3QgPSBmaW5kRmlyc3RGaWxlSW5EaXJlY3RvcnkoJHNjb3BlLmRpcmVjdG9yeSk7XG4gICAgaWYgKGNsYXNzT2JqZWN0KSB7XG4gICAgICAkc2NvcGUuY2xhc3NPYmplY3QgPSBjbGFzc09iamVjdDtcbiAgICAgIHN0eWxlTGluZU51bWJlcnMoY2xhc3NPYmplY3QpO1xuICAgIH0gZWxzZSB7XG4gICAgICAkc2NvcGUuZXJyb3JNZXNzYWdlID0gJ0NvdWxkIG5vdCBmaW5kIGFueSBmaWxlcyBpbiBkaXJlY3RvcnkgJyArICRzY29wZS5kaXJlY3RvcnkubmFtZSArICcuJztcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBzZXRGaWxlTmFtZXMoY2xhc3NPYmplY3RzKSB7XG4gICAgdmFyIGZpbGVOYW1lcyA9IFtdO1xuICAgIGFuZ3VsYXIuZm9yRWFjaChjbGFzc09iamVjdHMsIGZ1bmN0aW9uICh2YWx1ZSwga2V5KSB7XG4gICAgICBmaWxlTmFtZXMucHVzaCh7XG4gICAgICAgIGZpbGVOYW1lOiB2YWx1ZS5maWxlTmFtZSxcbiAgICAgICAgaXNTZWxlY3RlZDogZmFsc2VcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgICRzY29wZS5maWxlTmFtZXMgPSBmaWxlTmFtZXM7XG4gIH1cblxuICAvLyBUaGFua3MgdG86IGh0dHBzOi8vanNmaWRkbGUubmV0L3RvdmljL0FicFJEL1xuICBmdW5jdGlvbiBzdHlsZUxpbmVOdW1iZXJzKGNsYXNzT2JqZWN0KSB7XG4gICAgdmFyIHByZTtcbiAgICAkKCcjY2xhc3NDb250ZW50JykuZW1wdHkoKTtcbiAgICBpZiAoY2xhc3NPYmplY3QuY29kZVRhZykge1xuICAgICAgcHJlID0gY2xhc3NPYmplY3QuY29kZVRhZztcbiAgICB9IGVsc2Uge1xuICAgICAgcHJlID0gJCgnPGNvZGUvPicsIHtcbiAgICAgICAgaWQ6ICdjb2RlJyxcbiAgICAgICAgdGV4dDogY2xhc3NPYmplY3QuY2xhc3NDb250ZW50XG4gICAgICB9KTtcbiAgICAgIHZhciBwcmVMZW5ndGggPSBwcmUubGVuZ3RoO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcmVMZW5ndGg7IGkrKykge1xuICAgICAgICBwcmVbaV0uaW5uZXJIVE1MID0gJzxzcGFuIGNsYXNzPVwibGluZS1udW1iZXJcIj48L3NwYW4+JyArIHByZVtpXS5pbm5lckhUTUwgKyAnPHNwYW4gY2xhc3M9XCJjbFwiPjwvc3Bhbj4nO1xuICAgICAgICB2YXIgbnVtID0gcHJlW2ldLmlubmVySFRNTC5zcGxpdCgvXFxuLykubGVuZ3RoO1xuICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG51bTsgaisrKSB7XG4gICAgICAgICAgdmFyIGxpbmVOdW1iZXJFbGVtZW50ID0gcHJlW2ldLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdzcGFuJylbMF07XG4gICAgICAgICAgdmFyIG51bWJlciA9IGogKyAxO1xuICAgICAgICAgIGxpbmVOdW1iZXJFbGVtZW50LmlubmVySFRNTCArPSAnPHNwYW4gaWQ9XCInICsgbnVtYmVyICsgJ1wiPicgKyBudW1iZXIgKyAnPC9zcGFuPic7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8vIENhY2hlIHRoZSBjb2RlIHRhZyB0byBhdm9pZCBwYXJzaW5nIGFnYWluIGZvciBtdWx0aXBsZSBzZWxlY3RzXG4gICAgICBjbGFzc09iamVjdC5jb2RlVGFnID0gcHJlO1xuICAgIH1cbiAgICBwcmUuYXBwZW5kVG8oJyNjbGFzc0NvbnRlbnQnKTtcbiAgfVxufV0pOyIsIid1c2Ugc3RyaWN0JztcblxuLyoqXHJcbiAqIENyZWF0ZWQgYnkgRWR3YXJkIG9uIDIvMjYvMjAxNi5cclxuICovXG5hbmd1bGFyLm1vZHVsZSgnbWNuZWR3YXJkJykuc2VydmljZSgncGFyc2VyU2VydmljZScsIFsnJGh0dHAnLCBmdW5jdGlvbiAoJGh0dHApIHtcblx0J3VzZSBzdHJpY3QnO1xuXG5cdHZhciBwYXJzZXJTZXJ2aWNlID0ge307XG5cblx0cGFyc2VyU2VydmljZS51cGxvYWRGaWxlcyA9IGZ1bmN0aW9uIChmaWxlcywgc2VjcmV0UmVzcG9uc2UsIHRva2VuKSB7XG5cdFx0dmFyIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XG5cdFx0YW5ndWxhci5mb3JFYWNoKGZpbGVzLCBmdW5jdGlvbiAodmFsdWUsIGtleSkge1xuXHRcdFx0Zm9ybURhdGEuYXBwZW5kKCdmaWxlcycsIHZhbHVlKTtcblx0XHR9KTtcblxuXHRcdHZhciB1cmwgPSAnL2FwaS9wYXJzZXIvZmlsZXM/c2VjcmV0UmVzcG9uc2U9JyArIHNlY3JldFJlc3BvbnNlICsgJyZyZXF1ZXN0VG9rZW49JyArIHRva2VuO1xuXHRcdHJldHVybiBmZXRjaCh1cmwsIHtcblx0XHRcdG1ldGhvZDogJ1BPU1QnLFxuXHRcdFx0Ym9keTogZm9ybURhdGFcblx0XHR9KTtcblx0fTtcblxuXHRwYXJzZXJTZXJ2aWNlLnBhcnNlRmlsZXMgPSBmdW5jdGlvbiAoZGlyZWN0b3J5LCBzZWNyZXRSZXNwb25zZSwgdG9rZW4pIHtcblx0XHRkaXJlY3RvcnkudXBsb2FkRmlsZXMgPSBudWxsO1xuXHRcdHZhciB1cmwgPSAnL2FwaS9wYXJzZXIvcGFyc2U/c2VjcmV0UmVzcG9uc2U9JyArIHNlY3JldFJlc3BvbnNlICsgJyZyZXF1ZXN0VG9rZW49JyArIHRva2VuO1xuXHRcdHJldHVybiBmZXRjaCh1cmwsIHtcblx0XHRcdG1ldGhvZDogJ1BPU1QnLFxuXHRcdFx0aGVhZGVyczoge1xuXHRcdFx0XHQnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuXHRcdFx0XHQnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG5cdFx0XHR9LFxuXHRcdFx0Ym9keTogSlNPTi5zdHJpbmdpZnkoZGlyZWN0b3J5KVxuXHRcdH0pO1xuXHR9O1xuXG5cdHBhcnNlclNlcnZpY2UuZ2V0VXBsb2FkUHJvZ3Jlc3MgPSBmdW5jdGlvbiAoc2VjcmV0UmVzcG9uc2UsIHRva2VuLCByZXNwb25zZUZ1bmN0aW9uKSB7XG5cdFx0cmV0dXJuIGZldGNoKCcvYXBpL3BhcnNlci9wcm9ncmVzcz9zZWNyZXRSZXNwb25zZT0nICsgc2VjcmV0UmVzcG9uc2UgKyAnJnJlcXVlc3RUb2tlbj0nICsgdG9rZW4pO1xuXHR9O1xuXG5cdHBhcnNlclNlcnZpY2Uuc2F2ZUNsYXNzZXMgPSBmdW5jdGlvbiAoY2xhc3NPYmplY3RzKSB7XG5cdFx0aWYgKGNsYXNzT2JqZWN0cykge1xuXHRcdFx0bG9jYWxTdG9yYWdlLmNsYXNzT2JqZWN0cyA9IEpTT04uc3RyaW5naWZ5KGNsYXNzT2JqZWN0cyk7XG5cdFx0XHRwYXJzZXJTZXJ2aWNlLmNsYXNzT2JqZWN0cyA9IGNsYXNzT2JqZWN0cztcblx0XHR9IGVsc2UgY29uc29sZS5sb2coJ05vIGNsYXNzT2JqZWN0cyB0byBzYXZlLi4uJyk7XG5cdH07XG5cdHBhcnNlclNlcnZpY2UuZ2V0Q2xhc3NlcyA9IGZ1bmN0aW9uICgpIHtcblx0XHR2YXIgY2xhc3NPYmplY3RzID0gbG9jYWxTdG9yYWdlLmNsYXNzT2JqZWN0cyA/IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmNsYXNzT2JqZWN0cykgOiBudWxsO1xuXHRcdHJldHVybiBjbGFzc09iamVjdHM7XG5cdH07XG5cblx0cGFyc2VyU2VydmljZS5zYXZlRGlyZWN0b3J5ID0gZnVuY3Rpb24gKGRpcmVjdG9yeSkge1xuXHRcdGlmIChkaXJlY3RvcnkpIHtcblx0XHRcdGxvY2FsU3RvcmFnZS5kaXJlY3RvcnkgPSBKU09OLnN0cmluZ2lmeShkaXJlY3RvcnkpO1xuXHRcdFx0cGFyc2VyU2VydmljZS5kaXJlY3RvcnkgPSBkaXJlY3Rvcnk7XG5cdFx0fSBlbHNlIGNvbnNvbGUubG9nKCdObyBkaXJlY3RvcnkgdG8gc2F2ZS4uLicpO1xuXHR9O1xuXHRwYXJzZXJTZXJ2aWNlLmdldERpcmVjdG9yeSA9IGZ1bmN0aW9uICgpIHtcblx0XHR2YXIgZGlyZWN0b3J5ID0gbG9jYWxTdG9yYWdlLmRpcmVjdG9yeSA/IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmRpcmVjdG9yeSkgOiBudWxsO1xuXHRcdHJldHVybiBkaXJlY3Rvcnk7XG5cdH07XG5cblx0cmV0dXJuIHBhcnNlclNlcnZpY2U7XG59XSk7IiwiJ3VzZSBzdHJpY3QnO1xuXG4vKipcclxuICogQ3JlYXRlZCBieSBFZHdhcmQgb24gMi8yOC8yMDE2LlxyXG4gKi9cblxuYW5ndWxhci5tb2R1bGUoJ21jbmVkd2FyZCcpLmRpcmVjdGl2ZSgnc3RydWN0dXJlJywgWyckcm9vdFNjb3BlJywgZnVuY3Rpb24gKCRyb290U2NvcGUpIHtcblx0J3VzZSBzdHJpY3QnO1xuXG5cdHJldHVybiB7XG5cdFx0cmVzdHJpY3Q6ICdFJyxcblx0XHR0cmFuc2NsdWRlOiB0cnVlLFxuXHRcdHNjb3BlOiB7XG5cdFx0XHR0aXRsZTogJ0AnLFxuXHRcdFx0Y29udGVudHM6ICc9J1xuXHRcdH0sXG5cdFx0Y29udHJvbGxlcjogZnVuY3Rpb24gY29udHJvbGxlcigkc2NvcGUsICRlbGVtZW50LCAkdGltZW91dCkge30sXG5cdFx0bGluazogZnVuY3Rpb24gbGluayhzY29wZSwgZWxlbWVudCwgYXR0cnMpIHt9LFxuXHRcdHRlbXBsYXRlVXJsOiAncGFyc2VyL3N0cnVjdHVyZS5odG1sJ1xuXHR9O1xufV0pOyIsIid1c2Ugc3RyaWN0JztcblxuLyoqXHJcbiAqIENyZWF0ZWQgYnkgRWR3YXJkIG9uIDEwLzE4LzIwMTQuXHJcbiAqL1xuYW5ndWxhci5tb2R1bGUoJ21jbmVkd2FyZCcpLmZhY3RvcnkoJ21vZGFsU2VydmljZScsIFsnJHRpbWVvdXQnLCBmdW5jdGlvbiAoJHRpbWVvdXQpIHtcblx0J3VzZSBzdHJpY3QnO1xuXG5cdHZhciBtb2RhbFNlcnZpY2UgPSB7fTtcblx0dmFyIG92ZXJsYXksIG1vZGFsLCBjbG9zZTtcblxuXHRmdW5jdGlvbiByZW1vdmVNb2RhbChoYXNQZXJzcGVjdGl2ZSkge1xuXHRcdGNsYXNzaWUucmVtb3ZlKG1vZGFsLCAnbWQtc2hvdycpO1xuXHR9XG5cblx0ZnVuY3Rpb24gcmVtb3ZlTW9kYWxIYW5kbGVyKCkge1xuXHRcdHJlbW92ZU1vZGFsKCk7XG5cdH1cblxuXHRtb2RhbFNlcnZpY2Uuc2hvd01vZGFsID0gZnVuY3Rpb24gKG1vZGFsSWQpIHtcblx0XHRtb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyMnICsgbW9kYWxJZCk7XG5cdFx0Y2xhc3NpZS5hZGQobW9kYWwsICdtZC1zaG93Jyk7XG5cblx0XHRvdmVybGF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI292ZXJsYXktJyArIG1vZGFsSWQpO1xuXHRcdG92ZXJsYXkucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCByZW1vdmVNb2RhbEhhbmRsZXIpO1xuXHRcdG92ZXJsYXkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCByZW1vdmVNb2RhbEhhbmRsZXIpO1xuXG5cdFx0Y2xvc2UgPSBtb2RhbC5xdWVyeVNlbGVjdG9yKCcuY2FuY2VsLWJ0bicpO1xuXHRcdGNsb3NlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGV2KSB7XG5cdFx0XHRldi5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdHJlbW92ZU1vZGFsSGFuZGxlcigpO1xuXHRcdH0pO1xuXHR9O1xuXHRtb2RhbFNlcnZpY2UuY2xvc2VNb2RhbCA9IGZ1bmN0aW9uICgpIHtcblx0XHRyZW1vdmVNb2RhbEhhbmRsZXIoKTtcblx0fTtcblx0bW9kYWxTZXJ2aWNlLmlzT3BlbiA9IGZ1bmN0aW9uICgpIHtcblx0XHRyZXR1cm4gbW9kYWwgIT09IHVuZGVmaW5lZDtcblx0fTtcblxuXHRmdW5jdGlvbiBzaG93TG9hZGluZyhzaG93KSB7XG5cdFx0dmFyIGxvYWRpbmdEaXYgPSAkKCcjcGFnZUxvYWRlcicpO1xuXHRcdGlmIChzaG93KSB7XG5cdFx0XHRsb2FkaW5nRGl2LnNob3coKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0bG9hZGluZ0Rpdi5oaWRlKCk7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIG1vZGFsU2VydmljZTtcbn1dKTsiLCIndXNlIHN0cmljdCc7XG5cbi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEVkd2FyZCBvbiAxMC8xNS8yMDE2LlxyXG4gKi9cbmFuZ3VsYXIubW9kdWxlKCdtY25lZHdhcmQnKS5mYWN0b3J5KCdyZWNhcHRjaGFTZXJ2aWNlJywgZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgdmFyIHJlY2FwdGNoYVNlcnZpY2UgPSB7fTtcblxuICByZWNhcHRjaGFTZXJ2aWNlLnZlcmlmeSA9IGZ1bmN0aW9uIChzZWNyZXRSZXNwb25zZSwgc3VjY2Vzc0NhbGxiYWNrLCBlcnJvckNhbGxiYWNrKSB7XG4gICAgaWYgKHNlY3JldFJlc3BvbnNlID09PSBudWxsKSB7XG4gICAgICBlcnJvckNhbGxiYWNrKCdTb3JyeSwgYnV0IHNvbWV0aGluZyB3ZW50IHdyb25nIHdpdGggdGhlIHJlQ2FwdGNoYS4gUGxlYXNlIHJlZnJlc2ggdGhlIHBhZ2UgYW5kIHRyeSBhZ2Fpbi4nKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZmV0Y2goJy9hcGkvcmVjYXB0Y2hhL3ZlcmlmeT9zZWNyZXRSZXNwb25zZT0nICsgc2VjcmV0UmVzcG9uc2UsIHsgbWV0aG9kOiAnUE9TVCcgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgIHZhciBvayA9IHJlc3BvbnNlLm9rO1xuICAgICAgcmVzcG9uc2UudGV4dCgpLnRoZW4oZnVuY3Rpb24gKHRleHQpIHtcbiAgICAgICAgaWYgKG9rKSB7XG4gICAgICAgICAgc3VjY2Vzc0NhbGxiYWNrKHNlY3JldFJlc3BvbnNlLCB0ZXh0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBlcnJvckNhbGxiYWNrKHRleHQpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfTtcblxuICByZXR1cm4gcmVjYXB0Y2hhU2VydmljZTtcbn0pOyIsIid1c2Ugc3RyaWN0JztcblxuLyoqXHJcbiAqIENyZWF0ZWQgYnkgRWR3YXJkIG9uIDYvOS8yMDE2LlxyXG4gKi9cbmFuZ3VsYXIubW9kdWxlKCdtY25lZHdhcmQnKS5mYWN0b3J5KCd1c2VyU2VydmljZScsIFtmdW5jdGlvbiAoKSB7XG5cdCd1c2Ugc3RyaWN0JztcblxuXHR2YXIgdXNlclNlcnZpY2UgPSB7fTtcblx0dmFyIHNhdmVkVXNlciA9IG51bGw7XG5cblx0dXNlclNlcnZpY2UuY2xlYXJDYWNoZSA9IGZ1bmN0aW9uICgpIHtcblx0XHRsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgndXNlcicpO1xuXHRcdHRoaXMuc2F2ZWRVc2VyID0gbnVsbDtcblx0fTtcblxuXHR1c2VyU2VydmljZS5pc0xvZ2dlZEluID0gZnVuY3Rpb24gKCkge1xuXHRcdHJldHVybiB0aGlzLmdldEF1dGhUb2tlbigpICE9PSBudWxsO1xuXHR9O1xuXG5cdHVzZXJTZXJ2aWNlLmlzQWRtaW4gPSBmdW5jdGlvbiAoKSB7XG5cdFx0aWYgKCF0aGlzLnNhdmVkVXNlcikgdGhpcy5nZXRVc2VyKCk7XG5cdFx0aWYgKHRoaXMuc2F2ZWRVc2VyLnVzZXJSb2xlcyAmJiB0aGlzLnNhdmVkVXNlci51c2VyUm9sZXMuaW5kZXhPZignQURNSU4nKSAhPSAtMSkgcmV0dXJuIHRydWU7ZWxzZSByZXR1cm4gZmFsc2U7XG5cdH07XG5cblx0dXNlclNlcnZpY2Uuc2F2ZSA9IGZ1bmN0aW9uICh1c2VyKSB7XG5cdFx0aWYgKHVzZXIgJiYgdXNlci5hdXRoVG9rZW4gIT09ICcnKSB7XG5cdFx0XHRsb2NhbFN0b3JhZ2UudXNlciA9IEpTT04uc3RyaW5naWZ5KHVzZXIpO1xuXHRcdFx0dGhpcy5zYXZlZFVzZXIgPSB1c2VyO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRjb25zb2xlLmxvZygnTm8gdXNlciB0byBzYXZlLicpO1xuXHRcdH1cblx0fTtcblxuXHR1c2VyU2VydmljZS51cGRhdGUgPSBmdW5jdGlvbiAoKSB7XG5cdFx0dGhpcy5zYXZlKHRoaXMuZ2V0VXNlcigpKTtcblx0fTtcblxuXHR1c2VyU2VydmljZS5nZXRVc2VyID0gZnVuY3Rpb24gKCkge1xuXHRcdGlmICghdGhpcy5zYXZlZFVzZXIpIHtcblx0XHRcdHRoaXMuc2F2ZWRVc2VyID0gbG9jYWxTdG9yYWdlLnVzZXIgPyBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS51c2VyKSA6IFtdO1xuXHRcdH1cblx0XHRyZXR1cm4gdGhpcy5zYXZlZFVzZXI7XG5cdH07XG5cblx0dXNlclNlcnZpY2UuZ2V0QXV0aFRva2VuID0gZnVuY3Rpb24gKCkge1xuXHRcdGlmICghdGhpcy5zYXZlZFVzZXIpIHRoaXMuZ2V0VXNlcigpO1xuXHRcdGlmICh0aGlzLnNhdmVkVXNlci5hdXRoVG9rZW4gJiYgdGhpcy5zYXZlZFVzZXIuYXV0aFRva2VuICE9PSAnJykge1xuXHRcdFx0cmV0dXJuIHRoaXMuc2F2ZWRVc2VyLmF1dGhUb2tlbjtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0fVxuXHR9O1xuXG5cdHJldHVybiB1c2VyU2VydmljZTtcbn1dKTsiLCIndXNlIHN0cmljdCc7XG5cbi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEVkd2FyZCBvbiAyLzE5LzE1LlxyXG4gKi9cbmFuZ3VsYXIubW9kdWxlKCdtY25lZHdhcmQnKS5kaXJlY3RpdmUoJ2J1dHRvbm9wdGlvbnMnLCBbZnVuY3Rpb24gKCkge1xuXHQndXNlIHN0cmljdCc7XG5cblx0cmV0dXJuIHtcblx0XHRzY29wZToge1xuXHRcdFx0Y29uZmlybUFjdGlvbjogJyYnLFxuXHRcdFx0Y2FuY2VsQWN0aW9uOiAnJidcblx0XHR9LFxuXHRcdHJlc3RyaWN0OiAnQUUnLFxuXHRcdHJlcGxhY2U6ICd0cnVlJyxcblx0XHRjb250cm9sbGVyOiBmdW5jdGlvbiBjb250cm9sbGVyKCRzY29wZSkge1xuXHRcdFx0JHNjb3BlLmNvbmZpcm0gPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdCRzY29wZS5jb25maXJtQWN0aW9uKCk7XG5cdFx0XHR9O1xuXHRcdFx0JHNjb3BlLmNhbmNlbCA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0JHNjb3BlLmNhbmNlbEFjdGlvbigpO1xuXHRcdFx0fTtcblx0XHR9LFxuXHRcdGxpbms6IGZ1bmN0aW9uIGxpbmsoc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XG5cdFx0XHRzY29wZS50aXRsZSA9IGF0dHJzLmNvbmZpcm1UaXRsZTtcblx0XHRcdHNjb3BlLmNhbmNlbFRpdGxlID0gYXR0cnMuY2FuY2VsVGl0bGUgPyBhdHRycy5jYW5jZWxUaXRsZSA6ICdYJztcblx0XHRcdGlmIChhdHRycy5jb25maXJtQ2xhc3MpIHNjb3BlLmNvbmZpcm1DbGFzcyA9IGF0dHJzLmNvbmZpcm1DbGFzcztcblx0XHR9LFxuXHRcdC8vIHRlbXBsYXRlOiAnPGRpdiBjbGFzcz1cImJ1dHRvbi1kaXZcIj48c3BhbiBpZD1cImNvbmZpcm1CdG5cIiBjbGFzcz1cImVidG4gZWJ0bi1ncmVlbiBjb25maXJtQnRuXCIgbmctY2xpY2s9XCJjb25maXJtKClcIiBuZy1jbGFzcz1cImNvbmZpcm1DbGFzc1wiIHN0eWxlPVwid2lkdGg6NzUlO3doaXRlLXNwYWNlOm5vd3JhcDt0ZXh0LW92ZXJmbG93OmVsbHBzaXM7XCI+e3t0aXRsZX19PC9zcGFuPjxzcGFuIGNsYXNzPVwiZWJ0biBlYnRuLXJlZCBjYW5jZWxCdG5cIiBuZy1jbGljaz1cImNhbmNlbCgpXCIgc3R5bGU9XCJ3aWR0aDoyNSVcIj57e2NhbmNlbFRpdGxlfX08L3NwYW4+PC9kaXY+J1xuXHRcdHRlbXBsYXRlOiAnPGRpdiBjbGFzcz1cImJ0bi1ncm91cFwiPicgKyAnPGJ1dHRvbiBkYXRhLW5nLWNsaWNrPVwiY29uZmlybSgpXCIgY2xhc3M9XCJidG4gZWJ0bi1ncmVlblwiPnt7dGl0bGV9fTwvYnV0dG9uPicgKyAnPGJ1dHRvbiBkYXRhLW5nLWNsaWNrPVwiY2FuY2VsKClcIiBjbGFzcz1cImJ0biBlYnRuLXJlZCBjYW5jZWxCdG5cIj57e2NhbmNlbFRpdGxlfX08L2J1dHRvbj48L2Rpdj4nXG5cdH07XG59XSk7XG5hcHAuZGlyZWN0aXZlKCduZ0VudGVyJywgZnVuY3Rpb24gKCkge1xuXHRyZXR1cm4gZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xuXHRcdGVsZW1lbnQuYmluZCgna2V5ZG93biBrZXlwcmVzcycsIGZ1bmN0aW9uIChldmVudCkge1xuXHRcdFx0aWYgKGV2ZW50LndoaWNoID09PSAxMykge1xuXHRcdFx0XHRzY29wZS4kYXBwbHkoZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdHNjb3BlLiRldmFsKGF0dHJzLm5nRW50ZXIsIHsgJ2V2ZW50JzogZXZlbnQgfSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9O1xufSk7Il19
