"use strict";function ParserDirectory(e,r,t){var n=this;n.name=e?e:null,n.directories=r?r:[],n.files=t?t:[]}function ParserFile(e,r){var t=this;t.id=e?e:0,t.name=r?r:null}var app=angular.module("mcnedward",["ui.router","ui.bootstrap","ngAnimate","vcRecaptcha"]).config(["$stateProvider","$urlRouterProvider","$httpProvider","$locationProvider",function(e,r,t,n){e.state("app",{url:"/",templateUrl:"core/home.html",controller:"ContactCtrl",title:"Edward McNealy"}).state("ii",{url:"/inheritance-inquiry/",templateUrl:"ii/ii.html",controller:"IICtrl",title:"Inheritance Inquiry"}).state("parser",{url:"/parser/",templateUrl:"parser/parser.html",controller:"ParserCtrl",title:"Parser"}).state("colorZones",{url:"/color-zones/",templateUrl:"colorZones/colorZones.html",controller:"ColorZonesCtrl",title:"Color Zones"}).state("bramble",{url:"/bramble/",templateUrl:"bramble/bramble.html",title:"Bramble"}).state("keepfit",{url:"/keepfit/",templateUrl:"keepfit/keepfit.html",title:"KeepFit"}).state("blackjack",{url:"/blackjack/",templateUrl:"blackjack/blackjack.html",controller:"BlackjackCtrl",title:"Blackjack"}).state("numberPrinter",{url:"/numberprinter/",templateUrl:"numberPrinter/numberPrinter.html",controller:"NumberPrinterCtrl",title:"Number Printer"}),r.otherwise("/"),r.when(/ii/,["$state","$match",function(e,r){e.go("ii")}]),n.html5Mode(!0)}]);angular.module("mcnedward").controller("AppCtrl",["$rootScope","$state","$timeout","$location","$anchorScroll",function(e,r,t,n,a){function o(e){e&&""!==e&&t(function(){$("html, body").animate({scrollTop:$("#"+e).offset().top+2},1)})}e.inRoot=!0,e.appTitle="Edward McNealy",e.$on("$stateChangeSuccess",function(r,t,n,a,s){e.appTitle=t.title&&""!==t.title?t.title:"Edward McNealy",o("app"===a.name?"scrollhere":a.name),"colorZones"===a.name&&e.$broadcast("stopRendering"),e.inRoot="app"===t.name||""===t.name,e.useContainerFluid="colorZones"==t.name||"parser"==t.name,e.useContainer=!e.inRoot&&!e.useContainerFluid,ga("set","page","app"===t.name?"/index.html":t.url+".html"),ga("send","pageview")}),$("#loader").fadeOut(200)}]),angular.module("mcnedward").controller("BlackjackCtrl",["$rootScope","$scope","blackjackService","playerService",function(e,r,t,n){function a(e){r.player=n.getPlayer(),r.dealer=n.getDealer(),e&&o()}function o(){n.updateUsers([r.player,r.dealer])}function s(e){e?($("#options").show(),$("#startCards").hide(),r.stopBets=!0):($("#options").hide(),$("#startCards").show(),r.stopBets=!1)}r.player=n.getPlayer(),r.dealer=n.getDealer(),e.$on("busted",function(e,o){var i=o;"player"==i.type&&(r.message="You busted...",n.userWon("dealer")),"dealer"==i.type&&(r.message="Dealer busted! You win!",n.userWon("player")),t.flipCards(),a(!0),s(!1)}),e.$on("dealerWon",function(){r.message="Dealer wins...",n.userWon("dealer"),a(!0),s(!1)}),e.$on("playerWon",function(){r.message="You win!",n.userWon("player"),a(!0),s(!1)}),e.$on("push",function(){r.message="Push.",a(!0),s(!1)}),e.$on("21",function(e,o){var i=o;"player"==i.type&&(r.message="You got 21! You win!",n.userWon("player")),"dealer"==i.type&&(r.message="Dealer got 21...",n.userWon("dealer")),t.flipCards(),a(!0),s(!1)});for(var i=0;i<3;i++){var l=$("<img>");2==i?(l.attr("src","img/blackjack/card/b2fv.jpg"),l.attr("id","startCard"),l.addClass("card-img")):(l.attr("src","img/blackjack/card/b2pl.jpg"),l.addClass("card-img")),$("#startCards").append(l)}r.dealCards=function(){r.message="",$(".empty-card").css("display","none"),n.resetUsers(),e.hit21=!1,t.dealCards(),e.hit21||(a(),s(!0))},r.hitMe=function(){t.hitMe(r.player),a()},r.stay=function(){t.stay(),a()},r.addChip=function(e){return r.message="",r.stopBets?void(r.message='You can"t place any more bets now!'):r.player.money<r.player.bet+e?void(r.message='You don"t have the money to place that bet!'):(n.addChip(e),void a())},r.clearBet=function(){return r.message="",r.stopBets?void(r.player.bet>0&&(r.message='You can"t back out now!')):void n.clearBet()}}]),angular.module("mcnedward").service("blackjackService",["$rootScope","playerService",function(e,r){function t(e,r){var t,n;if(1==r||r>10){switch(r){case 1:t="Ace",r=11;break;case 11:t="Jack",r=10;break;case 12:t="Queen",r=10;break;case 13:t="King",r=10}n=e.substring(0,1).toLowerCase()+t.substring(0,1).toLowerCase()}else t=r,n=e.substring(0,1).toLowerCase()+r;var a=e+t;return{suit:e,name:t,value:r,id:a,isFaceDown:!1,src:"img/blackjack/card/"+n+".jpg"}}function n(){l=[];for(var e=0;e<i.length;e++)for(var r=1;r<14;r++){var n=t(i[e],r);l.push(n)}}function a(e,t){var n=l[0];t&&(n.isFaceDown=t),r.addCard(e,n),l.splice(l.indexOf(n),1)}function o(){n();for(var e,r=[],t=l.length;t;){e=Math.floor(Math.random()*l.length);var a=l[e];e in l&&(r.push(a),delete l[e],t--)}return l=r}var s={},i=["clubs","spades","diamonds","hearts"],l=[];return s.dealCards=function(){o();for(var e=0;e<4;e++)e%2===0?a(r.getPlayer()):3==e?a(r.getDealer(),!0):a(r.getDealer())},s.hitMe=function(e){a(e)},s.stay=function(){for(var t=r.getDealer(),n=0;n<t.cards;n++)t.cards[n].isFaceDown&&(t.cards[n].faceDown=!1);for(;t.handValue<17;)a(t);t.handValue>21?e.$broadcast("dealerBusted"):t.handValue>r.getPlayer().handValue?e.$broadcast("dealerWon"):t.handValue==r.getPlayer().handValue?e.$broadcast("push"):e.$broadcast("playerWon"),e.$broadcast("showCards")},s.flipCards=function(){for(var e=0;e<r.getDealer().cards.length;e++){var t=r.getDealer().cards[e];t.isFaceDown&&(t.isFaceDown=!1,r.getDealer().table.find($("#"+t.id)).attr("src",t.src))}},s}]),angular.module("mcnedward").service("playerService",["$rootScope",function(e){function r(e){l[e.type]=e,localStorage.users=JSON.stringify(l)}function t(e){for(var t=0;t<e.length;t++){var n=e[t];r(n)}}function n(){function e(e){e.cards=[],e.handValue=0}function r(){var e=JSON.parse(localStorage.users);return e.player.table=$(e.player.table.selector),e.dealer.table=$(e.dealer.table.selector),e}if(localStorage.users&&localStorage.users.length>2){var n=r(),o=n.player,s=n.dealer;e(o),e(s),t([o,s])}else l.player={table:$("#pTable"),cards:[],handValue:0,type:"player",money:1e3,bet:0,chips:a(),wins:0,loses:0},l.dealer={table:$("#dTable"),cards:[],handValue:0,type:"dealer",wins:0,loses:0},localStorage.users=JSON.stringify(l)}function a(){return{chip5s:0,chip10s:0,chip25s:0,chip100s:0,chip500s:0}}function o(r){for(var t=0;t<r.cards.length&&!("Ace"==r.cards[t].name&&(11==r.cards[t].value&&(r.cards[t].value=1,s(r)),r.handValue<21));t++);r.handValue>21&&e.$broadcast("busted",r)}function s(e){for(var t=0,n=0;n<e.cards.length;n++)t+=e.cards[n].value;e.handValue=t,r(e)}var i={},l={};return i.getPlayer=function(){return l.player},i.getDealer=function(){return l.dealer},i.resetUsers=function(){n()},i.updateUser=function(e){r(e)},i.updateUsers=function(e){t(e)},i.addCard=function(r,t){r.cards.push(t),r.handValue=r.handValue+t.value,r.handValue>21&&o(r),21==r.handValue&&(e.$broadcast("21",r),e.hit21=!0)},i.addChip=function(e){l.player.chips["chip"+e+"s"]++,l.player.bet=l.player.bet+e,r(l.player)},i.clearBet=function(){l.player.bet=0,l.player.chips=a()},i.userWon=function(e){var r=l.player,n=l.dealer;"player"==e?(r.wins=r.wins+1,n.loses=n.loses+1,r.money+=r.bet):(n.wins=n.wins+1,r.loses=r.loses+1,r.money-=r.bet),r.bet=0,r.chips=a(),t([r,n])},n(),i}]),angular.module("mcnedward").directive("playingCard",function(){return{scope:{card:"="},restrict:"AE",replace:"true",controller:["$scope",function(e){e.$on("playerBusted",function(){e.card.isFaceDown&&$("#"+e.card.id).attr("src",e.card.src)}),e.$on("showCards",function(){$("#"+e.card.id).attr("src",e.card.src)})}],link:function(e,r,t){e.card.isFaceDown?r.attr("src","img/blackjack/card/b2fv.jpg"):r.attr("src",e.card.src)},template:'<img id="{{card.id}}" class="card-img"/>'}}),angular.module("mcnedward").controller("ColorZonesCtrl",["$rootScope","$scope",function(e,r){$(document).ready(function(){r.renderer=new Renderer;var e=new TimeZoneService(r.renderer.width()),t=new ColorPicker,n=new ColorZonesViewModel(r.renderer,e,t);ko.options.useOnlyNativeEvents=!0,ko.applyBindings(n,$("#main")[0]);var a=new TooltipService([{id:$("#canvasContainer"),timeout:8},{id:$("#hoursControl"),timeout:3},{id:$("#minutesControl"),timeout:3},{id:$("#secondsControl"),timeout:3},{id:$("#opacityControl"),timeout:4},{id:$("#showTimesControl"),timeout:6},{id:$("#showColorsControl"),timeout:6}]);a.loadToolips()}),e.$on("stopRendering",function(){r.renderer.stopRendering(!0)})}]),angular.module("mcnedward").controller("ContactCtrl",["$scope",function(e){function r(){e.contactSuccessMessage="",e.contactErrorMessage=""}function t(t){r(),e.contactErrorMessage=t}e.contactInfo={},e.isFormSubmitted=!1,e.contactSuccessMessage="",e.contactErrorMessage="",e.portfolioMouseOver=function(){e.shouldFade=!0},e.portfolioMouseLeave=function(){e.shouldFade=!1},e.submitContact=function(n,a){if(!e.isFormSubmitted&&(n.$setSubmitted(),!n.$invalid)){e.isFormSubmitted=!0,n.$setPristine(),n.$setUntouched(),r();var o="Sorry, but something went wrong with the reCaptcha. Please refresh the page and try again.";if(null===grecaptcha)return void t(o);var s=a.recaptchaResponse;if(null===s)return void t(o);e.contactSuccessMessage="Sending...";var i="/api/contact?secretResponse="+s;fetch(i,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(a)}).then(function(r){r.ok?r.text().then(function(r){e.contactSuccessMessage=r,e.$apply(),ga("send","event","Contact","Email","From: "+a.email+" - Subject: "+a.subject)}):r.text().then(function(r){t(r),e.isFormSubmitted=!1,e.$apply()})})}},e.checkLength=function(e){var r=e?e.length:0;return r||(r=0),r},e.emailMaxLength=100,e.subjectMaxLength=100,e.messageMaxLength=1e3,e.subjectLength=function(){return e.checkLength(e.contactInfo.subject)},e.messageLength=function(){return e.checkLength(e.contactInfo.message)}}]),angular.module("mcnedward").controller("NumberPrinterCtrl",["$scope",function(e){function r(r){t();var n=e.number;return""===n?void(e.errorMessage="You need to enter something!"):fetch("/api/number-printer?number="+n).then(function(t){return t.ok?void t.json().then(r):void t.text().then(function(r){e.errorMessage=r,e.$apply()})}).catch(function(r){e.errorMessage=r,e.$apply()})}function t(){e.result="",e.errorMessage=""}e.result="",e.convertToEnglish=function(){r(function(r){e.result=r.englishWord,e.$apply()})},e.convertToRomanNumeral=function(){r(function(r){e.result=r.romanNumeral,e.$apply()})}}]),angular.module("mcnedward").controller("IICtrl",["$scope","modalService",function(e,r){function t(r){e.showAppError=!1,e.appError=""}function n(r){e.showLibError=!1,e.libError=""}e.iiInfo={},e.isFormSubmitted=!1,e.openDownloadForApp=function(){t(),r.showModal("downloadAppModal")},e.openDownloadForLib=function(){n(),r.showModal("downloadLibModal")},e.downloadIIApp=function(r,n){if(!e.isAppFormSubmitted&&(r.$setSubmitted(),!r.$invalid)){e.isAppFormSubmitted=!0,r.$setPristine(),r.$setUntouched(),t();var a="/api/ii/app?secretResponse="+n.recaptchaResponse;window.location.href=a}},e.downloadIILib=function(r,t){if(!e.isLibFormSubmitted&&(r.$setSubmitted(),!r.$invalid)){e.isLibFormSubmitted=!0,r.$setPristine(),r.$setUntouched(),n();var a="/api/ii/lib?secretResponse="+t.recaptchaResponse;window.location.href=a}}}]),angular.module("mcnedward").directive("directory",["$rootScope",function(e){return{restrict:"AE",transclude:!0,scope:{name:"=",id:"=",directories:"=",classes:"="},link:function(r,t,n){r.selectClass=function(r,t){e.$broadcast("selectClass",{directoryId:r,classId:t})},r.isRealDirectory=null!==r.name&&""!==r.name,r.showContents=!1},templateUrl:"parser/directory.html"}}]),angular.module("mcnedward").directive("dragAndDrop",["$rootScope","$timeout",function(e,r){return{restrict:"E",link:function(e,t,n){function a(){}var o="Drag files here!";e.dragAreaMessage=o,e.dragoverClass="",e.uploadProgress=0,e.handleError=function(r,t){e.fileSelected=!1,e.hasError=!0,e.load(!1),e.dragoverClass="dragover-error",e.dragAreaMessage="",e.dragAreaError=r,console.log(t,r)};var s=!1;e.load=function(t){if(e.dragAreaError="",t)s=!0,e.uploadProgress=0,a();else{if(s=!1,e.hasError)return;e.dragAreaMessage="Finished!",e.dragoverClass="",e.uploadProgress=100,r(function(){e.dragAreaMessage=o,e.uploadProgress=0},3e3)}},t.bind("dragenter",function(r){r.stopPropagation(),r.preventDefault(),r.originalEvent.dataTransfer.dropEffect="copy",e.dragoverClass="dragover",e.dragAreaMessage="Drop files!",e.dragAreaError="",e.$apply()}),t.bind("dragleave",function(r){r.stopPropagation(),r.preventDefault(),e.dragoverClass="",e.dragAreaMessage="Drag files here!",e.dragAreaError="",e.$apply()}),t.bind("dragover",function(r){r.stopPropagation(),r.preventDefault(),r.originalEvent.dataTransfer.dropEffect="copy",e.dragoverClass="dragover",e.dragAreaMessage="Drop files!",e.dragAreaError="",e.$apply()}),t.bind("dragevent",function(e){e.stopPropagation(),e.preventDefault()}),t.bind("drop",function(r){function t(e,r,n){var a=e.createReader();return new Promise(function(e){var i=[];!function r(n,l){a.readEntries(function(a){a.length?(i.push(Promise.all(a.map(function(e){if(!e.isFile){var r=new ParserDirectory(e.name,[],[]);return n?n.directories.push(r):n=r,t(e,r,l)}e.file(function(e){u.uploadFiles.push(e);var r=new ParserFile(o++,e.name);return n.files.push(r),r},function(e){console.log(e)})}))),r(n,l)):Promise.all(i).then(function(r){e(l)},s)})}(r,n)})}function n(e){for(var r=[],n=0;n<e.length;n++)r.push(e[n].webkitGetAsEntry());return new Promise(function(e){var n=[];n.push(Promise.all(r.map(function(e){if(e.isFile)return new Promise(function(r){e.file(function(e){u.uploadFiles.push(e);var t=new ParserFile(o++,e.name);return u.files.push(t),r(u),t},s)});var r=new ParserDirectory(e.name,[],[]);return u?u.directories.push(r):u=r,t(e,r,u)}))),Promise.all(n).then(function(r){e(u)},s)}).then(function(e){a(e)},s)}function a(r){e.dragoverClass="dropped",e.dragAreaMessage="Ready for Upload!",e.$apply(),e.filesDropped(r)}r.stopPropagation(),r.preventDefault();var o=1,s=function(e){console.log(e)},i=r.originalEvent;if(i){var l=i.dataTransfer,c=l.items,u=new ParserDirectory;if(u.uploadFiles=[],1==c.length){var d=c[0].webkitGetAsEntry();d.isFile?n(c):(u.name=d.name,t(d,u,u).then(function(e){a(e)},s))}else n(c)}})},templateUrl:"parser/fileUpload.html"}}]),angular.module("mcnedward").controller("ParserCtrl",["$rootScope","$scope","$window","parserService","recaptchaService","modalService",function(e,r,t,n,a,o){function s(e,t){var n="",a=t&&t.data?t.data:null,o=a&&a.errors?a.errors:[];if(o.length>0)for(var s=0;s<o.length;s++)n+=o[s];else n=e;r.handleError(n,t),r.parsingComplete=!1}function i(e,t){r.secretResponse=e,r.token=t,n.uploadFiles(r.files,e,t).then(function(a){return a.ok?void a.json().then(function(a){r.uploadDirectory.token=a.token,r.uploadDirectory.fileIds=a.fileIds;try{n.parseFiles(r.uploadDirectory,e,t).then(function(e){e.ok?(r.dragAreaMessage="Analyzing your files...",r.$apply(),e.json().then(function(e){n.saveDirectory(e),r.load(!1),r.fileSelected=!1,r.isParsingComplete=!0,r.uploadDirectory={},r.directory=e;var t=u(e);r.classObject=t,d(t)})):e.text().then(function(e){s(e)})},function(e){s(p,e)})}catch(e){s(p,e)}}):void a.text().then(function(e){s(e)})})}function l(e,r,t){var n;if(r===e.id&&e.classes&&(n=c(e.classes,t)))return n;for(var a=0;a<e.directories.length;a++){var o=e.directories[a];if(n=l(o,r,t))return n}}function c(e,r){for(var t=0;t<e.length;t++){var n=e[t];if(n.id==r)return n}}function u(e){if(e.classes&&e.classes.length>0)return e.classes[0];if(e.directories)for(var r=0;r<e.directories.length;r++)if(f=u(e.directories[r]))return f;return null}function d(e){var r;if($("#classContent").empty(),e.codeTag)r=e.codeTag;else{r=$("<code/>",{id:"code",text:e.classContent});for(var t=r.length,n=0;n<t;n++){r[n].innerHTML='<span class="line-number"></span>'+r[n].innerHTML+'<span class="cl"></span>';for(var a=r[n].innerHTML.split(/\n/).length,o=0;o<a;o++){var s=r[n].getElementsByTagName("span")[0],i=o+1;s.innerHTML+='<span id="'+i+'">'+i+"</span>"}}e.codeTag=r}r.appendTo("#classContent")}/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&o.showModal("deviceModal"),r.uploadInfo={},r.isFormSubmitted=!1,r.isParsingComplete=!1,r.fileUploadMessage="Click to choose a Java file or project to parse!",r.errorMessage="",r.fileSelected=!1;var p="Something went wrong parsing files...Please try again.";if($("#file-upload").change(function(){var e=this.files;if(!e||0===e.length)return void console.log("No files selected...");var t=e[0].name;r.files=e,r.fileName=t,r.fileSelected=!0,r.$apply()}),r.uploadFile=function(e,t){r.isFormSubmitted||(e.$setSubmitted(),e.$invalid||(r.isFormSubmitted=!0,e.$setPristine(),e.$setUntouched(),r.load(!0),r.dragAreaMessage="Uploading your files...",a.verify(t.recaptchaResponse,i,s)))},r.selectClassObject=function(e){for(var t=0;t<r.classObjects.length;t++){var n=r.classObjects[t];n.fileName===e.fileName&&(r.classObject=n),r.fileNames[t].isSelected=!1}e.isSelected=!0,d(r.classObject)},r.filesDropped=function(e){r.fileName=e.name?e.name:e.uploadFiles.length+" Files",r.files=e.uploadFiles,r.fileSelected=!0,r.uploadDirectory=e,r.$apply()},r.moveToLine=function(e){var r=e.lineNumber,t=$("#"+r);t.addClass("line-animation-in"),setTimeout(function(){t.addClass("line-animation-out"),setTimeout(function(){t.removeClass("line-animation-in"),t.removeClass("line-animation-out")},1500)},3e3),$("#classContent").animate({scrollTop:t.offset().top-200},500)},e.$on("selectClass",function(e,t){var n=l(r.directory,t.directoryId,t.classId);n?(r.classObject=n,d(n)):r.errorMessage="Could not find class."}),r.directory=n.getDirectory(),r.directory){r.isParsingComplete=!0;var f=u(r.directory);f?(r.classObject=f,d(f)):r.errorMessage="Could not find any files in directory "+r.directory.name+"."}}]),angular.module("mcnedward").service("parserService",["$http",function(e){var r={};return r.uploadFiles=function(e,r,t){var n=new FormData;angular.forEach(e,function(e,r){n.append("files",e)});var a="/api/parser/files?secretResponse="+r+"&requestToken="+t;return fetch(a,{method:"POST",body:n})},r.parseFiles=function(e,r,t){e.uploadFiles=null;var n="/api/parser/parse?secretResponse="+r+"&requestToken="+t;return fetch(n,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)})},r.getUploadProgress=function(e,r,t){return fetch("/api/parser/progress?secretResponse="+e+"&requestToken="+r)},r.saveClasses=function(e){e?(localStorage.classObjects=JSON.stringify(e),r.classObjects=e):console.log("No classObjects to save...")},r.getClasses=function(){var e=localStorage.classObjects?JSON.parse(localStorage.classObjects):null;return e},r.saveDirectory=function(e){e?(localStorage.directory=JSON.stringify(e),r.directory=e):console.log("No directory to save...")},r.getDirectory=function(){var e=localStorage.directory?JSON.parse(localStorage.directory):null;return e},r}]),angular.module("mcnedward").directive("structure",["$rootScope",function(e){return{restrict:"E",transclude:!0,scope:{title:"@",contents:"="},controller:function(e,r,t){},link:function(e,r,t){},templateUrl:"parser/structure.html"}}]),angular.module("mcnedward").factory("modalService",["$timeout",function(e){function r(e){classie.remove(a,"md-show")}function t(){r()}var n,a,o,s={};return s.showModal=function(e){a=document.querySelector("#"+e),classie.add(a,"md-show"),n=document.querySelector("#overlay-"+e),n.removeEventListener("click",t),n.addEventListener("click",t),o=a.querySelector(".cancel-btn"),o.addEventListener("click",function(e){e.stopPropagation(),t()})},s.closeModal=function(){t()},s.isOpen=function(){return void 0!==a},s}]),angular.module("mcnedward").factory("recaptchaService",function(){var e={};return e.verify=function(e,r,t){return null===e?void t("Sorry, but something went wrong with the reCaptcha. Please refresh the page and try again."):void fetch("/api/recaptcha/verify?secretResponse="+e,{method:"POST"}).then(function(n){var a=n.ok;n.text().then(function(n){a?r(e,n):t(n)})})},e}),angular.module("mcnedward").factory("userService",[function(){var e={};return e.clearCache=function(){localStorage.removeItem("user"),this.savedUser=null},e.isLoggedIn=function(){return null!==this.getAuthToken()},e.isAdmin=function(){return this.savedUser||this.getUser(),!(!this.savedUser.userRoles||this.savedUser.userRoles.indexOf("ADMIN")==-1)},e.save=function(e){e&&""!==e.authToken?(localStorage.user=JSON.stringify(e),this.savedUser=e):console.log("No user to save.")},e.update=function(){this.save(this.getUser())},e.getUser=function(){return this.savedUser||(this.savedUser=localStorage.user?JSON.parse(localStorage.user):[]),this.savedUser},e.getAuthToken=function(){return this.savedUser||this.getUser(),this.savedUser.authToken&&""!==this.savedUser.authToken?this.savedUser.authToken:null},e}]),angular.module("mcnedward").directive("buttonoptions",[function(){return{scope:{confirmAction:"&",cancelAction:"&"},restrict:"AE",replace:"true",controller:function(e){e.confirm=function(){e.confirmAction()},e.cancel=function(){e.cancelAction()}},link:function(e,r,t){e.title=t.confirmTitle,e.cancelTitle=t.cancelTitle?t.cancelTitle:"X",t.confirmClass&&(e.confirmClass=t.confirmClass)},template:'<div class="btn-group"><button data-ng-click="confirm()" class="btn ebtn-green">{{title}}</button><button data-ng-click="cancel()" class="btn ebtn-red cancelBtn">{{cancelTitle}}</button></div>'}}]),app.directive("ngEnter",function(){return function(e,r,t){r.bind("keydown keypress",function(r){13===r.which&&(e.$apply(function(){e.$eval(t.ngEnter,{event:r})}),r.preventDefault())})}});